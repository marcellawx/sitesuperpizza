<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Super Pizza - Super Esfihas - Super Massas - Super Tudo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <style>
    .tab-active {
      border-bottom: 4px solid #ef4444;
      color: #ef4444;
      font-weight: bold;
    }
    .custom-scroll::-webkit-scrollbar {
      width: 8px;
    }
    .custom-scroll::-webkit-scrollbar-track {
      background: #fef3c7;
    }
    .custom-scroll::-webkit-scrollbar-thumb {
      background-color: #f87171;
      border-radius: 10px;
      border: 2px solid #fef3c7;
    }
    .cart-item-enter {
      animation: slide-in 0.3s ease-out forwards;
    }
    @keyframes slide-in {
      from { opacity: 0; transform: translateX(20px); }
      to { opacity: 1; transform: translateX(0); }
    }
    .modal-enter {
      animation: fade-in 0.3s ease-out forwards;
    }
      @keyframes fade-in {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    button {
      transition: transform 0.1s ease-in-out;
    }
    button:active {
      transform: scale(0.95);
    }
  </style>
</head>
<body class="bg-gradient-to-br from-yellow-50 via-red-50 to-yellow-100 min-h-screen flex flex-col font-sans">
  <header id="header" class="bg-red-700 text-white p-4 shadow-xl sticky top-0 z-50">
    <div class="max-w-7xl mx-auto flex flex-col md:flex-row items-center justify-between">
      <div class="flex items-center gap-3">
        <i class="fas fa-pizza-slice text-4xl text-yellow-300"></i>
        <h1 class="text-4xl font-extrabold tracking-wide drop-shadow-lg" style="font-family: 'Titan One', cursive;">
          Super Pizza
        </h1>
      </div>
      <div class="mt-3 md:mt-0 text-center md:text-right text-sm md:text-base">
        <p class="font-semibold"><i class="fas fa-motorcycle mr-2 text-yellow-300"></i>Entrega grÃ¡tis em pedidos acima de R$ 35,00!</p>
        <p><i class="fas fa-credit-card mr-2 text-yellow-300"></i>Aceitamos cartÃµes de refeiÃ§Ã£o e alimentaÃ§Ã£o</p>
      </div>
    </div>
  </header>

  <main class="flex-grow max-w-7xl mx-auto p-4 md:p-6 flex flex-col w-full">
    <nav class="mb-8 flex flex-wrap justify-center border-b-2 border-red-200">
      <button class="tab-button tab-active px-3 py-2 md:px-4 md:text-lg font-semibold" data-tab="promocoes">PromoÃ§Ãµes ğŸ”¥</button>
      <button class="tab-button px-3 py-2 md:px-4 md:text-lg font-semibold" data-tab="pizzas">Pizzas ğŸ•</button>
      <button class="tab-button px-3 py-2 md:px-4 md:text-lg font-semibold" data-tab="massas">Massas ğŸ</button>
      <button class="tab-button px-3 py-2 md:px-4 md:text-lg font-semibold" data-tab="hamburgueres">HambÃºrgueres ğŸ”</button>
      <button class="tab-button px-3 py-2 md:px-4 md:text-lg font-semibold" data-tab="esfihas">Esfihas ğŸ¥Ÿ</button>
      <button class="tab-button px-3 py-2 md:px-4 md:text-lg font-semibold" data-tab="combos">Combos & Petiscos ğŸŸ</button>
      <button class="tab-button px-3 py-2 md:px-4 md:text-lg font-semibold" data-tab="bebidas">Bebidas ğŸ¥¤</button>
      <button class="tab-button px-3 py-2 md:px-4 md:text-lg font-semibold" data-tab="contato">Contato ğŸ“</button>
    </nav>
    
    <div class="flex flex-col lg:flex-row gap-8">
      <div class="flex-grow">
        <section id="promocoes" class="tab-content block"></section>
        <section id="pizzas" class="tab-content hidden">
            <h2 class="text-3xl font-bold text-red-700 mb-6 border-l-4 border-red-500 pl-3">Nossas Pizzas IrresistÃ­veis ğŸ•</h2>
            <div class="bg-white p-6 rounded-lg shadow-lg">
                <h3 class="text-2xl font-semibold mb-4 text-gray-800">Monte sua Pizza do Seu Jeito! âœ¨</h3>
                <form id="buildPizzaForm" class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <div class="mb-4 bg-white p-4 rounded-lg shadow">
                            <label class="block font-semibold mb-2 text-gray-700" for="pizzaSizes">1. Escolha o Tamanho:</label>
                            <select id="pizzaSizes" name="pizzaSize" required class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-red-500"></select>
                        </div>
                        <div class="mb-4 bg-white p-4 rounded-lg shadow">
                           <label class="block font-semibold mb-2 text-gray-700" for="bordaRecheada">2. Borda Recheada (Opcional):</label>
                           <select id="bordaRecheada" name="bordaRecheada" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-red-500"></select>
                        </div>
                        <div id="sodaSelectionContainer" class="space-y-4 mb-4 bg-white p-4 rounded-lg shadow">
                        </div>
                         <div class="bg-white p-4 rounded-lg shadow">
                            <label class="block font-semibold mb-2 text-gray-700">3. Escolha os Sabores:</label>
                            <div id="flavorsAccordion" class="space-y-2"></div>
                            <p id="flavorWarning" class="text-red-600 text-sm mt-2 hidden"></p>
                         </div>
                    </div>
                    <div class="bg-yellow-50 p-5 rounded-lg shadow-inner border border-yellow-200 flex flex-col">
                        <h4 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2">Resumo da sua Pizza</h4>
                        <div class="flex-grow">
                           <p><strong>Tamanho:</strong> <span id="summarySize">--</span></p>
                           <p><strong>Borda:</strong> <span id="summaryBorda">Nenhuma</span></p>
                           <p id="summarySodaContainer" class="hidden"><strong>Refrigerante(s):</strong> <span id="summarySoda">--</span></p>
                           <div class="mt-2">
                               <p><strong>Sabores:</strong></p>
                               <ul id="summaryFlavors" class="list-disc list-inside text-gray-700">
                                   <li>Selecione um sabor...</li>
                               </ul>
                           </div>
                        </div>
                        <div class="mt-6 text-center">
                            <p class="text-2xl font-bold text-red-700 mb-4">Total: R$ <span id="pizzaTotal">0,00</span></p>
                            <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg text-lg transition-transform duration-100 active:scale-95">
                              <i class="fas fa-cart-plus mr-2"></i> Adicionar ao Pedido
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </section>

        <section id="massas" class="tab-content hidden"></section>
        <section id="hamburgueres" class="tab-content hidden"></section>
        <section id="esfihas" class="tab-content hidden"></section>
        <section id="combos" class="tab-content hidden"></section>
        <section id="bebidas" class="tab-content hidden"></section>
        <section id="contato" class="tab-content hidden"></section>
      </div>
      
      <div id="cartSection" class="w-full lg:w-1/3 xl:w-1/4">
        <div class="bg-white p-4 rounded-lg shadow-lg sticky top-28">
            <h3 class="text-2xl font-bold text-red-700 mb-4 border-b-2 border-red-200 pb-2 flex items-center gap-3">
              <i class="fas fa-shopping-cart text-red-600"></i> Meu Pedido
            </h3>
            <div id="cartItems" class="mb-4 max-h-80 overflow-y-auto custom-scroll">
                <p id="emptyCart" class="text-gray-500 text-center py-8">Seu carrinho estÃ¡ vazio.</p>
            </div>
            <div class="border-t-2 border-red-200 pt-4">

                <div class="mb-4">
                  <div class="flex gap-2">
                    <input type="text" id="couponInput" placeholder="Tem um cupom?" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 text-sm">
                    <button id="applyCouponBtn" class="bg-gray-800 text-white px-4 rounded-md hover:bg-gray-700 text-sm font-bold">Aplicar</button>
                  </div>
                  <p id="couponMessage" class="text-xs mt-1"></p>
                </div>
                <div class="space-y-2">
                    <div class="flex justify-between items-center">
                        <span class="text-md text-gray-600">Subtotal:</span>
                        <span id="cartSubtotal" class="text-md text-gray-800">R$ 0,00</span>
                    </div>

                    <div id="discountContainer" class="hidden flex justify-between items-center text-green-600">
                      <span class="text-md font-semibold">Desconto:</span>
                      <span id="discountAmount" class="text-md font-semibold">- R$ 0,00</span>
                    </div>
                    <div id="deliveryFeeContainer" class="hidden flex justify-between items-center">
                        <span class="text-md text-gray-600">Taxa de Entrega:</span>
                        <span id="cartDeliveryFee" class="text-md text-gray-800">R$ 8,00</span>
                    </div>
                    <div class="flex justify-between items-center border-t pt-2 mt-2">
                        <span class="text-lg font-bold text-gray-800">Total:</span>
                        <span id="cartTotal" class="text-2xl font-bold text-red-700">R$ 0,00</span>
                    </div>
                </div>
              <button id="checkoutButton" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg text-lg transition-transform duration-100 active:scale-95 flex items-center justify-center gap-2 mt-4" disabled>
                  <i class="fab fa-whatsapp"></i> Concluir Pedido
              </button>
            </div>
        </div>
      </div>
    </div>
  </main>
  
  <div id="checkoutModal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 modal-enter">
      <div class="bg-white rounded-lg shadow-2xl p-6 md:p-8 w-full max-w-md">
          <h2 class="text-2xl font-bold text-gray-800 mb-4 text-center">Quase lÃ¡! Faltam seus dados...</h2>
          <p class="text-center text-gray-600 mb-6">Preencha abaixo para a gente saber onde entregar essa delÃ­cia.</p>
          <form id="customerInfoForm">
              <div class="mb-4">
                  <label for="customerName" class="block text-gray-700 text-sm font-bold mb-2">Nome Completo:</label>
                  <input type="text" id="customerName" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-red-500" required>
              </div>
              <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
                  <div>
                      <label for="customerAddress" class="block text-gray-700 text-sm font-bold mb-2">EndereÃ§o (Rua e NÂº):</label>
                      <input type="text" id="customerAddress" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-red-500" required>
                  </div>
                  <div>
                      <label for="customerNeighborhood" class="block text-gray-700 text-sm font-bold mb-2">Bairro:</label>
                      <input type="text" id="customerNeighborhood" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-red-500" required>
                  </div>
              </div>
              <div class="mb-4">
                  <label for="customerObs" class="block text-gray-700 text-sm font-bold mb-2">ObservaÃ§Ãµes (opcional):</label>
                  <textarea id="customerObs" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-red-500" rows="2" placeholder="Ex: sem cebola, ponto da carne, etc."></textarea>
              </div>
              <div class="border p-3 rounded-lg mb-6">
                <p class="block text-gray-700 text-sm font-bold mb-2">SachÃªs (Cortesia)</p>
                <div class="flex items-center justify-around">
                    <div>
                        <label for="ketchupQty" class="text-sm">Ketchup:</label>
                        <input type="number" id="ketchupQty" min="0" max="10" value="0" class="w-16 text-center border rounded">
                    </div>
                    <div>
                        <label for="mustardQty" class="text-sm">Mostarda:</label>
                        <input type="number" id="mustardQty" min="0" max="10" value="0" class="w-16 text-center border rounded">
                    </div>
                </div>
              </div>
              <div class="mb-6">
                  <label for="paymentMethod" class="block text-gray-700 text-sm font-bold mb-2">Forma de Pagamento:</label>
                  <select id="paymentMethod" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-red-500" required>
                      <option value="" disabled selected>Selecione uma opÃ§Ã£o</option>
                      <option value="Vale RefeiÃ§Ã£o/AlimentaÃ§Ã£o">Vale RefeiÃ§Ã£o/AlimentaÃ§Ã£o</option>
                      <option value="PIX">PIX</option>
                      <option value="CartÃ£o de CrÃ©dito">CartÃ£o de CrÃ©dito</option>
                      <option value="CartÃ£o de DÃ©bito">CartÃ£o de DÃ©bito</option>
                      <option value="Dinheiro">Dinheiro</option>
                  </select>
              </div>
              <div class="text-center mb-4 text-sm text-gray-500">
                  <p>ApÃ³s enviar, seu pedido serÃ¡ confirmado pelo WhatsApp.</p>
              </div>
              <div class="flex items-center justify-between gap-4">
                  <button type="button" id="cancelButton" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-transform duration-100 active:scale-95 w-1/2">
                      Cancelar
                  </button>
                  <button type="submit" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-transform duration-100 active:scale-95 w-1/2">
                      Confirmar e Enviar
                  </button>
              </div>
          </form>
      </div>
  </div>

  <div id="promoModal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 modal-enter">
    <div class="bg-white rounded-lg shadow-2xl p-6 md:p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto custom-scroll">
        <h2 id="promoModalTitle" class="text-2xl font-bold text-gray-800 mb-4 text-center">Personalize sua PromoÃ§Ã£o</h2>
        <form id="promoForm">
            <div id="promoSelectionContainer" class="space-y-6">
            </div>
            <div class="flex items-center justify-between gap-4 mt-8">
                <button type="button" id="cancelPromo" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-transform duration-100 active:scale-95 w-1/2">
                    Cancelar
                </button>
                <button type="submit" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-transform duration-100 active:scale-95 w-1/2">
                    Adicionar ao Pedido
                </button>
            </div>
        </form>
    </div>
  </div>
  
  <div id="massaModal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 modal-enter">
    <div class="bg-white rounded-lg shadow-2xl p-6 md:p-8 w-full max-w-xl max-h-[90vh] overflow-y-auto custom-scroll">
        <h2 id="massaModalTitle" class="text-2xl font-bold text-gray-800 mb-4 text-center">Monte sua Massa</h2>
        <form id="massaForm">
            <div id="massaSelectionContainer" class="space-y-6">
                   </div>
            <p class="text-xl font-bold text-red-700 text-center mt-6">Total do Prato: R$ <span id="massaTotal">0,00</span></p>
            <div class="flex items-center justify-between gap-4 mt-8">
                <button type="button" id="cancelMassa" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-transform duration-100 active:scale-95 w-1/2">
                    Cancelar
                </button>
                <button type="submit" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-transform duration-100 active:scale-95 w-1/2">
                    Adicionar ao Pedido
                </button>
            </div>
        </form>
    </div>
  </div>

  <div id="esfihaComboModal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 modal-enter">
    <div class="bg-white rounded-lg shadow-2xl p-6 md:p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto custom-scroll">
        <h2 id="esfihaComboModalTitle" class="text-2xl font-bold text-gray-800 mb-4 text-center">Monte seu Combo de Esfihas</h2>
        <form id="esfihaComboForm">
            <div id="esfihaComboSelectionContainer" class="space-y-4">
            </div>
            <div id="esfihaComboSodaContainer" class="mt-6 space-y-4">
            </div>
            <div class="mt-4 p-3 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 rounded-lg">
                <p>Selecionadas: <span id="esfihaCounter">0</span> de <span id="esfihaTotalQty">0</span></p>
            </div>
             <p id="esfihaWarning" class="text-red-600 text-sm mt-2 hidden"></p>
             <p class="text-xl font-bold text-red-700 text-center mt-6">Total do Combo: R$ <span id="esfihaComboTotal">0,00</span></p>
            <div class="flex items-center justify-between gap-4 mt-8">
                <button type="button" id="cancelEsfihaCombo" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-transform duration-100 active:scale-95 w-1/2">
                    Cancelar
                </button>
                <button type="submit" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-transform duration-100 active:scale-95 w-1/2">
                    Adicionar ao Pedido
                </button>
            </div>
        </form>
    </div>
  </div>

  <button id="floatingCartButton" class="hidden fixed bottom-4 right-4 bg-green-600 text-white py-3 px-5 rounded-full shadow-lg z-40 transition-transform duration-300 hover:bg-green-700 active:scale-95">
    <i class="fas fa-shopping-cart mr-2"></i>
    <span>Ver Pedido</span>
    <span id="floatingCartTotal" class="ml-2 font-bold">R$ 0,00</span>
  </button>

  <footer class="bg-red-800 text-yellow-100 p-6 mt-12">
    <div class="max-w-7xl mx-auto text-center">
        <div class="flex justify-center items-center gap-4 mb-4">
            <img src="https://i.imgur.com/83S4Y7g.png" alt="Sodexo" class="h-8">
            <img src="https://i.imgur.com/kM3T1fS.png" alt="VR BenefÃ­cios" class="h-10">
        </div>
        <p class="font-semibold">Super Pizza &copy; 2025</p>
        <p class="text-sm italic mt-2">"O Senhor Ã© o meu pastor e nada me faltarÃ¡"</p>
    </div>
  </footer>

<script>
document.addEventListener('DOMContentLoaded', () => {

Â  Â  // BANCO DE DADOS E CUPONS
Â  Â  const data = {
Â  Â  Â  Â  refrigerantesPromo: [
Â  Â  Â  Â  Â  Â  { nome: 'GuaranÃ¡ Antarctica 1.5L (GrÃ¡tis)', precoAdicional: 0 }, { nome: 'Kuat 2L (GrÃ¡tis)', precoAdicional: 0 }, { nome: 'Pepsi 1.5L (GrÃ¡tis)', precoAdicional: 0 }, { nome: 'Coca-Cola 2L', precoAdicional: 12.00 }, { nome: 'Pepsi 2L', precoAdicional: 5.00 }, { nome: 'GuaranÃ¡ Antarctica 2L', precoAdicional: 5.00 }
Â  Â  Â  Â  ],
Â  Â  Â  Â  massaSizes: [
Â  Â  Â  Â  Â  Â  { nome: '400gr (serve 1 pessoa)', preco: 34.90 },
Â  Â  Â  Â  Â  Â  { nome: '1kg (serve atÃ© 3 pessoas)', preco: 59.90 }
Â  Â  Â  Â  ],
Â  Â  Â  Â  proteinasMassas: [
Â  Â  Â  Â  Â  Â  { nome: 'Presunto', precoAdicional: 0 }, { nome: 'Carne MoÃ­da', precoAdicional: 0 }, { nome: 'Frango', precoAdicional: 0 }, { nome: 'Carne Seca', precoAdicional: 10.00 }, { nome: 'CamarÃ£o', precoAdicional: 10.00 }, { nome: 'Bacalhau', precoAdicional: 10.00 }
Â  Â  Â  Â  ],
Â  Â  Â  Â  promocoes: [
Â  Â  Â  Â  Â  Â  { id: 'promo-combo-caixa', nome: 'Caixa Combo da Galera', desc: 'A festa completa! Uma caixa recheada com 4 X-Tudo, 5 pastÃ©is sequinhos e uma porÃ§Ã£o generosa de batata com cheddar e bacon.', preco: 90.00, preco_antigo: 120.00, needsFlavor: false, includesSoda: true },
Â  Â  Â  Â  Â  Â  { id: 'promo-media', nome: 'Pizza MÃ©dia (32cm) Premiada', desc: 'Sua pizza mÃ©dia preferida com aquele precinho especial que sÃ³ a gente faz. Escolha seus sabores e aproveite!', preco: 52.00, preco_antigo: 60.00, needsFlavor: true, pizzas: [{ type: 'salgada', size: 'MÃ©dia', maxSabores: 2 }] },
Â  Â  Â  Â  Â  Â  { id: 'promo-familia', nome: 'Combo FamÃ­lia Feliz', desc: 'A combinaÃ§Ã£o perfeita para a famÃ­lia: 1 Pizza FamÃ­lia (atÃ© 2 sabores), 1 pizza doce individual de brinde e 1 refrigerante para completar a festa.', preco: 90.00, needsFlavor: true, pizzas: [{ type: 'salgada', size: 'FamÃ­lia', maxSabores: 2 }], includesSweet: true, includesSoda: true },
Â  Â  Â  Â  Â  Â  { id: 'promo-gigante', nome: 'Combo Gigante ImbatÃ­vel', desc: 'Para matar a fome de verdade! 1 Pizza Gigante (atÃ© 3 sabores), 1 pizza doce individual de brinde e 1 refrigerante geladinho.', preco: 110.00, preco_antigo: 120.00, needsFlavor: true, pizzas: [{ type: 'salgada', size: 'Gigante', maxSabores: 3 }], includesSweet: true, includesSoda: true },
Â  Â  Â  Â  Â  Â  { id: 'promo-slim', nome: 'Promo Slim Gigante (47 cm)', desc: 'Sabor em tamanho gigante com um desconto incrÃ­vel. Leve nossa pizza de 47cm e faÃ§a a festa em casa!', preco: 85.00, preco_antigo: 100.00, needsFlavor: true, pizzas: [{ type: 'salgada', size: 'Gigante', maxSabores: 3 }] },
Â  Â  Â  Â  Â  Â  { id: 'promo-2medias', nome: 'Dose Dupla: 2 MÃ©dias + 1 Doce', desc: 'Duas vezes mais sabor! PeÃ§a 2 Pizzas MÃ©dias (atÃ© 2 sabores cada) e ganhe uma deliciosa pizza brotÃ£o doce para a sobremesa.', preco: 100.00, needsFlavor: true, pizzas: [{ type: 'salgada', size: 'MÃ©dia 1', maxSabores: 2 }, { type: 'salgada', size: 'MÃ©dia 2', maxSabores: 2 }], includesSweet: true }
Â  Â  Â  Â  ],
Â  Â  Â  Â  pizzas: {
Â  Â  Â  Â  Â  Â  tamanhos: [Â 
Â  Â  Â  Â  Â  Â  Â  Â  { nome: 'Individual (26cm)', preco: 30.00, maxSabores: 2, sodasInclusas: 0 },Â 
Â  Â  Â  Â  Â  Â  Â  Â  { nome: 'MÃ©dia (32cm)', preco: 50.00, maxSabores: 2, sodasInclusas: 0 },Â 
Â  Â  Â  Â  Â  Â  Â  Â  { nome: 'FamÃ­lia (36cm)', preco: 75.00, maxSabores: 2, sodasInclusas: 1 },Â 
Â  Â  Â  Â  Â  Â  Â  Â  { nome: 'Gigante (47cm)', preco: 90.00, maxSabores: 3, sodasInclusas: 1 },Â 
Â  Â  Â  Â  Â  Â  Â  Â  { nome: 'Mega (70cm)', preco: 199.00, maxSabores: 5, sodasInclusas: 2 }Â 
Â  Â  Â  Â  Â  Â  ],
Â  Â  Â  Â  Â  Â  bordas: [Â 
Â  Â  Â  Â  Â  Â  Â  Â  { nome: 'Sem Borda Recheada', precoPadrao: 0.00, precoMega: 0.00, precoMedia: 0.00, precoIndividual: 0.00 },Â 
Â  Â  Â  Â  Â  Â  Â  Â  { nome: 'Catupiry', precoPadrao: 10.00, precoMega: 15.00, precoMedia: 7.00, precoIndividual: 5.00 },Â 
Â  Â  Â  Â  Â  Â  Â  Â  { nome: 'Cheddar', precoPadrao: 10.00, precoMega: 15.00, precoMedia: 7.00, precoIndividual: 5.00 },Â 
Â  Â  Â  Â  Â  Â  Â  Â  { nome: 'Cream Cheese', precoPadrao: 12.00, precoMega: 17.00, precoMedia: 9.00, precoIndividual: 7.00 },Â 
Â  Â  Â  Â  Â  Â  Â  Â  { nome: 'Goiabada', precoPadrao: 12.00, precoMega: 17.00, precoMedia: 9.00, precoIndividual: 7.00 },Â 
Â  Â  Â  Â  Â  Â  Â  Â  { nome: 'Doce de Leite', precoPadrao: 12.00, precoMega: 17.00, precoMedia: 9.00, precoIndividual: 7.00 }Â 
Â  Â  Â  Â  Â  Â  ],
Â  Â  Â  Â  Â  Â  saboresSalgados: [ "Americana", "Atum", "Alho e Ã“leo", "Bacalhau", "Benevento", "Calabresa", "Carioca", "Capricciosa", "Frango com Catupiry", "Frango com Cheddar", "La Pizza", "Marguerita", "Moda da Casa", "Mussarela", "Moda da Casa 2", "Napolitana", "Palmito", "Pizza de Batata", "Portuguesa", "4 Queijos", "Super Pizza", "Siciliana", "Tomate Seco", "Tropicaliente", "Lombo Canadense", "Presunto", "Salaminho" ],
Â  Â  Â  Â  Â  Â  saboresDoces: [ "Banana com Canela", "Cocada Cremosa", "PrestÃ­gio", "Romeu & Julieta" ]
Â  Â  Â  Â  },
Â  Â  Â  Â  massas: [ { nome: 'Lasanha' }, { nome: 'Capeletti' }, { nome: 'Raviolli' }, { nome: 'Espaguete' }, { nome: 'Talharim' }, { nome: 'Nhoque' } ],
Â  Â  Â  Â  hamburgueres: [
Â  Â  Â  Â  Â  Â  { nome: 'X-Duplo', desc: 'Pra quem tem fome de leÃ£o! Duas carnes suculentas, dois ovos no ponto, queijo derretido, presunto, bacon crocante, calabresa, salada fresca e nosso irresistÃ­vel molho Billy Jack.', preco: 17.00 },
Â  Â  Â  Â  Â  Â  { nome: 'X-Tudo', desc: 'O campeÃ£o de vendas! Uma carne de hambÃºrguer suculenta, ovo, queijo, presunto, bacon, calabresa e uma explosÃ£o de sabor com nosso molho Billy Jack e salada.', preco: 14.00 },
Â  Â  Â  Â  Â  Â  { nome: 'X-Burguer Tropicaliente', desc: 'Um toque tropical no seu burguer! Carne, queijo, presunto, bacon, calabresa, e a combinaÃ§Ã£o perfeita de molho Billy Jack e batata palha.', preco: 12.00 },
Â  Â  Â  Â  Â  Â  { nome: 'X-Egg', desc: 'Aquele clÃ¡ssico que nÃ£o tem erro: carne de primeira, queijo derretido e um ovo frito no capricho, com salada e molho Billy Jack.', preco: 10.00 },
Â  Â  Â  Â  Â  Â  { nome: 'X-Burguer Kids', desc: 'O tamanho ideal para a fome dos pequenos! PÃ£o macio, carne saborosa, queijo, molho Billy Jack e batata palha pra completar a festa.', preco: 5.00 },
Â  Â  Â  Â  Â  Â  { nome: 'X-Burguer Double Cheese', desc: 'Queijo em dobro, sabor em dobro! Uma carne suculenta, presunto, e uma avalanche de queijo catupiry e cheddar. Um sonho!', preco: 11.00 },
Â  Â  Â  Â  Â  Â  { nome: 'X-Bacon Lover', desc: 'AtenÃ§Ã£o, viciados em bacon! PÃ£o, carne, queijo e o dobro de bacon crocante e delicioso. Simplesmente imperdÃ­vel.', preco: 11.00 }
Â  Â  Â  Â  ],
Â  Â  Â  Â  esfihas: {
Â  Â  Â  Â  Â  Â  saboresComPreco: [ { nome: 'Carne ğŸ¥©', preco: 3.50, precoAdicional: 0 }, { nome: 'Queijo ğŸ§€', preco: 3.50, precoAdicional: 0 }, { nome: 'Calabresa', preco: 3.50, precoAdicional: 0 }, { nome: 'Presunto', preco: 3.50, precoAdicional: 0.50 }, { nome: 'Milho Verde ğŸŒ½', preco: 3.50, precoAdicional: 0.50 }, { nome: 'Atum', preco: 4.00, precoAdicional: 1.00 }, { nome: 'Mista', preco: 4.00, precoAdicional: 1.00 }, { nome: 'Frango com Catupiry', preco: 4.50, precoAdicional: 1.50 }, { nome: 'Calabresa com Catupiry', preco: 4.50, precoAdicional: 1.50 }, { nome: 'Quatro Queijos ğŸ§€ğŸ§€ğŸ§€ğŸ§€', preco: 4.50, precoAdicional: 1.50 }, { nome: 'Tomate Seco ğŸ…', preco: 4.50, precoAdicional: 1.50 }, { nome: 'Portuguesa', preco: 4.50, precoAdicional: 1.50 }, { nome: 'Carne Seca', preco: 5.00, precoAdicional: 2.00 }, { nome: 'Bacalhau com Catupiry', preco: 5.00, precoAdicional: 2.00 }, { nome: 'Romeu & Julieta â¤ï¸ğŸ§€', preco: 3.50, precoAdicional: 0.50 }, { nome: 'Banana c/ Canela ğŸŒ', preco: 3.50, precoAdicional: 0.50 }, { nome: 'Choco Duo ğŸ«', preco: 4.00, precoAdicional: 1.00 }, { nome: 'PrestÃ­gio ğŸ¥¥ğŸ«', preco: 4.00, precoAdicional: 1.00 }, { nome: 'Morango com Chocolate Branco ğŸ“', preco: 4.50, precoAdicional: 1.50 }, { nome: 'Nutella ğŸ˜', preco: 5.00, precoAdicional: 2.00 } ],
Â  Â  Â  Â  Â  Â  combos: [
Â  Â  Â  Â  Â  Â  Â  Â  { id: 'esfiha-combo-20', nome: 'Combo 20 Esfihas + Refri 2L ğŸ¥¤', desc: 'Monte seu combo com 20 esfihas e escolha os sabores que mais gosta!', preco: 50.00, quantidade: 20, includesSoda: true, isCustomizable: true },
Â  Â  Â  Â  Â  Â  Â  Â  { id: 'esfiha-combo-15', nome: 'Combo 15 Esfihas', desc: 'Escolha 15 esfihas do seu jeito e aproveite nosso preÃ§o promocional!', preco: 40.00, quantidade: 15, isCustomizable: true },
Â  Â  Â  Â  Â  Â  Â  Â  { id: 'esfiha-combo-30', nome: 'Combo 30 Esfihas', desc: 'Perfeito para a galera! Monte seu combo com 30 esfihas com seus sabores preferidos.', preco: 70.00, quantidade: 30, isCustomizable: true }
Â  Â  Â  Â  Â  Â  ]
Â  Â  Â  Â  },
Â  Â  Â  Â  combos: [
Â  Â  Â  Â  Â  Â  { nome: 'Combo 1', desc: '4 X-Tudo + 25 salgadinhos + Batata com Cheddar e Bacon', preco: 85.00, includesSoda: true },
Â  Â  Â  Â  Â  Â  { nome: 'Combo 2', desc: '100 Salgadinhos fritos grandes e sortidos', preco: 70.00 },
Â  Â  Â  Â  Â  Â  { nome: 'Combo 3', desc: '25 Salgadinhos + PorÃ§Ã£o de Calabresa + Batata com Cheddar', preco: 85.00, includesSoda: true },
Â  Â  Â  Â  Â  Â  { nome: 'Combo 4', desc: '4 X-Tudo + 25 Salgadinhos + Calabresa + AnÃ©is de Cebola', preco: 85.00, includesSoda: true },
Â  Â  Â  Â  Â  Â  { nome: 'Combo 5', desc: '4 X-Tudo + 25 Salgadinhos + Batata com Cheddar e Bacon', preco: 85.00, includesSoda: true },
Â  Â  Â  Â  Â  Â  { nome: 'Combo 6', desc: '4 X-Tudo + Calabresa Acebolada + Batata Frita + AnÃ©is de Cebola', preco: 85.00, includesSoda: true },
Â  Â  Â  Â  Â  Â  { nome: 'Petisco Frango a Passarinho + Fritas', desc: 'PedaÃ§os de frango crocantes com batata frita sequinha. Inclui um refrigerante!', preco: 60.00, includesSoda: true }
Â  Â  Â  Â  ],
Â  Â  Â  Â  bebidas: [ { nome: 'Refrigerante Lata 350ml ğŸ¥¤', desc: 'Geladinho para acompanhar seu pedido. Escolha seu sabor preferido!', preco: 5.00 }, { nome: 'Refrigerante 2 Litros ğŸ¥¤', desc: 'Para dividir com a galera! O acompanhamento perfeito para qualquer pizza ou combo.', preco: 12.00 } ]
Â  Â  };

Â  Â  const validCoupons = {
Â  Â  Â  Â  "APPSUPERPIZZA": { type: "percentage", value: 10 } // 10% de desconto
Â  Â  };

Â  Â  // VARIÃVEIS GLOBAIS
Â  Â  let cart = [];
Â  Â  let appliedCoupon = null;

Â  Â  // ELEMENTOS DO DOM
Â  Â  const cartItemsContainer = document.getElementById('cartItems');
Â  Â  const cartSubtotalEl = document.getElementById('cartSubtotal');
Â  Â  const deliveryFeeContainer = document.getElementById('deliveryFeeContainer');
Â  Â  const cartDeliveryFeeEl = document.getElementById('cartDeliveryFee');
Â  Â  const cartTotalEl = document.getElementById('cartTotal');
Â  Â  const floatingCartButton = document.getElementById('floatingCartButton');
Â  Â  const floatingCartTotal = document.getElementById('floatingCartTotal');
Â  Â  const checkoutButton = document.getElementById('checkoutButton');
Â  Â  const checkoutModal = document.getElementById('checkoutModal');
Â  Â  const customerInfoForm = document.getElementById('customerInfoForm');
Â  Â  const cancelButton = document.getElementById('cancelButton');
Â  Â  const promoModal = document.getElementById('promoModal');
Â  Â  const promoForm = document.getElementById('promoForm');
Â  Â  const cancelPromo = document.getElementById('cancelPromo');
Â  Â  const massaModal = document.getElementById('massaModal');
Â  Â  const massaForm = document.getElementById('massaForm');
Â  Â  const cancelMassa = document.getElementById('cancelMassa');
Â  Â  const esfihaComboModal = document.getElementById('esfihaComboModal');
Â  Â  const esfihaComboForm = document.getElementById('esfihaComboForm');
Â  Â  const cancelEsfihaCombo = document.getElementById('cancelEsfihaCombo');
Â  Â  const couponInput = document.getElementById('couponInput');
Â  Â  const applyCouponBtn = document.getElementById('applyCouponBtn');
Â  Â  const couponMessage = document.getElementById('couponMessage');
Â  Â  const discountContainer = document.getElementById('discountContainer');
Â  Â  const discountAmountEl = document.getElementById('discountAmount');

Â  Â  // FUNÃ‡Ã•ES
Â  Â  function formatCurrency(value) { return value.toFixed(2).replace('.', ','); }

Â  Â  function updateCart() {
Â  Â  Â  Â  cartItemsContainer.innerHTML = '';
Â  Â  Â  Â  const subtotal = cart.reduce((sum, cartItem) => sum + (cartItem.product.preco * cartItem.quantity), 0);
Â  Â  Â  Â  let deliveryFee = 0;
Â  Â  Â  Â  let discount = 0;

Â  Â  Â  Â  // Calcula desconto
Â  Â  Â  Â  if (appliedCoupon && subtotal > 0) {
Â  Â  Â  Â  Â  Â  if (appliedCoupon.type === 'percentage') {
Â  Â  Â  Â  Â  Â  Â  Â  discount = subtotal * (appliedCoupon.value / 100);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  discountContainer.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  discountAmountEl.textContent = `- R$ ${formatCurrency(discount)}`;
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  discountContainer.classList.add('hidden');
Â  Â  Â  Â  }

Â  Â  Â  Â  // Calcula taxa de entrega
Â  Â  Â  Â  const totalAfterDiscount = subtotal - discount;
Â  Â  Â  Â  if (totalAfterDiscount > 0 && totalAfterDiscount < 35.00) {
Â  Â  Â  Â  Â  Â  deliveryFee = 8.00;
Â  Â  Â  Â  Â  Â  deliveryFeeContainer.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  cartDeliveryFeeEl.textContent = `R$ ${formatCurrency(deliveryFee)}`;
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  deliveryFeeContainer.classList.add('hidden');
Â  Â  Â  Â  }

Â  Â  Â  Â  const finalTotal = totalAfterDiscount + deliveryFee;

Â  Â  Â  Â  if (cart.length === 0) {
Â  Â  Â  Â  Â  Â  cartItemsContainer.innerHTML = '<p id="emptyCart" class="text-gray-500 text-center py-8">Seu carrinho estÃ¡ vazio.</p>';
Â  Â  Â  Â  Â  Â  checkoutButton.disabled = true;
Â  Â  Â  Â  Â  Â  checkoutButton.classList.add('opacity-50', 'cursor-not-allowed');
Â  Â  Â  Â  Â  Â  floatingCartButton.classList.add('hidden');
Â  Â  Â  Â  Â  Â  // Reseta cupom se o carrinho estiver vazio
Â  Â  Â  Â  Â  Â  appliedCoupon = null;
Â  Â  Â  Â  Â  Â  couponInput.value = '';
Â  Â  Â  Â  Â  Â  couponMessage.textContent = '';
Â  Â  Â  Â  Â  Â  couponInput.classList.remove('border-green-500', 'border-red-500');
Â  Â  Â  Â  Â  Â  discountContainer.classList.add('hidden');
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  cart.forEach((cartItem, index) => {
Â  Â  Â  Â  Â  Â  Â  Â  const itemEl = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  itemEl.className = 'flex justify-between items-center mb-3 p-2 bg-gray-50 rounded cart-item-enter';
Â  Â  Â  Â  Â  Â  Â  Â  itemEl.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex-grow pr-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold text-gray-800">${cartItem.product.nome}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${cartItem.product.desc ? `<p class="text-xs text-gray-600">${cartItem.product.desc}</p>` : ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2 border rounded-md p-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="qty-change-btn text-red-500" data-index="${index}" data-action="decrease"><i class="fas fa-minus-circle"></i></button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-bold w-5 text-center">${cartItem.quantity}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="qty-change-btn text-green-500" data-index="${index}" data-action="increase"><i class="fas fa-plus-circle"></i></button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-semibold text-gray-700 w-20 text-right">R$ ${formatCurrency(cartItem.product.preco * cartItem.quantity)}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>`;
Â  Â  Â  Â  Â  Â  Â  Â  cartItemsContainer.appendChild(itemEl);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  checkoutButton.disabled = false;
Â  Â  Â  Â  Â  Â  checkoutButton.classList.remove('opacity-50', 'cursor-not-allowed');
Â  Â  Â  Â  Â  Â  floatingCartButton.classList.remove('hidden');
Â  Â  Â  Â  }

Â  Â  Â  Â  cartSubtotalEl.textContent = `R$ ${formatCurrency(subtotal)}`;
Â  Â  Â  Â  cartTotalEl.textContent = `R$ ${formatCurrency(finalTotal)}`;
Â  Â  Â  Â  floatingCartTotal.textContent = `R$ ${formatCurrency(finalTotal)}`;
Â  Â  Â  Â Â 
Â  Â  Â  Â  document.querySelectorAll('.qty-change-btn').forEach(button => {
Â  Â  Â  Â  Â  Â  button.addEventListener('click', (e) => {
Â  Â  Â  Â  Â  Â  Â  Â  const index = parseInt(e.currentTarget.dataset.index);
Â  Â  Â  Â  Â  Â  Â  Â  const action = e.currentTarget.dataset.action;
Â  Â  Â  Â  Â  Â  Â  Â  if (action === 'increase') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cart[index].quantity++;
Â  Â  Â  Â  Â  Â  Â  Â  } else if (action === 'decrease') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cart[index].quantity--;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (cart[index].quantity === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cart.splice(index, 1);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  updateCart();
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  });
Â  Â  }

Â  Â  function applyCoupon() {
Â  Â  Â  Â  const code = couponInput.value.toUpperCase();
Â  Â  Â  Â  if (validCoupons[code]) {
Â  Â  Â  Â  Â  Â  appliedCoupon = { ...validCoupons[code], code: code };
Â  Â  Â  Â  Â  Â  couponMessage.textContent = 'Cupom de 10% aplicado com sucesso!';
Â  Â  Â  Â  Â  Â  couponMessage.classList.remove('text-red-500');
Â  Â  Â  Â  Â  Â  couponMessage.classList.add('text-green-600');
Â  Â  Â  Â  Â  Â  couponInput.classList.add('border-green-500');
Â  Â  Â  Â  Â  Â  couponInput.classList.remove('border-red-500');
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  appliedCoupon = null;
Â  Â  Â  Â  Â  Â  couponMessage.textContent = 'Cupom invÃ¡lido.';
Â  Â  Â  Â  Â  Â  couponMessage.classList.add('text-red-500');
Â  Â  Â  Â  Â  Â  couponMessage.classList.remove('text-green-600');
Â  Â  Â  Â  Â  Â  couponInput.classList.add('border-red-500');
Â  Â  Â  Â  Â  Â  couponInput.classList.remove('border-green-500');
Â  Â  Â  Â  }
Â  Â  Â  Â  updateCart();
Â  Â  }

Â  Â  function addToCart(item) {
Â  Â  Â  Â  const itemIdentifier = item.nome + (item.desc || '');
Â  Â  Â  Â  const existingItem = cart.find(cartItem => cartItem.id === itemIdentifier);

Â  Â  Â  Â  if (existingItem) {
Â  Â  Â  Â  Â  Â  existingItem.quantity++;
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  cart.push({ product: item, quantity: 1, id: itemIdentifier });
Â  Â  Â  Â  }
Â  Â  Â  Â  updateCart();
Â  Â  }
Â  Â Â 
Â  Â  const tabs = document.querySelectorAll('.tab-button');
Â  Â  const tabContents = document.querySelectorAll('.tab-content');
Â  Â  tabs.forEach(tab => {
Â  Â  Â  Â  tab.addEventListener('click', (e) => {
Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  tabs.forEach(t => t.classList.remove('tab-active'));
Â  Â  Â  Â  Â  Â  tab.classList.add('tab-active');
Â  Â  Â  Â  Â  Â  const target = document.getElementById(tab.dataset.tab);
Â  Â  Â  Â  Â  Â  tabContents.forEach(content => content.classList.add('hidden'));
Â  Â  Â  Â  Â  Â  target.classList.remove('hidden');
Â  Â  Â  Â  });
Â  Â  });

Â  Â  const pizzaSizesEl = document.getElementById('pizzaSizes');
Â  Â  const bordaRecheadaEl = document.getElementById('bordaRecheada');
Â  Â  const flavorsAccordion = document.getElementById('flavorsAccordion');
Â  Â  const flavorWarningEl = document.getElementById('flavorWarning');
Â  Â  const summarySizeEl = document.getElementById('summarySize');
Â  Â  const summaryBordaEl = document.getElementById('summaryBorda');
Â  Â  const summarySodaContainer = document.getElementById('summarySodaContainer');
Â  Â  const summarySoda = document.getElementById('summarySoda');
Â  Â  const summaryFlavorsEl = document.getElementById('summaryFlavors');
Â  Â  const pizzaTotalEl = document.getElementById('pizzaTotal');
Â  Â  const buildPizzaForm = document.getElementById('buildPizzaForm');
Â  Â  const sodaSelectionContainer = document.getElementById('sodaSelectionContainer');

Â  Â  function updateBordaOptions() {
Â  Â  Â  Â  if (!pizzaSizesEl.value) return;
Â  Â  Â  Â  const selectedSize = data.pizzas.tamanhos[pizzaSizesEl.value];
Â  Â  Â  Â  bordaRecheadaEl.innerHTML = '';
Â  Â  Â  Â  data.pizzas.bordas.forEach((borda, index) => {
Â  Â  Â  Â  Â  Â  let currentPrice = borda.precoPadrao;
Â  Â  Â  Â  Â  Â  if (selectedSize.nome.includes('Mega')) {
Â  Â  Â  Â  Â  Â  Â  Â  currentPrice = borda.precoMega;
Â  Â  Â  Â  Â  Â  } else if (selectedSize.nome.includes('MÃ©dia')) {
Â  Â  Â  Â  Â  Â  Â  Â  currentPrice = borda.precoMedia;
Â  Â  Â  Â  Â  Â  } else if (selectedSize.nome.includes('Individual')) {
Â  Â  Â  Â  Â  Â  Â  Â  currentPrice = borda.precoIndividual;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  const priceText = currentPrice > 0 ? `+ R$ ${formatCurrency(currentPrice)}` : '';
Â  Â  Â  Â  Â  Â  bordaRecheadaEl.innerHTML += `<option value="${index}">${borda.nome} ${priceText}</option>`;
Â  Â  Â  Â  });
Â  Â  }

Â  Â  function renderSodaSelection() {
Â  Â  Â  Â  if (!pizzaSizesEl.value) return;
Â  Â  Â  Â  const selectedSize = data.pizzas.tamanhos[pizzaSizesEl.value];
Â  Â  Â  Â  sodaSelectionContainer.innerHTML = '';Â 
Â  Â  Â  Â  if (!selectedSize.sodasInclusas || selectedSize.sodasInclusas === 0) {
Â  Â  Â  Â  Â  Â  updatePizzaSummary();
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  for (let i = 1; i <= selectedSize.sodasInclusas; i++) {
Â  Â  Â  Â  Â  Â  let sodaHtml = `<div class="mb-4"><label class="block font-semibold mb-2 text-gray-700">Escolha seu ${i}Âº Refrigerante:</label><select name="pizza-soda" class="pizza-soda-select w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500">`;
Â  Â  Â  Â  Â  Â  data.refrigerantesPromo.forEach(soda => {
Â  Â  Â  Â  Â  Â  Â  Â  const priceText = soda.precoAdicional > 0 ? ` (+ R$ ${formatCurrency(soda.precoAdicional)})` : '';
Â  Â  Â  Â  Â  Â  Â  Â  sodaHtml += `<option value="${soda.nome}" data-price="${soda.precoAdicional}">${soda.nome}${priceText}</option>`;
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  sodaHtml += `</select></div>`;
Â  Â  Â  Â  Â  Â  sodaSelectionContainer.innerHTML += sodaHtml;
Â  Â  Â  Â  }

Â  Â  Â  Â  document.querySelectorAll('.pizza-soda-select').forEach(select => {
Â  Â  Â  Â  Â  Â  select.addEventListener('change', updatePizzaSummary);
Â  Â  Â  Â  });
Â  Â  Â  Â  updatePizzaSummary();
Â  Â  }

Â  Â  function populatePizzaOptions() {
Â  Â  Â  Â  if (!pizzaSizesEl) return;
Â  Â  Â  Â  pizzaSizesEl.innerHTML = '';Â 
Â  Â  Â  Â  flavorsAccordion.innerHTML = '';

Â  Â  Â  Â  data.pizzas.tamanhos.forEach((t, i) => {
Â  Â  Â  Â  Â  Â  pizzaSizesEl.innerHTML += `<option value="${i}">${t.nome} (atÃ© ${t.maxSabores} ${t.maxSabores > 1 ? 'sabores' : 'sabor'})</option>`;
Â  Â  Â  Â  });
Â  Â  Â  Â Â 
Â  Â  Â  Â  updateBordaOptions();

Â  Â  Â  Â  const allFlavors = {
Â  Â  Â  Â  Â  Â  "Sabores Salgados ğŸ•": data.pizzas.saboresSalgados,
Â  Â  Â  Â  Â  Â  "Sabores Doces ğŸ°": data.pizzas.saboresDoces
Â  Â  Â  Â  };

Â  Â  Â  Â  for (const category in allFlavors) {
Â  Â  Â  Â  Â  Â  let accordionHtml = `
Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" class="w-full flex justify-between items-center p-3 font-semibold text-left bg-gray-100 rounded-lg hover:bg-gray-200 focus:outline-none" onclick="this.nextElementSibling.classList.toggle('hidden')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>${category}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i class="fas fa-chevron-down transform transition-transform"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="hidden pt-2 pb-4 px-2 space-y-2 grid grid-cols-1 sm:grid-cols-2 gap-3 custom-scroll rounded border-gray-300 bg-gray-50 shadow-inner">`;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  allFlavors[category].sort().forEach(flavor => {
Â  Â  Â  Â  Â  Â  Â  Â  accordionHtml += `<label class="flex items-center p-2 rounded-md hover:bg-yellow-100 cursor-pointer"><input type="checkbox" class="flavor-checkbox h-4 w-4 rounded border-gray-300 text-red-600 focus:ring-red-500"><span class="ml-2 text-gray-700">${flavor}</span></label>`;
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  accordionHtml += `</div></div>`;
Â  Â  Â  Â  Â  Â  flavorsAccordion.innerHTML += accordionHtml;
Â  Â  Â  Â  }
Â  Â  }

Â  Â  function updatePizzaSummary() {
Â  Â  Â  Â  if (!buildPizzaForm) return;
Â  Â  Â  Â  const selectedSize = data.pizzas.tamanhos[pizzaSizesEl.value];
Â  Â  Â  Â  const selectedBorda = data.pizzas.bordas[bordaRecheadaEl.value];
Â  Â  Â  Â Â 
Â  Â  Â  Â  summarySizeEl.textContent = selectedSize.nome;
Â  Â  Â  Â  summaryBordaEl.textContent = selectedBorda.nome;
Â  Â  Â  Â Â 
Â  Â  Â  Â  let selectedFlavors = Array.from(document.querySelectorAll('#flavorsAccordion .flavor-checkbox:checked')).map(cb => cb.nextElementSibling.textContent);
Â  Â  Â  Â  if (selectedFlavors.length > selectedSize.maxSabores) {
Â  Â  Â  Â  Â  Â  flavorWarningEl.textContent = `Para este tamanho, vocÃª pode escolher no mÃ¡ximo ${selectedSize.maxSabores} ${selectedSize.maxSabores > 1 ? 'sabores' : 'sabor'}!`;
Â  Â  Â  Â  Â  Â  flavorWarningEl.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  const lastChecked = Array.from(document.querySelectorAll('#flavorsAccordion .flavor-checkbox:checked')).pop();
Â  Â  Â  Â  Â  Â  if (lastChecked) lastChecked.checked = false;
Â  Â  Â  Â  Â  Â  selectedFlavors = Array.from(document.querySelectorAll('#flavorsAccordion .flavor-checkbox:checked')).map(cb => cb.nextElementSibling.textContent);
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  flavorWarningEl.classList.add('hidden');
Â  Â  Â  Â  }
Â  Â  Â  Â  summaryFlavorsEl.innerHTML = selectedFlavors.length > 0 ? selectedFlavors.map(f => `<li>${f}</li>`).join('') : `<li>Selecione um sabor...</li>`;
Â  Â  Â  Â Â 
Â  Â  Â  Â  let total = selectedSize.preco;
Â  Â  Â  Â  let currentBordaPrice = selectedBorda.precoPadrao;
Â  Â  Â  Â  if (selectedSize.nome.includes('Mega')) {
Â  Â  Â  Â  Â  Â  currentBordaPrice = selectedBorda.precoMega;
Â  Â  Â  Â  } else if (selectedSize.nome.includes('MÃ©dia')) {
Â  Â  Â  Â  Â  Â  currentBordaPrice = selectedBorda.precoMedia;
Â  Â  Â  Â  } else if (selectedSize.nome.includes('Individual')) {
Â  Â  Â  Â  Â  Â  currentBordaPrice = selectedBorda.precoIndividual;
Â  Â  Â  Â  }
Â  Â  Â  Â  total += currentBordaPrice;

Â  Â  Â  Â  let sodaPrice = 0;
Â  Â  Â  Â  const selectedSodas = [];
Â  Â  Â  Â  document.querySelectorAll('.pizza-soda-select').forEach(select => {
Â  Â  Â  Â  Â  Â  const selectedOption = select.options[select.selectedIndex];
Â  Â  Â  Â  Â  Â  sodaPrice += parseFloat(selectedOption.dataset.price);
Â  Â  Â  Â  Â  Â  selectedSodas.push(selectedOption.value);
Â  Â  Â  Â  });

Â  Â  Â  Â  if (selectedSodas.length > 0) {
Â  Â  Â  Â  Â  Â  summarySodaContainer.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  summarySoda.textContent = selectedSodas.join(', ');
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  summarySodaContainer.classList.add('hidden');
Â  Â  Â  Â  }

Â  Â  Â  Â  total += sodaPrice;
Â  Â  Â  Â  pizzaTotalEl.textContent = formatCurrency(total);
Â  Â  }
Â  Â Â 
Â  Â  if (buildPizzaForm) {
Â  Â  Â  Â  buildPizzaForm.addEventListener('submit', (e) => {
Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  const selectedSize = data.pizzas.tamanhos[pizzaSizesEl.value];
Â  Â  Â  Â  Â  Â  const selectedBorda = data.pizzas.bordas[bordaRecheadaEl.value];
Â  Â  Â  Â  Â  Â  const selectedFlavors = Array.from(document.querySelectorAll('#flavorsAccordion .flavor-checkbox:checked')).map(cb => cb.nextElementSibling.textContent);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (selectedFlavors.length === 0) return alert('Por favor, escolha pelo menos um sabor!');

Â  Â  Â  Â  Â  Â  let description = [];
Â  Â  Â  Â  Â  Â  let finalPrice = selectedSize.preco;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  let currentBordaPrice = selectedBorda.precoPadrao;
Â  Â  Â  Â  Â  Â  if (selectedSize.nome.includes('Mega')) {
Â  Â  Â  Â  Â  Â  Â  Â  currentBordaPrice = selectedBorda.precoMega;
Â  Â  Â  Â  Â  Â  } else if (selectedSize.nome.includes('MÃ©dia')) {
Â  Â  Â  Â  Â  Â  Â  Â  currentBordaPrice = selectedBorda.precoMedia;
Â  Â  Â  Â  Â  Â  } else if (selectedSize.nome.includes('Individual')) {
Â  Â  Â  Â  Â  Â  Â  Â  currentBordaPrice = selectedBorda.precoIndividual;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  finalPrice += currentBordaPrice;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (currentBordaPrice > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  description.push(`Borda: ${selectedBorda.nome}`);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const selectedSodas = [];
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.pizza-soda-select').forEach(select => {
Â  Â  Â  Â  Â  Â  Â  Â  const selectedOption = select.options[select.selectedIndex];
Â  Â  Â  Â  Â  Â  Â  Â  finalPrice += parseFloat(selectedOption.dataset.price);
Â  Â  Â  Â  Â  Â  Â  Â  selectedSodas.push(selectedOption.value);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  if(selectedSodas.length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â description.push(`Bebida(s): ${selectedSodas.join(', ')}`);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  addToCart({Â 
Â  Â  Â  Â  Â  Â  Â  Â  nome: `Pizza ${selectedSize.nome.split(' ')[0]} (${selectedFlavors.join(', ')})`,Â 
Â  Â  Â  Â  Â  Â  Â  Â  desc: description.join(' | '),Â 
Â  Â  Â  Â  Â  Â  Â  Â  preco: finalPriceÂ 
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  buildPizzaForm.reset();
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.flavor-checkbox').forEach(cb => cb.checked = false);
Â  Â  Â  Â  Â  Â  renderSodaSelection();
Â  Â  Â  Â  Â  Â  updatePizzaSummary();
Â  Â  Â  Â  });
Â  Â  Â  Â  pizzaSizesEl.addEventListener('change', () => {
Â  Â  Â  Â  Â  Â  updateBordaOptions();
Â  Â  Â  Â  Â  Â  renderSodaSelection();
Â  Â  Â  Â  });
Â  Â  Â  Â  bordaRecheadaEl.addEventListener('change', updatePizzaSummary);
Â  Â  Â  Â  flavorsAccordion.addEventListener('change', updatePizzaSummary);
Â  Â  }

Â  Â  function createMenuSection(title, items, targetId) {
Â  Â  Â  Â  const section = document.getElementById(targetId);
Â  Â  Â  Â  if (!section) return;
Â  Â  Â  Â  let content = `<h2 class="text-3xl font-bold text-red-700 mb-6 border-l-4 border-red-500 pl-3">${title}</h2><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">`;
Â  Â  Â  Â  items.forEach(item => {
Â  Â  Â  Â  Â  Â  const priceHtml = item.preco_antigo ? `<div class="text-right"><span class="text-xl font-bold text-red-600">R$ ${formatCurrency(item.preco)}</span><s class="text-gray-500 text-md ml-2">R$ ${formatCurrency(item.preco_antigo)}</s></div>` : (item.preco !== undefined ? `<span class="text-xl font-bold text-red-600">R$ ${formatCurrency(item.preco)}</span>` : '');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  let buttonClass = 'add-to-cart-btn';
Â  Â  Â  Â  Â  Â  if (item.needsFlavor || (item.includesSoda && targetId !== 'combos')) {
Â  Â  Â  Â  Â  Â  Â  Â  buttonClass = 'open-promo-modal-btn';
Â  Â  Â  Â  Â  Â  } else if (targetId === 'massas') {
Â  Â  Â  Â  Â  Â  Â  Â  buttonClass = 'open-massa-modal-btn';
Â  Â  Â  Â  Â  Â  } else if (item.isCustomizable) { // For esfiha combos
Â  Â  Â  Â  Â  Â  Â  Â  buttonClass = 'open-esfiha-combo-modal-btn';
Â  Â  Â  Â  Â  Â  } else if (item.includesSoda && targetId === 'combos') {
Â  Â  Â  Â  Â  Â  Â  Â  buttonClass = 'open-promo-modal-btn'
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  content += `<div class="bg-white rounded-lg shadow-lg flex flex-col overflow-hidden">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="p-5 flex flex-col flex-grow">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex-grow">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4 class="text-xl font-bold text-gray-800">${item.nome}</h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${item.desc ? `<p class="text-gray-600 my-2 text-sm">${item.desc}</p>` : ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mt-4 flex justify-between items-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${priceHtml}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="${buttonClass} bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-transform duration-100 active:scale-95" data-item='${JSON.stringify(item)}'>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Quero esse!
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>`;
Â  Â  Â  Â  });
Â  Â  Â  Â  section.innerHTML = content + '</div>';
Â  Â  }

Â  Â  function createEsfihasSection() {
Â  Â  Â  Â  const section = document.getElementById('esfihas');
Â  Â  Â  Â  if (!section) return;
Â  Â  Â  Â  let content = `<h2 class="text-3xl font-bold text-red-700 mb-6 border-l-4 border-red-500 pl-3">Nossas Esfihas Deliciosas ğŸ¥Ÿ</h2><h3 class="text-2xl font-semibold text-gray-800 mb-4">Combos Prontos</h3><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-10">`;
Â  Â  Â  Â  data.esfihas.combos.forEach(item => {
Â  Â  Â  Â  Â  Â  Â const buttonClass = item.isCustomizable ? 'open-esfiha-combo-modal-btn' : 'add-to-cart-btn';
Â  Â  Â  Â  Â  Â  Â content += `<div class="bg-white rounded-lg shadow-lg flex flex-col overflow-hidden">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div class="p-5 flex flex-col flex-grow">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div class="flex-grow">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <h4 class="text-xl font-bold text-gray-800">${item.nome}</h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <p class="text-gray-600 my-2 text-sm">${item.desc}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div class="mt-4 flex justify-between items-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="text-xl font-bold text-red-600">R$ ${formatCurrency(item.preco)}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <button class="${buttonClass} bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-transform duration-100 active:scale-95" data-item='${JSON.stringify(item)}'>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Quero esse!
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>`;
Â  Â  Â  Â  });
Â  Â  Â  Â  content += '</div>'
Â  Â  Â  Â  content += `<h3 class="text-2xl font-semibold text-gray-800 mb-4 mt-12 border-t pt-8">Ou peÃ§a por unidade</h3><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">`;
Â  Â  Â  Â  data.esfihas.saboresComPreco.forEach(item => {
Â  Â  Â  Â  Â  Â  content += `<div class="bg-white rounded-lg shadow-lg p-5 flex flex-col">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex-grow">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4 class="text-xl font-bold text-gray-800">${item.nome}</h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mt-4 flex justify-between items-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-xl font-bold text-red-600">R$ ${formatCurrency(item.preco)}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="add-to-cart-btn bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-transform duration-100 active:scale-95" data-item='${JSON.stringify(item)}'>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Quero essa!
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>`;
Â  Â  Â  Â  });
Â  Â  Â  Â  section.innerHTML = content + '</div>';
Â  Â  }

Â  Â  function createContatoSection(){
Â  Â  Â  Â  const section = document.getElementById('contato');
Â  Â  Â  Â  if (!section) return;
Â  Â  Â  Â  section.innerHTML = `<h2 class="text-3xl font-bold text-red-700 mb-6 border-l-4 border-red-500 pl-3">Fale Conosco e HorÃ¡rios ğŸ“</h2><div class="bg-white rounded-lg shadow-lg p-8 text-center"><i class="fab fa-whatsapp text-6xl text-green-500 mb-4"></i><h3 class="text-4xl font-bold text-gray-800 mb-2">98141-7594</h3><p class="text-lg text-gray-600 mb-6">PeÃ§a pelo WhatsApp ou ligue para nÃ³s!</p><div class="border-t border-b border-gray-200 py-6 my-6"><i class="fas fa-clock text-4xl text-red-500 mb-3"></i><h4 class="text-2xl font-semibold text-gray-800">HorÃ¡rio de Funcionamento</h4><p class="text-lg text-gray-700 mt-2">Todos os dias, das 18:00h Ã  00:00h</p></div><p class="text-gray-500">Super Pizza - Sempre perto de vocÃª com o melhor sabor!</p></div>`;
Â  Â  }
Â  Â Â 
Â  Â  function openPromoModal(promoItem) {
Â  Â  Â  Â  const selectionContainer = document.getElementById('promoSelectionContainer');
Â  Â  Â  Â  selectionContainer.innerHTML = '';
Â  Â  Â  Â  document.getElementById('promoModalTitle').textContent = `Personalize: ${promoItem.nome}`;
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (promoItem.needsFlavor) {
Â  Â  Â  Â  Â  Â  promoItem.pizzas.forEach((pizza, index) => {
Â  Â  Â  Â  Â  Â  Â  Â  let pizzaHtml = `<div class="border p-4 rounded-lg"><h4 class="font-bold text-lg mb-2">ğŸ• Pizza ${pizza.size} (atÃ© ${pizza.maxSabores} sabores)</h4><div class="grid grid-cols-2 md:grid-cols-3 gap-2 promo-flavor-group" data-max-flavors="${pizza.maxSabores}" data-pizza-index="${index}">`;
Â  Â  Â  Â  Â  Â  Â  Â  data.pizzas.saboresSalgados.sort().forEach(flavor => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  pizzaHtml += `<label class="flex items-center p-2 rounded-md hover:bg-yellow-100 cursor-pointer"><input type="checkbox" class="promo-flavor-checkbox h-4 w-4 rounded border-gray-300 text-red-600 focus:ring-red-500"><span class="ml-2 text-sm text-gray-700">${flavor}</span></label>`;
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  pizzaHtml += `</div><p class="text-red-600 text-sm mt-2 hidden" id="promo-warning-${index}"></p></div>`;
Â  Â  Â  Â  Â  Â  Â  Â  selectionContainer.innerHTML += pizzaHtml;
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  if (promoItem.includesSweet) {
Â  Â  Â  Â  Â  Â  let sweetPizzaHtml = `<div class="border p-4 rounded-lg"><h4 class="font-bold text-lg mb-2">ğŸ° Pizza Doce Individual (GrÃ¡tis)</h4><div class="grid grid-cols-2 md:grid-cols-3 gap-2">`;
Â  Â  Â  Â  Â  Â  data.pizzas.saboresDoces.sort().forEach(flavor => {
Â  Â  Â  Â  Â  Â  Â  Â  sweetPizzaHtml += `<label class="flex items-center p-2 rounded-md hover:bg-yellow-100 cursor-pointer"><input type="radio" name="sweet-flavor" value="${flavor}" class="h-4 w-4 border-gray-300 text-red-600 focus:ring-red-500"><span class="ml-2 text-sm text-gray-700">${flavor}</span></label>`;
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  sweetPizzaHtml += `</div></div>`;
Â  Â  Â  Â  Â  Â  selectionContainer.innerHTML += sweetPizzaHtml;
Â  Â  Â  Â  }

Â  Â  Â  Â  if (promoItem.includesSoda) {
Â  Â  Â  Â  Â  Â  let sodaHtml = `<div class="border p-4 rounded-lg"><h4 class="font-bold text-lg mb-2">ğŸ¥¤ Escolha seu Refrigerante</h4><div class="grid grid-cols-1 md:grid-cols-2 gap-2">`;
Â  Â  Â  Â  Â  Â  data.refrigerantesPromo.forEach((soda, index) => {
Â  Â  Â  Â  Â  Â  Â  Â  const priceText = soda.precoAdicional > 0 ? ` (+ R$ ${formatCurrency(soda.precoAdicional)})` : '';
Â  Â  Â  Â  Â  Â  Â  Â  sodaHtml += `<label class="flex items-center p-2 rounded-md hover:bg-yellow-100 cursor-pointer"><input type="radio" name="promo-soda" value="${soda.nome}" data-price="${soda.precoAdicional}" class="h-4 w-4 border-gray-300 text-red-600 focus:ring-red-500" ${index === 0 ? 'checked' : ''}><span class="ml-2 text-sm text-gray-700">${soda.nome}${priceText}</span></label>`;
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  sodaHtml += `</div></div>`;
Â  Â  Â  Â  Â  Â  selectionContainer.innerHTML += sodaHtml;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  promoModal.classList.remove('hidden');
Â  Â  Â  Â  promoForm.dataset.promoItem = JSON.stringify(promoItem);
Â  Â  }

Â  Â  function openMassaModal(massaItem) {
Â  Â  Â  Â  const selectionContainer = document.getElementById('massaSelectionContainer');
Â  Â  Â  Â  const massaTotalEl = document.getElementById('massaTotal');
Â  Â  Â  Â  document.getElementById('massaModalTitle').textContent = `Personalize: ${massaItem.nome}`;
Â  Â  Â  Â Â 
Â  Â  Â  Â  let content = `<div class="border p-4 rounded-lg"><h4 class="font-bold text-lg mb-2">1. Escolha o Tamanho</h4><div class="grid grid-cols-1 md:grid-cols-2 gap-2" id="massa-size-group">`;
Â  Â  Â  Â  data.massaSizes.forEach((size, index) => {
Â  Â  Â  Â  Â  Â  Â content += `<label class="flex items-center p-2 rounded-md hover:bg-yellow-100 cursor-pointer"><input type="radio" name="massa-size" value="${index}" class="h-4 w-4 border-gray-300 text-red-600 focus:ring-red-500" ${index === 0 ? 'checked' : ''}><span class="ml-2 text-sm text-gray-700">${size.nome}</span></label>`;
Â  Â  Â  Â  });
Â  Â  Â  Â  content += `</div></div>`;

Â  Â  Â  Â  content += `<div class="border p-4 rounded-lg"><h4 class="font-bold text-lg mb-2">2. Escolha o Molho</h4><div class="grid grid-cols-1 md:grid-cols-2 gap-2">`;
Â  Â  Â  Â  content += `<label class="flex items-center p-2 rounded-md hover:bg-yellow-100 cursor-pointer"><input type="radio" name="massa-molho" value="Molho de Tomate" class="h-4 w-4 border-gray-300 text-red-600 focus:ring-red-500" checked><span class="ml-2 text-sm text-gray-700">Molho de Tomate</span></label>`;
Â  Â  Â  Â  content += `<label class="flex items-center p-2 rounded-md hover:bg-yellow-100 cursor-pointer"><input type="radio" name="massa-molho" value="Molho Branco" class="h-4 w-4 border-gray-300 text-red-600 focus:ring-red-500"><span class="ml-2 text-sm text-gray-700">Molho Branco</span></label>`;
Â  Â  Â  Â  content += `</div></div>`;
Â  Â  Â  Â Â 
Â  Â  Â  Â  content += `<div class="border p-4 rounded-lg"><h4 class="font-bold text-lg mb-2">3. Escolha a ProteÃ­na</h4><div class="grid grid-cols-1 md:grid-cols-2 gap-2" id="massa-proteina-group">`;
Â  Â  Â  Â  data.proteinasMassas.forEach((proteina, index) => {
Â  Â  Â  Â  Â  Â  const priceText = proteina.precoAdicional > 0 ? ` (+ R$ ${formatCurrency(proteina.precoAdicional)})` : '';
Â  Â  Â  Â  Â  Â  content += `<label class="flex items-center p-2 rounded-md hover:bg-yellow-100 cursor-pointer"><input type="radio" name="massa-proteina" value="${index}" class="h-4 w-4 border-gray-300 text-red-600 focus:ring-red-500" ${index === 0 ? 'checked' : ''}><span class="ml-2 text-sm text-gray-700">${proteina.nome}${priceText}</span></label>`;
Â  Â  Â  Â  });
Â  Â  Â  Â  content += `</div></div>`;
Â  Â  Â  Â Â 
Â  Â  Â  Â  selectionContainer.innerHTML = content;
Â  Â  Â  Â Â 
Â  Â  Â  Â  const updateMassaTotal = () => {
Â  Â  Â  Â  Â  Â  const selectedSizeIndex = document.querySelector('#massaSelectionContainer input[name="massa-size"]:checked').value;
Â  Â  Â  Â  Â  Â  const selectedProteinaIndex = document.querySelector('#massaSelectionContainer input[name="massa-proteina"]:checked').value;
Â  Â  Â  Â  Â  Â  const basePrice = data.massaSizes[selectedSizeIndex].preco;
Â  Â  Â  Â  Â  Â  const proteinaPrice = data.proteinasMassas[selectedProteinaIndex].precoAdicional;
Â  Â  Â  Â  Â  Â  massaTotalEl.textContent = formatCurrency(basePrice + proteinaPrice);
Â  Â  Â  Â  };
Â  Â  Â  Â Â 
Â  Â  Â  Â  selectionContainer.addEventListener('change', updateMassaTotal);
Â  Â  Â  Â  updateMassaTotal();

Â  Â  Â  Â  massaModal.classList.remove('hidden');
Â  Â  Â  Â  massaForm.dataset.massaItem = JSON.stringify(massaItem);
Â  Â  }

Â  Â  function openEsfihaComboModal(comboItem) {
Â  Â  Â  Â  const selectionContainer = document.getElementById('esfihaComboSelectionContainer');
Â  Â  Â  Â  const sodaContainer = document.getElementById('esfihaComboSodaContainer');
Â  Â  Â  Â  const modalTitle = document.getElementById('esfihaComboModalTitle');
Â  Â  Â  Â  const totalQtyEl = document.getElementById('esfihaTotalQty');
Â  Â  Â  Â  const counterEl = document.getElementById('esfihaCounter');
Â  Â  Â  Â Â 
Â  Â  Â  Â  modalTitle.textContent = `Personalize: ${comboItem.nome}`;
Â  Â  Â  Â  totalQtyEl.textContent = comboItem.quantidade;
Â  Â  Â  Â  counterEl.textContent = '0';
Â  Â  Â  Â  selectionContainer.innerHTML = '';
Â  Â  Â  Â  sodaContainer.innerHTML = '';

Â  Â  Â  Â  let content = `<div class="border p-4 rounded-lg"><h4 class="font-bold text-lg mb-2">Escolha os sabores (Total: ${comboItem.quantidade})</h4><div class="space-y-3">`;
Â  Â  Â  Â  data.esfihas.saboresComPreco.forEach((esfiha, index) => {
Â  Â  Â  Â  Â  Â  const priceText = esfiha.precoAdicional > 0 ? ` (+ R$ ${formatCurrency(esfiha.precoAdicional)})` : '';
Â  Â  Â  Â  Â  Â  content += `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex justify-between items-center p-2 rounded-md bg-gray-50">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-sm text-gray-700">${esfiha.nome}${priceText}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-2 border rounded-md p-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" class="esfiha-qty-change text-red-500" data-index="${index}" data-action="decrease"><i class="fas fa-minus-circle"></i></button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" readonly value="0" min="0" class="esfiha-qty-input w-8 text-center bg-transparent font-bold" data-index="${index}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" class="esfiha-qty-change text-green-500" data-index="${index}" data-action="increase"><i class="fas fa-plus-circle"></i></button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>`;
Â  Â  Â  Â  });
Â  Â  Â  Â  content += `</div></div>`;
Â  Â  Â  Â  selectionContainer.innerHTML = content;
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (comboItem.includesSoda) {
Â  Â  Â  Â  Â  Â  let sodaHtml = `<div class="border p-4 rounded-lg"><h4 class="font-bold text-lg mb-2">ğŸ¥¤ Escolha seu Refrigerante</h4><div class="grid grid-cols-1 md:grid-cols-2 gap-2">`;
Â  Â  Â  Â  Â  Â  data.refrigerantesPromo.forEach((soda, index) => {
Â  Â  Â  Â  Â  Â  Â  Â  const priceText = soda.precoAdicional > 0 ? ` (+ R$ ${formatCurrency(soda.precoAdicional)})` : '';
Â  Â  Â  Â  Â  Â  Â  Â  sodaHtml += `<label class="flex items-center p-2 rounded-md hover:bg-yellow-100 cursor-pointer"><input type="radio" name="esfiha-combo-soda" value="${soda.nome}" data-price="${soda.precoAdicional}" class="h-4 w-4 border-gray-300 text-red-600 focus:ring-red-500" ${index === 0 ? 'checked' : ''}><span class="ml-2 text-sm text-gray-700">${soda.nome}${priceText}</span></label>`;
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  sodaHtml += `</div></div>`;
Â  Â  Â  Â  Â  Â  sodaContainer.innerHTML = sodaHtml;
Â  Â  Â  Â  }

Â  Â  Â  Â  const updateEsfihaComboTotal = () => {
Â  Â  Â  Â  Â  Â  let total = comboItem.preco;
Â  Â  Â  Â  Â  Â  let currentCount = 0;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.esfiha-qty-input').forEach(input => {
Â  Â  Â  Â  Â  Â  Â  Â  const qty = parseInt(input.value);
Â  Â  Â  Â  Â  Â  Â  Â  currentCount += qty;
Â  Â  Â  Â  Â  Â  Â  Â  if(qty > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const esfihaIndex = parseInt(input.dataset.index);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  total += data.esfihas.saboresComPreco[esfihaIndex].precoAdicional * qty;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  if (comboItem.includesSoda) {
Â  Â  Â  Â  Â  Â  Â  Â  Â const selectedSoda = document.querySelector('input[name="esfiha-combo-soda"]:checked');
Â  Â  Â  Â  Â  Â  Â  Â  Â if(selectedSoda) total += parseFloat(selectedSoda.dataset.price);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  counterEl.textContent = currentCount;
Â  Â  Â  Â  Â  Â  document.getElementById('esfihaComboTotal').textContent = formatCurrency(total);
Â  Â  Â  Â  Â  Â  const warningEl = document.getElementById('esfihaWarning');
Â  Â  Â  Â  Â  Â  if (currentCount > comboItem.quantidade) {
Â  Â  Â  Â  Â  Â  Â  Â  Â warningEl.textContent = `VocÃª selecionou ${currentCount} esfihas, o limite para este combo Ã© ${comboItem.quantidade}.`;
Â  Â  Â  Â  Â  Â  Â  Â  Â warningEl.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â warningEl.classList.add('hidden');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };

Â  Â  Â  Â  selectionContainer.addEventListener('click', (e) => {
Â  Â  Â  Â  Â  Â  Â const btn = e.target.closest('.esfiha-qty-change');
Â  Â  Â  Â  Â  Â  Â if(!btn) return;
Â  Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  Â const action = btn.dataset.action;
Â  Â  Â  Â  Â  Â  Â const index = btn.dataset.index;
Â  Â  Â  Â  Â  Â  Â const input = document.querySelector(`.esfiha-qty-input[data-index="${index}"]`);
Â  Â  Â  Â  Â  Â  Â let currentValue = parseInt(input.value);
Â  Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  Â if(action === 'increase') {
Â  Â  Â  Â  Â  Â  Â  Â  Â input.value = currentValue + 1;
Â  Â  Â  Â  Â  Â  Â } else if (action === 'decrease' && currentValue > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â input.value = currentValue - 1;
Â  Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â  Â updateEsfihaComboTotal();
Â  Â  Â  Â  });

Â  Â  Â  Â  if(sodaContainer) {
Â  Â  Â  Â  Â  Â  sodaContainer.addEventListener('change', updateEsfihaComboTotal);
Â  Â  Â  Â  }

Â  Â  Â  Â  updateEsfihaComboTotal();
Â  Â  Â  Â  esfihaComboModal.classList.remove('hidden');
Â  Â  Â  Â  esfihaComboForm.dataset.comboItem = JSON.stringify(comboItem);
Â  Â  }
Â  Â Â 
Â  Â  document.body.addEventListener('change', e => {
Â  Â  Â  Â  if (e.target.classList.contains('promo-flavor-checkbox')) {
Â  Â  Â  Â  Â  Â  const group = e.target.closest('.promo-flavor-group');
Â  Â  Â  Â  Â  Â  if (!group) return;
Â  Â  Â  Â  Â  Â  const maxFlavors = parseInt(group.dataset.maxFlavors);
Â  Â  Â  Â  Â  Â  const pizzaIndex = group.dataset.pizzaIndex;
Â  Â  Â  Â  Â  Â  const warningEl = document.getElementById(`promo-warning-${pizzaIndex}`);
Â  Â  Â  Â  Â  Â  const checkedBoxes = group.querySelectorAll('.promo-flavor-checkbox:checked');

Â  Â  Â  Â  Â  Â  if (checkedBoxes.length > maxFlavors) {
Â  Â  Â  Â  Â  Â  Â  Â  e.target.checked = false;
Â  Â  Â  Â  Â  Â  Â  Â  warningEl.textContent = `MÃ¡ximo de ${maxFlavors} sabores para esta pizza.`;
Â  Â  Â  Â  Â  Â  Â  Â  warningEl.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  warningEl.classList.add('hidden');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  });

Â  Â  promoForm.addEventListener('submit', e => {
Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  const promoItem = JSON.parse(e.currentTarget.dataset.promoItem);
Â  Â  Â  Â  let description = [];
Â  Â  Â  Â  let allSelectionsMade = true;
Â  Â  Â  Â  let finalPrice = promoItem.preco;

Â  Â  Â  Â  if (promoItem.needsFlavor) {
Â  Â  Â  Â  Â  Â  promoItem.pizzas.forEach((pizza, index) => {
Â  Â  Â  Â  Â  Â  Â  Â  const group = document.querySelector(`#promoSelectionContainer .promo-flavor-group[data-pizza-index="${index}"]`);
Â  Â  Â  Â  Â  Â  Â  Â  const selectedFlavors = Array.from(group.querySelectorAll('.promo-flavor-checkbox:checked')).map(cb => cb.nextElementSibling.textContent);
Â  Â  Â  Â  Â  Â  Â  Â  if (selectedFlavors.length === 0) allSelectionsMade = false;
Â  Â  Â  Â  Â  Â  Â  Â  description.push(`Pizza ${pizza.size}: ${selectedFlavors.join(', ')}`);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  if (promoItem.includesSweet) {
Â  Â  Â  Â  Â  Â  const selectedSweet = document.querySelector('input[name="sweet-flavor"]:checked');
Â  Â  Â  Â  Â  Â  if (selectedSweet) {
Â  Â  Â  Â  Â  Â  Â  Â  description.push(`Pizza Doce: ${selectedSweet.value}`);
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  allSelectionsMade = false;Â 
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  if (promoItem.includesSoda) {
Â  Â  Â  Â  Â  Â  const selectedSoda = document.querySelector('input[name="promo-soda"]:checked');
Â  Â  Â  Â  Â  Â  if (selectedSoda) {
Â  Â  Â  Â  Â  Â  Â  Â  description.push(`Bebida: ${selectedSoda.value}`);
Â  Â  Â  Â  Â  Â  Â  Â  finalPrice += parseFloat(selectedSoda.dataset.price);
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  allSelectionsMade = false;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  if (!allSelectionsMade) {
Â  Â  Â  Â  Â  Â  return alert('Por favor, faÃ§a todas as seleÃ§Ãµes necessÃ¡rias para a promoÃ§Ã£o.');
Â  Â  Â  Â  }

Â  Â  Â  Â  addToCart({
Â  Â  Â  Â  Â  Â  nome: promoItem.nome,
Â  Â  Â  Â  Â  Â  desc: description.join(' | '),
Â  Â  Â  Â  Â  Â  preco: finalPrice
Â  Â  Â  Â  });
Â  Â  Â  Â  promoModal.classList.add('hidden');
Â  Â  });

Â  Â  massaForm.addEventListener('submit', e => {
Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  const massaItem = JSON.parse(e.currentTarget.dataset.massaItem);
Â  Â  Â  Â Â 
Â  Â  Â  Â  const selectedSizeIndex = document.querySelector('input[name="massa-size"]:checked').value;
Â  Â  Â  Â  const selectedSize = data.massaSizes[selectedSizeIndex];
Â  Â  Â  Â  const selectedMolho = document.querySelector('input[name="massa-molho"]:checked');
Â  Â  Â  Â  const selectedProteinaIndex = document.querySelector('input[name="massa-proteina"]:checked').value;
Â  Â  Â  Â  const selectedProteina = data.proteinasMassas[selectedProteinaIndex];

Â  Â  Â  Â  if (!selectedMolho || !selectedProteina) {
Â  Â  Â  Â  Â  Â  return alert('Por favor, escolha o molho e a proteÃ­na.');
Â  Â  Â  Â  }

Â  Â  Â  Â  const finalPrice = selectedSize.preco + selectedProteina.precoAdicional;
Â  Â  Â  Â  const description = `Tamanho: ${selectedSize.nome} | Molho: ${selectedMolho.value} | ProteÃ­na: ${selectedProteina.nome}`;

Â  Â  Â  Â  addToCart({
Â  Â  Â  Â  Â  Â  nome: massaItem.nome,
Â  Â  Â  Â  Â  Â  desc: description,
Â  Â  Â  Â  Â  Â  preco: finalPrice
Â  Â  Â  Â  });

Â  Â  Â  Â  massaModal.classList.add('hidden');
Â  Â  });

Â  Â  esfihaComboForm.addEventListener('submit', e => {
Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  const comboItem = JSON.parse(e.currentTarget.dataset.comboItem);
Â  Â  Â  Â  let description = [];
Â  Â  Â  Â  let finalPrice = comboItem.preco;
Â  Â  Â  Â  let totalQty = 0;
Â  Â  Â  Â Â 
Â  Â  Â  Â  document.querySelectorAll('.esfiha-qty-input').forEach(input => {
Â  Â  Â  Â  Â  Â  const qty = parseInt(input.value);
Â  Â  Â  Â  Â  Â  if(qty > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  const esfihaIndex = parseInt(input.dataset.index);
Â  Â  Â  Â  Â  Â  Â  Â  const esfiha = data.esfihas.saboresComPreco[esfihaIndex];
Â  Â  Â  Â  Â  Â  Â  Â  description.push(`${qty}x ${esfiha.nome}`);
Â  Â  Â  Â  Â  Â  Â  Â  finalPrice += esfiha.precoAdicional * qty;
Â  Â  Â  Â  Â  Â  Â  Â  totalQty += qty;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  if (totalQty !== comboItem.quantidade) {
Â  Â  Â  Â  Â  Â  return alert(`VocÃª deve selecionar exatamente ${comboItem.quantidade} esfihas. VocÃª selecionou ${totalQty}.`);
Â  Â  Â  Â  }

Â  Â  Â  Â  if (comboItem.includesSoda) {
Â  Â  Â  Â  Â  Â  const selectedSoda = document.querySelector('input[name="esfiha-combo-soda"]:checked');
Â  Â  Â  Â  Â  Â  if (selectedSoda) {
Â  Â  Â  Â  Â  Â  Â  Â  description.push(`Bebida: ${selectedSoda.value}`);
Â  Â  Â  Â  Â  Â  Â  Â  finalPrice += parseFloat(selectedSoda.dataset.price);
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  return alert('Por favor, escolha uma bebida para o combo.');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  addToCart({
Â  Â  Â  Â  Â  Â  nome: comboItem.nome,
Â  Â  Â  Â  Â  Â  desc: description.join(', '),
Â  Â  Â  Â  Â  Â  preco: finalPrice
Â  Â  Â  Â  });
Â  Â  Â  Â Â 
Â  Â  Â  Â  esfihaComboModal.classList.add('hidden');
Â  Â  });

Â  Â  // EVENT LISTENERS GERAIS
Â  Â  document.body.addEventListener('click', (e) => {
Â  Â  Â  Â  const target = e.target.closest('button');
Â  Â  Â  Â  if (!target) return;

Â  Â  Â  Â  if (target.classList.contains('open-promo-modal-btn')) {
Â  Â  Â  Â  Â  Â  openPromoModal(JSON.parse(target.dataset.item));
Â  Â  Â  Â  } else if (target.classList.contains('add-to-cart-btn')) {
Â  Â  Â  Â  Â  Â  addToCart(JSON.parse(target.dataset.item));
Â  Â  Â  Â  } else if (target.classList.contains('open-massa-modal-btn')) {
Â  Â  Â  Â  Â  Â  openMassaModal(JSON.parse(target.dataset.item));
Â  Â  Â  Â  } else if (target.classList.contains('open-esfiha-combo-modal-btn')) {
Â  Â  Â  Â  Â  Â  openEsfihaComboModal(JSON.parse(target.dataset.item));
Â  Â  Â  Â  }
Â  Â  });

Â  Â  applyCouponBtn.addEventListener('click', applyCoupon);
Â  Â  checkoutButton.addEventListener('click', () => {
Â  Â  Â  Â  if (cart.length > 0) checkoutModal.classList.remove('hidden');
Â  Â  });
Â  Â  cancelButton.addEventListener('click', () => checkoutModal.classList.add('hidden'));
Â  Â  cancelPromo.addEventListener('click', () => promoModal.classList.add('hidden'));
Â  Â  cancelMassa.addEventListener('click', () => massaModal.classList.add('hidden'));
Â  Â  cancelEsfihaCombo.addEventListener('click', () => esfihaComboModal.classList.add('hidden'));
Â  Â  floatingCartButton.addEventListener('click', () => {
Â  Â  Â  Â  document.getElementById('cartSection').scrollIntoView({ behavior: 'smooth' });
Â  Â  });

    // âœ… INÃCIO DA SEÃ‡ÃƒO MODIFICADA
Â  Â  customerInfoForm.addEventListener('submit', (e) => {
Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  const orderNumber = Math.floor(1000 + Math.random() * 9000);
Â  Â  Â  Â  const customerName = document.getElementById('customerName').value;
Â  Â  Â  Â  const customerAddress = document.getElementById('customerAddress').value;
Â  Â  Â  Â  const customerNeighborhood = document.getElementById('customerNeighborhood').value;
Â  Â  Â  Â  const paymentMethod = document.getElementById('paymentMethod').value;
Â  Â  Â  Â  const customerObs = document.getElementById('customerObs').value;
Â  Â  Â  Â  const ketchupQty = document.getElementById('ketchupQty').value;
Â  Â  Â  Â  const mustardQty = document.getElementById('mustardQty').value;
Â  Â  Â  Â Â 
Â  Â  Â  Â  const subtotal = cart.reduce((sum, cartItem) => sum + (cartItem.product.preco * cartItem.quantity), 0);
Â  Â  Â  Â  let discount = 0;
Â  Â  Â  Â  if (appliedCoupon) {
Â  Â  Â  Â  Â  Â  if (appliedCoupon.type === 'percentage') {
Â  Â  Â  Â  Â  Â  Â  Â  discount = subtotal * (appliedCoupon.value / 100);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  const totalAfterDiscount = subtotal - discount;
Â  Â  Â  Â  let deliveryFee = 0;
Â  Â  Â  Â  if (totalAfterDiscount > 0 && totalAfterDiscount < 35.00) {
Â  Â  Â  Â  Â  Â  deliveryFee = 8.00;
Â  Â  Â  Â  }
Â  Â  Â  Â  const finalTotal = totalAfterDiscount + deliveryFee;

     // --- InÃ­cio da FormataÃ§Ã£o para Impressora 80mm ---
Â  Â  Â  Â  const MAX_WIDTH = 42;
Â  Â  Â  Â  const SEPARATOR = '-'.repeat(MAX_WIDTH);

Â  Â  Â  Â  // FunÃ§Ã£o para alinhar texto (ex: "Subtotal......R$ 10,00")
Â  Â  Â  Â  const formatLine = (label, value) => {
Â  Â  Â  Â  Â  Â  const remainingSpace = MAX_WIDTH - label.length - value.length;
Â  Â  Â  Â  Â  Â  if (remainingSpace < 1) {
Â  Â  Â  Â  Â  Â  Â  Â  return `${label}\n${value.padStart(MAX_WIDTH, ' ')}`;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  const dots = '.'.repeat(remainingSpace);
Â  Â  Â  Â  Â  Â  return `${label}${dots}${value}`;
Â  Â  Â  Â  };

Â  Â  Â  Â  let message = `*PEDIDO SUPER PIZZA*\n`;
Â  Â  Â  Â  message += `*PEDIDO NÂº:* ${orderNumber}\n`;
Â  Â  Â  Â  message += `${SEPARATOR}\n`;
Â  Â  Â  Â  message += `*CLIENTE:* ${customerName}\n`;
Â  Â  Â  Â  message += `*ENDEREÃ‡O:* ${customerAddress}, ${customerNeighborhood}\n`;
Â  Â  Â  Â  message += `${SEPARATOR}\n\n`;
Â  Â  Â  Â  message += `*RESUMO DO PEDIDO*\n`;
Â  Â  Â  Â Â 
Â  Â  Â  Â  cart.forEach(cartItem => {
Â  Â  Â  Â  Â  Â  message += `${SEPARATOR}\n`;
Â  Â  Â  Â  Â  Â  message += `*${cartItem.quantity}x ${cartItem.product.nome}*\n`;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (cartItem.product.desc) {
Â  Â  Â  Â  Â  Â  Â  Â  const details = cartItem.product.desc.split('|').map(d => d.trim());
Â  Â  Â  Â  Â  Â  Â  Â  details.forEach(detail => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  message += `Â  _${detail}_\n`;
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const itemTotalText = `R$ ${formatCurrency(cartItem.product.preco * cartItem.quantity)}`;
Â  Â  Â  Â  Â  Â  message += `${itemTotalText.padStart(MAX_WIDTH, ' ')}\n`;
Â  Â  Â  Â  });
Â  Â  Â  Â Â 
Â  Â  Â  Â  message += `${SEPARATOR}\n\n`;
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Totalizadores
Â  Â  Â  Â  message += formatLine('Subtotal', `R$ ${formatCurrency(subtotal)}`) + '\n';
Â  Â  Â  Â  if (discount > 0) {
Â  Â  Â  Â  Â  Â  message += formatLine(`Desconto (${appliedCoupon.code})`, `- R$ ${formatCurrency(discount)}`) + '\n';
Â  Â  Â  Â  }
Â  Â  Â  Â  if (deliveryFee > 0) {
Â  Â  Â  Â  Â  Â  message += formatLine('Taxa de Entrega', `R$ ${formatCurrency(deliveryFee)}`) + '\n';
Â  Â  Â  Â  }
Â  Â  Â  Â  message += `${SEPARATOR}\n`;
Â  Â  Â  Â  message += `*${formatLine('TOTAL A PAGAR', `R$ ${formatCurrency(finalTotal)}`)}*\n`;
Â  Â  Â  Â  message += `${SEPARATOR}\n\n`;
Â  Â  Â  Â Â 
Â  Â  Â  Â  // InformaÃ§Ãµes Finais
Â  Â  Â  Â  if (customerObs) {
Â  Â  Â  Â  Â  Â  message += `*OBS:* ${customerObs}\n`;
Â  Â  Â  Â  }
Â  Â  Â  Â  if (ketchupQty > 0 || mustardQty > 0) {
Â  Â  Â  Â  Â  Â  let sachets = [];
Â  Â  Â  Â  Â  Â  if (ketchupQty > 0) sachets.push(`${ketchupQty}x Ketchup`);
Â  Â  Â  Â  Â  Â  if (mustardQty > 0) sachets.push(`${mustardQty}x Mostarda`);
Â  Â  Â  Â  Â  Â  message += `*SACHÃŠS:* ${sachets.join(', ')}\n`;
Â  Â  Â  Â  }

        // âœ… PAGAMENTO MOVIDO PARA O FINAL
        message += `\n*FORMA DE PAGAMENTO:* ${paymentMethod}\n`;

Â  Â  Â  Â  // --- Fim da FormataÃ§Ã£o ---
Â  Â  Â  Â Â 
Â  Â  Â  Â  const whatsappNumber = "5521981417594";
Â  Â  Â  Â  const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
Â  Â  Â  Â  window.open(whatsappUrl, '_blank');

Â  Â  Â  Â  checkoutModal.classList.add('hidden');
Â  Â  Â  Â  customerInfoForm.reset();
Â  Â  Â  Â  cart = [];
Â  Â  Â  Â  updateCart();
Â  Â  });
Â  Â  // âœ… FIM DA SEÃ‡ÃƒO MODIFICADA

Â  Â  // INICIALIZAÃ‡ÃƒO
Â  Â  if (buildPizzaForm) {
Â  Â  Â  Â  populatePizzaOptions();
Â  Â  Â  Â  renderSodaSelection();Â 
Â  Â  Â  Â  updatePizzaSummary();
Â  Â  }
Â  Â Â 
Â  Â  createMenuSection('Nossas Ofertas ImperdÃ­veis! ğŸ”¥', data.promocoes, 'promocoes');
Â  Â  createMenuSection('Nossas Massas Artesanais ğŸ', data.massas, 'massas');
Â  Â  createMenuSection('Nossos HambÃºrgueres Suculentos ğŸ”', data.hamburgueres, 'hamburgueres');
Â  Â  createEsfihasSection();
Â  Â  createMenuSection('Combos & Petiscos para Compartilhar ğŸŸ', data.combos, 'combos');
Â  Â  createMenuSection('Bebidas Geladinhas ğŸ¥¤', data.bebidas, 'bebidas');
Â  Â  createContatoSection();
Â  Â  updateCart();
});
</script>
</body>
</html>
