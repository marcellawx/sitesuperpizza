<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Super Pizza - O Melhor Sabor da Cidade</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <style>
    .tab-active {
      border-bottom: 4px solid #ef4444;
      color: #ef4444;
      font-weight: bold;
    }
    .custom-scroll::-webkit-scrollbar {
      width: 8px;
    }
    .custom-scroll::-webkit-scrollbar-track {
      background: #fef3c7;
    }
    .custom-scroll::-webkit-scrollbar-thumb {
      background-color: #f87171;
      border-radius: 10px;
      border: 2px solid #fef3c7;
    }
    .cart-item-enter {
      animation: slide-in 0.3s ease-out forwards;
    }
    @keyframes slide-in {
      from { opacity: 0; transform: translateX(20px); }
      to { opacity: 1; transform: translateX(0); }
    }
    .modal-enter {
      animation: fade-in 0.3s ease-out forwards;
    }
     @keyframes fade-in {
      from { opacity: 0; }
      to { opacity: 1; }
    }
  </style>
</head>
<body class="bg-gradient-to-br from-yellow-50 via-red-50 to-yellow-100 min-h-screen flex flex-col font-sans">
  <header class="bg-red-700 text-white p-4 shadow-xl sticky top-0 z-50">
    <div class="max-w-7xl mx-auto flex flex-col md:flex-row items-center justify-between">
      <div class="flex items-center gap-3">
        <i class="fas fa-pizza-slice text-4xl text-yellow-300"></i>
        <h1 class="text-4xl font-extrabold tracking-wide drop-shadow-lg" style="font-family: 'Titan One', cursive;">
          Super Pizza
        </h1>
      </div>
      <div class="mt-3 md:mt-0 text-center md:text-right text-sm md:text-base">
        <p class="font-semibold"><i class="fas fa-motorcycle mr-2 text-yellow-300"></i>Entrega gr√°tis em todos os pedidos</p>
        <p><i class="fas fa-credit-card mr-2 text-yellow-300"></i>Aceitamos cart√µes de refei√ß√£o e alimenta√ß√£o</p>
      </div>
    </div>
  </header>

  <main class="flex-grow max-w-7xl mx-auto p-4 md:p-6 flex flex-col w-full">
    <nav class="mb-8 flex flex-wrap justify-center border-b-2 border-red-200">
      <button class="tab-button tab-active px-3 py-2 md:px-4 md:text-lg font-semibold" data-tab="promocoes">Promo√ß√µes üî•</button>
      <button class="tab-button px-3 py-2 md:px-4 md:text-lg font-semibold" data-tab="pizzas">Pizzas</button>
      <button class="tab-button px-3 py-2 md:px-4 md:text-lg font-semibold" data-tab="massas">Massas</button>
      <button class="tab-button px-3 py-2 md:px-4 md:text-lg font-semibold" data-tab="hamburgueres">Hamb√∫rgueres</button>
      <button class="tab-button px-3 py-2 md:px-4 md:text-lg font-semibold" data-tab="esfihas">Esfihas</button>
      <button class="tab-button px-3 py-2 md:px-4 md:text-lg font-semibold" data-tab="combos">Combos & Petiscos</button>
      <button class="tab-button px-3 py-2 md:px-4 md:text-lg font-semibold" data-tab="bebidas">Bebidas</button>
      <button class="tab-button px-3 py-2 md:px-4 md:text-lg font-semibold" data-tab="contato">Contato</button>
    </nav>
    
    <div class="flex flex-col lg:flex-row gap-8">
      <div class="flex-grow">
        <section id="promocoes" class="tab-content block"></section>
        <section id="pizzas" class="tab-content hidden">
            <h2 class="text-3xl font-bold text-red-700 mb-6 border-l-4 border-red-500 pl-3">Nossas Pizzas</h2>
            <div class="bg-white p-6 rounded-lg shadow-lg">
                <h3 class="text-2xl font-semibold mb-4 text-gray-800">Monte sua Pizza</h3>
                <form id="buildPizzaForm" class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <div class="mb-4">
                            <label class="block font-semibold mb-2 text-gray-700" for="pizzaSizes">1. Escolha o Tamanho:</label>
                            <select id="pizzaSizes" name="pizzaSize" required class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-red-500"></select>
                        </div>
                        <div class="mb-4">
                           <label class="block font-semibold mb-2 text-gray-700" for="bordaRecheada">2. Borda Recheada (Opcional):</label>
                           <select id="bordaRecheada" name="bordaRecheada" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-red-500"></select>
                        </div>
                         <div class="mb-4">
                          <label class="block font-semibold mb-2 text-gray-700">3. Escolha os Sabores:</label>
                           <div id="flavorsList" class="grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-80 overflow-y-auto custom-scroll rounded border border-gray-300 bg-gray-50 p-4 shadow-inner"></div>
                           <p id="flavorWarning" class="text-red-600 text-sm mt-2 hidden"></p>
                        </div>
                    </div>
                    <div class="bg-yellow-50 p-5 rounded-lg shadow-inner border border-yellow-200 flex flex-col">
                        <h4 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2">Resumo da sua Pizza</h4>
                        <div class="flex-grow">
                           <p><strong>Tamanho:</strong> <span id="summarySize">--</span></p>
                           <p><strong>Borda:</strong> <span id="summaryBorda">Nenhuma</span></p>
                           <div class="mt-2">
                              <p><strong>Sabores:</strong></p>
                              <ul id="summaryFlavors" class="list-disc list-inside text-gray-700">
                                 <li>Selecione um sabor...</li>
                              </ul>
                           </div>
                        </div>
                        <div class="mt-6 text-center">
                            <p class="text-2xl font-bold text-red-700 mb-4">Total: R$ <span id="pizzaTotal">0.00</span></p>
                            <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg text-lg transition-colors duration-300">
                              <i class="fas fa-cart-plus mr-2"></i> Adicionar ao Carrinho
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </section>

        <section id="massas" class="tab-content hidden"></section>
        <section id="hamburgueres" class="tab-content hidden"></section>
        <section id="esfihas" class="tab-content hidden"></section>
        <section id="combos" class="tab-content hidden"></section>
        <section id="bebidas" class="tab-content hidden"></section>
        <section id="contato" class="tab-content hidden"></section>
      </div>
      
      <div class="w-full lg:w-1/3 xl:w-1/4">
        <div class="bg-white p-4 rounded-lg shadow-lg sticky top-28">
            <h3 class="text-2xl font-bold text-red-700 mb-4 border-b-2 border-red-200 pb-2 flex items-center gap-3">
              <i class="fas fa-shopping-cart text-red-600"></i> Meu Pedido
            </h3>
            <div id="cartItems" class="mb-4 max-h-96 overflow-y-auto custom-scroll">
                <p id="emptyCart" class="text-gray-500 text-center py-8">Seu carrinho est√° vazio.</p>
            </div>
            <div class="border-t-2 border-red-200 pt-4">
              <div class="flex justify-between items-center mb-4">
                  <span class="text-lg font-semibold text-gray-800">Total:</span>
                  <span id="cartTotal" class="text-2xl font-bold text-red-700">R$ 0.00</span>
              </div>
              <button id="checkoutButton" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg text-lg transition-colors duration-300 flex items-center justify-center gap-2" disabled>
                  <i class="fab fa-whatsapp"></i> Finalizar Pedido
              </button>
            </div>
        </div>
      </div>
    </div>
  </main>
  
  <div id="checkoutModal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 modal-enter">
      <div class="bg-white rounded-lg shadow-2xl p-6 md:p-8 w-full max-w-md">
          <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">Falta pouco!</h2>
          <p class="text-center text-gray-600 mb-6">Preencha seus dados para concluir o pedido.</p>
          <form id="customerInfoForm">
              <div class="mb-4">
                  <label for="customerName" class="block text-gray-700 text-sm font-bold mb-2">Nome Completo:</label>
                  <input type="text" id="customerName" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-red-500" required>
              </div>
              <div class="mb-4">
                  <label for="customerAddress" class="block text-gray-700 text-sm font-bold mb-2">Endere√ßo de Entrega (Rua, N¬∫, Bairro):</label>
                  <input type="text" id="customerAddress" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-red-500" required>
              </div>
              <div class="mb-6">
                  <label for="paymentMethod" class="block text-gray-700 text-sm font-bold mb-2">Forma de Pagamento:</label>
                  <select id="paymentMethod" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-red-500" required>
                      <option value="" disabled selected>Selecione uma op√ß√£o</option>
                      <option value="Dinheiro">Dinheiro</option>
                      <option value="Cart√£o de Cr√©dito">Cart√£o de Cr√©dito</option>
                      <option value="Cart√£o de D√©bito">Cart√£o de D√©bito</option>
                      <option value="PIX">PIX</option>
                      <option value="Vale Refei√ß√£o/Alimenta√ß√£o">Vale Refei√ß√£o/Alimenta√ß√£o</option>
                  </select>
              </div>
              <div class="flex items-center justify-between gap-4">
                  <button type="button" id="cancelButton" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-colors w-1/2">
                      Cancelar
                  </button>
                  <button type="submit" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors w-1/2">
                      Enviar Pedido
                  </button>
              </div>
          </form>
      </div>
  </div>

  <div id="promoFlavorModal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 modal-enter">
    <div class="bg-white rounded-lg shadow-2xl p-6 md:p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto custom-scroll">
        <h2 id="promoFlavorTitle" class="text-2xl font-bold text-gray-800 mb-4 text-center">Escolha os Sabores</h2>
        <form id="promoFlavorForm">
            <div id="promoFlavorSelection" class="space-y-6">
                </div>
            <div class="flex items-center justify-between gap-4 mt-8">
                <button type="button" id="cancelPromoFlavor" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-colors w-1/2">
                    Cancelar
                </button>
                <button type="submit" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors w-1/2">
                    Adicionar ao Carrinho
                </button>
            </div>
        </form>
    </div>
  </div>

  <footer class="bg-red-800 text-yellow-100 p-6 mt-12">
    <div class="max-w-7xl mx-auto text-center">
        <div class="flex justify-center items-center gap-4 mb-4">
            <img src="https://i.imgur.com/83S4Y7g.png" alt="Sodexo" class="h-8">
            <img src="https://i.imgur.com/kM3T1fS.png" alt="VR Benef√≠cios" class="h-10">
        </div>
        <p class="font-semibold">Super Pizza &copy; 2025</p>
        <p class="text-sm italic mt-2">"O Senhor √© o meu pastor e nada me faltar√°"</p>
    </div>
  </footer>

<script>
document.addEventListener('DOMContentLoaded', () => {

    const data = {
        promocoes: [
            { id: 'promo-combo', nome: 'Caixa Combo', desc: '4 X-Tudo + 5 past√©is + Batata c/ cheddar +...', preco: 90.00, preco_antigo: 120.00, needsFlavor: false },
            { id: 'promo-media', nome: 'Pizza M√©dia 32cm em Promo√ß√£o', desc: 'Escolha o sabor da sua pizza e pague menos!', preco: 52.00, preco_antigo: 60.00, needsFlavor: true, pizzas: [{ type: 'salgada', size: 'M√©dia', maxSabores: 2 }] },
            { id: 'promo-familia', nome: 'Pizza Fam√≠lia 35cm + Doce + Refri', desc: 'Pizza fam√≠lia com at√© 2 sabores + pequena doce + refrigerante 2L', preco: 90.00, needsFlavor: true, pizzas: [{ type: 'salgada', size: 'Fam√≠lia', maxSabores: 2 }], includesSweet: true },
            { id: 'promo-gigante', nome: 'Pizza Gigante + Doce + Refri', desc: 'Pizza Gigante (meio metro) + pequena doce + refrigerante', preco: 110.00, preco_antigo: 120.00, needsFlavor: true, pizzas: [{ type: 'salgada', size: 'Gigante', maxSabores: 3 }], includesSweet: true },
            { id: 'promo-slim', nome: 'Promo Slim Pizza Gigante 47 cm', desc: 'Aproveite a pizza Gigante de 47cm com um super desconto!', preco: 85.00, preco_antigo: 100.00, needsFlavor: true, pizzas: [{ type: 'salgada', size: 'Gigante', maxSabores: 3 }] },
            { id: 'promo-2medias', nome: 'Promo 2 Pizzas M√©dias + Brot√£o Doce', desc: 'Duas pizzas m√©dias (32cm) mais uma pizza brot√£o doce!', preco: 100.00, needsFlavor: true, pizzas: [{ type: 'salgada', size: 'M√©dia 1', maxSabores: 2 }, { type: 'salgada', size: 'M√©dia 2', maxSabores: 2 }], includesSweet: true }
        ],
        pizzas: {
            tamanhos: [ { nome: 'Individual (26cm)', preco: 30.00, maxSabores: 2 }, { nome: 'M√©dia (32cm)', preco: 50.00, maxSabores: 2 }, { nome: 'Fam√≠lia (36cm)', preco: 75.00, maxSabores: 2 }, { nome: 'Gigante (47cm)', preco: 99.00, maxSabores: 3 }, { nome: 'Mega (70cm)', preco: 199.00, maxSabores: 5 } ],
            bordas: [ { nome: 'Sem Borda Recheada', preco: 0.00 }, { nome: 'Catupiry', preco: 10.00 }, { nome: 'Cheddar', preco: 10.00 }, { nome: 'Cream Cheese', preco: 12.00 }, { nome: 'Goiabada', preco: 12.00 }, { nome: 'Doce de Leite', preco: 12.00 } ],
            saboresSalogados: [ "Americana", "Atum", "Alho e √ìleo", "Bacalhau", "Benevento", "Calabresa", "Carioca", "Capricciosa", "Frango com Catupiry", "Frango com Cheddar", "La Pizza", "Marguerita", "Moda da Casa", "Mussarela", "Moda da Casa 2", "Napolitana", "Palmito", "Pizza de Batata", "Portuguesa", "4 Queijos", "Super Pizza", "Siciliana", "Tomate Seco", "Tropicaliente", "Lombo Canadense", "Presunto", "Salaminho" ],
            saboresDoces: [ "Banana", "Cocada", "Prest√≠gio", "Romeu & Julieta" ]
        },
        massas: [ { nome: 'Lasanha', recheio: 'Bolonhesa ou 4 Queijos', preco: 45.00 }, { nome: 'Capeletti', recheio: 'Frango ou Presunto', molho: 'Branco ou Sugo', preco: 40.00 }, { nome: 'Raviolli', recheio: 'Frango ou Presunto', molho: 'Branco ou Sugo', preco: 40.00 }, { nome: 'Espaguete', molho: 'Bolonhesa ou Camar√£o', preco: 38.00 }, { nome: 'Talharim', molho: 'Bolonhesa ou Camar√£o', preco: 38.00 }, { nome: 'Nhoque', molho: 'Sugo ou Bolonhesa', preco: 35.00 } ],
        hamburgueres: [ { nome: 'X-Duplo', desc: '2 carnes de hamb√∫rguer, 2 ovos, queijo, presunto, bacon, calabresa, molho billy jack, alface, tomate, batata palha', preco: 17.00 }, { nome: 'X-Tudo', desc: '1 carne de hamb√∫rguer, 1 ovo, queijo, presunto, bacon, calabresa, molho billy jack, alface, tomate, batata palha', preco: 14.00 }, { nome: 'X-Burguer Tropicaliente', desc: '1 carne de hamb√∫rguer, queijo, presunto, bacon, calabresa, molho billy jack, alface, tomate, batata palha', preco: 12.00 }, { nome: 'X-Egg', desc: '1 carne de hamb√∫rguer, 1 ovo, molho billy jack, alface, tomate, batata palha', preco: 10.00 }, { nome: 'X-Burguer Kids', desc: '1 carne de hamb√∫rguer, queijo, molho billy jack, batata palha', preco: 5.00 }, { nome: 'X-Burguer Double Cheese', desc: '1 carne de hamb√∫rguer, queijo, presunto, catupiry, cheddar, alface, tomate, batata palha', preco: 11.00 }, { nome: 'X-Bacon Lover', desc: '1 carne de hamb√∫rguer, bacon em dobro, alface, tomate, batata palha', preco: 11.00 } ],
        esfihas: {
            saboresComPreco: [ { nome: 'Esfiha de Carne', preco: 3.50 }, { nome: 'Esfiha de Queijo', preco: 3.50 }, { nome: 'Esfiha de Calabresa', preco: 3.50 }, { nome: 'Esfiha de Presunto', preco: 3.50 }, { nome: 'Esfiha de Milho Verde', preco: 3.50 }, { nome: 'Esfiha de Atum', preco: 4.00 }, { nome: 'Esfiha Mista', preco: 4.00 }, { nome: 'Esfiha de Frango com Catupiry', preco: 4.50 }, { nome: 'Esfiha de Calabresa com Catupiry', preco: 4.50 }, { nome: 'Esfiha de Quatro Queijos', preco: 4.50 }, { nome: 'Esfiha de Tomate Seco', preco: 4.50 }, { nome: 'Esfiha Portuguesa', preco: 4.50 }, { nome: 'Esfiha Mussarela Napolitana', preco: 4.50 }, { nome: 'Esfiha de Carne Seca', preco: 5.00 }, { nome: 'Esfiha de Bacalhau com Catupiry', preco: 5.00 }, { nome: 'Esfiha de Lombo com Catupiry', preco: 5.00 }, { nome: 'Esfiha Supreme Pepperoni', preco: 5.00 }, { nome: 'Esfiha Maria Bonita', preco: 5.00 }, { nome: 'Esfiha Romeu & Julieta', preco: 3.50 }, { nome: 'Esfiha Banana c/ Canela', preco: 3.50 }, { nome: 'Esfiha Choco Duo', preco: 4.00 }, { nome: 'Esfiha Prest√≠gio', preco: 4.00 }, { nome: 'Esfiha Morango com Chocolate Branco', preco: 4.50 }, { nome: 'Esfiha de Nutella', preco: 5.00 } ],
            combos: [ { nome: 'Combo 20 Esfihas + Refri 2L', desc: '10 de carne + 10 de queijo', preco: 50.00 }, { nome: 'Combo 15 Esfihas 3 Sabores', desc: '5 de frango + 5 de carne + 5 de queijo', preco: 60.00 }, { nome: 'Combo 10 Esfihas Premium', preco: 50.00 }, { nome: 'Combo 20 Esfihas Premium', preco: 80.00 }, { nome: 'Combo 30 Esfihas Premium', preco: 120.00 } ]
        },
        combos: [ { nome: 'Combo 1', desc: '4 X-Tudo + 25 salgadinhos grandes + Batata frita com Cheddar e Bacon + Refri 2 Litros', preco: 85.00 }, { nome: 'Combo 2', desc: '100 Salgadinhos fritos grandes sortidos', preco: 70.00 }, { nome: 'Combo 3', desc: '25 Salgadinhos fritos grandes + Por√ß√£o de calabresa + Batata frita com cheddar + Refri 2 Litros', preco: 85.00 }, { nome: 'Combo 4', desc: '4 X-Tudo + 25 salgadinhos grandes + Por√ß√£o de calabresa + An√©is de cebola + Refri 2 Litros', preco: 85.00 }, { nome: 'Combo 5', desc: '4 X-Tudo + 25 salgadinhos grandes + Por√ß√£o de batata com cheddar e bacon + Refri 2 Litros', preco: 85.00 }, { nome: 'Combo 6', desc: '4 X-Tudo + Calabresa acebolada + Por√ß√£o de batata frita + An√©is de cebola + Refri 2 Litros', preco: 85.00 }, { nome: 'Petisco Frango a Passarinho', desc: 'Frango a passarinho + Batata frita + Refri 2 Litros', preco: 60.00 }, { nome: 'Petisco Gurj√£o', desc: 'Gurj√£o de peixe ou frango', preco: 50.00 } ],
        bebidas: [ { nome: 'Refrigerante Lata', preco: 5.00 }, { nome: 'Refrigerante 2L', preco: 12.00 }, { nome: 'Suco Natural', preco: 8.00 }, { nome: '√Ågua Mineral', preco: 3.00 } ],
    };
    
    let cart = [];
    const cartItemsContainer = document.getElementById('cartItems');
    const cartTotalEl = document.getElementById('cartTotal');
    const checkoutButton = document.getElementById('checkoutButton');
    const checkoutModal = document.getElementById('checkoutModal');
    const customerInfoForm = document.getElementById('customerInfoForm');
    const cancelButton = document.getElementById('cancelButton');
    const promoFlavorModal = document.getElementById('promoFlavorModal');
    const promoFlavorForm = document.getElementById('promoFlavorForm');
    const cancelPromoFlavor = document.getElementById('cancelPromoFlavor');

    function formatCurrency(value) { return value.toFixed(2).replace('.', ','); }

    function updateCart() {
        cartItemsContainer.innerHTML = '';
        if (cart.length === 0) {
            cartItemsContainer.innerHTML = '<p id="emptyCart" class="text-gray-500 text-center py-8">Seu carrinho est√° vazio.</p>';
            checkoutButton.disabled = true;
            checkoutButton.classList.add('opacity-50', 'cursor-not-allowed');
        } else {
            cart.forEach((item, index) => {
                const itemEl = document.createElement('div');
                itemEl.className = 'flex justify-between items-center mb-3 p-2 bg-gray-50 rounded cart-item-enter';
                itemEl.innerHTML = `<div class="flex-grow"><p class="font-bold text-gray-800">${item.nome}</p>${item.desc ? `<p class="text-xs text-gray-600">${item.desc}</p>` : ''}</div><div class="flex items-center"><span class="font-semibold text-gray-700 w-20 text-right">R$ ${formatCurrency(item.preco)}</span><button class="ml-4 text-red-500 hover:text-red-700 remove-item" data-index="${index}"><i class="fas fa-trash-alt"></i></button></div>`;
                cartItemsContainer.appendChild(itemEl);
            });
            checkoutButton.disabled = false;
            checkoutButton.classList.remove('opacity-50', 'cursor-not-allowed');
        }
        cartTotalEl.textContent = `R$ ${formatCurrency(cart.reduce((sum, item) => sum + item.preco, 0))}`;
        document.querySelectorAll('.remove-item').forEach(button => {
            button.addEventListener('click', (e) => {
                cart.splice(e.currentTarget.dataset.index, 1);
                updateCart();
            });
        });
    }

    function addToCart(item) {
        cart.push(item);
        updateCart();
    }
    
    const tabs = document.querySelectorAll('.tab-button');
    const tabContents = document.querySelectorAll('.tab-content');
    tabs.forEach(tab => {
        tab.addEventListener('click', () => {
            tabs.forEach(t => t.classList.remove('tab-active'));
            tab.classList.add('tab-active');
            const target = document.getElementById(tab.dataset.tab);
            tabContents.forEach(content => content.classList.add('hidden'));
            target.classList.remove('hidden');
        });
    });

    const pizzaSizesEl = document.getElementById('pizzaSizes');
    const bordaRecheadaEl = document.getElementById('bordaRecheada');
    const flavorsListEl = document.getElementById('flavorsList');
    const flavorWarningEl = document.getElementById('flavorWarning');
    const summarySizeEl = document.getElementById('summarySize');
    const summaryBordaEl = document.getElementById('summaryBorda');
    const summaryFlavorsEl = document.getElementById('summaryFlavors');
    const pizzaTotalEl = document.getElementById('pizzaTotal');
    const buildPizzaForm = document.getElementById('buildPizzaForm');

    function populatePizzaOptions() {
        if (!pizzaSizesEl) return;
        data.pizzas.tamanhos.forEach((t, i) => {
            pizzaSizesEl.innerHTML += `<option value="${i}">${t.nome} (at√© ${t.maxSabores} ${t.maxSabores > 1 ? 'sabores' : 'sabor'}) - R$ ${formatCurrency(t.preco)}</option>`;
        });
        data.pizzas.bordas.forEach((b, i) => {
            bordaRecheadaEl.innerHTML += `<option value="${i}">${b.nome} ${b.preco > 0 ? `+ R$ ${formatCurrency(b.preco)}` : ''}</option>`;
        });
        const allFlavors = [...data.pizzas.saboresSalogados, ...data.pizzas.saboresDoces].sort();
        allFlavors.forEach(flavor => {
            flavorsListEl.innerHTML += `<label class="flex items-center p-2 rounded-md hover:bg-yellow-100 cursor-pointer"><input type="checkbox" class="flavor-checkbox h-4 w-4 rounded border-gray-300 text-red-600 focus:ring-red-500"><span class="ml-2 text-gray-700">${flavor}</span></label>`;
        });
    }

    function updatePizzaSummary() {
        if (!buildPizzaForm) return;
        const selectedSize = data.pizzas.tamanhos[pizzaSizesEl.value];
        const selectedBorda = data.pizzas.bordas[bordaRecheadaEl.value];
        summarySizeEl.textContent = selectedSize.nome;
        summaryBordaEl.textContent = selectedBorda.nome;
        let selectedFlavors = Array.from(document.querySelectorAll('#flavorsList .flavor-checkbox:checked')).map(cb => cb.nextElementSibling.textContent);
        if (selectedFlavors.length > selectedSize.maxSabores) {
            flavorWarningEl.textContent = `Para este tamanho, voc√™ pode escolher no m√°ximo ${selectedSize.maxSabores} ${selectedSize.maxSabores > 1 ? 'sabores' : 'sabor'}!`;
            flavorWarningEl.classList.remove('hidden');
            const lastChecked = Array.from(document.querySelectorAll('#flavorsList .flavor-checkbox:checked')).pop();
            if (lastChecked) lastChecked.checked = false;
            selectedFlavors = Array.from(document.querySelectorAll('#flavorsList .flavor-checkbox:checked')).map(cb => cb.nextElementSibling.textContent);
        } else {
            flavorWarningEl.classList.add('hidden');
        }
        summaryFlavorsEl.innerHTML = selectedFlavors.length > 0 ? selectedFlavors.map(f => `<li>${f}</li>`).join('') : `<li>Selecione um sabor...</li>`;
        pizzaTotalEl.textContent = formatCurrency(selectedSize.preco + selectedBorda.preco);
    }
    
    if (buildPizzaForm) {
        buildPizzaForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const selectedSize = data.pizzas.tamanhos[pizzaSizesEl.value];
            const selectedBorda = data.pizzas.bordas[bordaRecheadaEl.value];
            const selectedFlavors = Array.from(document.querySelectorAll('#flavorsList .flavor-checkbox:checked')).map(cb => cb.nextElementSibling.textContent);
            if (selectedFlavors.length === 0) return alert('Por favor, escolha pelo menos um sabor!');
            addToCart({ nome: `Pizza ${selectedSize.nome.split(' ')[0]} (${selectedFlavors.join(', ')})`, desc: selectedBorda.preco > 0 ? `Borda: ${selectedBorda.nome}` : '', preco: selectedSize.preco + selectedBorda.preco });
            buildPizzaForm.reset();
            document.querySelectorAll('.flavor-checkbox').forEach(cb => cb.checked = false);
            updatePizzaSummary();
        });
        pizzaSizesEl.addEventListener('change', updatePizzaSummary);
        bordaRecheadaEl.addEventListener('change', updatePizzaSummary);
        flavorsListEl.addEventListener('change', updatePizzaSummary);
    }

    function createMenuSection(title, items, targetId) {
        const section = document.getElementById(targetId);
        let content = `<h2 class="text-3xl font-bold text-red-700 mb-6 border-l-4 border-red-500 pl-3">${title}</h2><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">`;
        items.forEach(item => {
            const priceHtml = item.preco_antigo ? `<span class="text-xl font-bold text-red-600">R$ ${formatCurrency(item.preco)}</span><s class="text-gray-500 text-md ml-2">R$ ${formatCurrency(item.preco_antigo)}</s>` : `<span class="text-xl font-bold text-red-600">R$ ${formatCurrency(item.preco)}</span>`;
            const buttonClass = item.needsFlavor ? 'add-promo-btn' : 'add-to-cart-btn';
            content += `<div class="bg-white rounded-lg shadow-lg p-5 flex flex-col"><div class="flex-grow"><h4 class="text-xl font-bold text-gray-800">${item.nome}</h4>${item.desc ? `<p class="text-gray-600 my-2 text-sm">${item.desc}</p>` : ''}</div><div class="mt-4 flex justify-between items-center">${priceHtml}<button class="${buttonClass} bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors" data-item='${JSON.stringify(item)}'>Adicionar</button></div></div>`;
        });
        section.innerHTML = content + '</div>';
    }

    function createEsfihasSection() {
        const section = document.getElementById('esfihas');
        let content = `<h2 class="text-3xl font-bold text-red-700 mb-6 border-l-4 border-red-500 pl-3">Esfihas</h2><h3 class="text-2xl font-semibold text-gray-800 mb-4">Combos Prontos</h3><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-10">`;
        data.esfihas.combos.forEach(item => {
             content += `<div class="bg-white rounded-lg shadow-lg p-5 flex flex-col"><div class="flex-grow"><h4 class="text-xl font-bold text-gray-800">${item.nome}</h4><p class="text-gray-600 my-2 text-sm">${item.desc}</p></div><div class="mt-4 flex justify-between items-center"><span class="text-xl font-bold text-red-600">R$ ${formatCurrency(item.preco)}</span><button class="add-to-cart-btn bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors" data-item='${JSON.stringify(item)}'>Adicionar</button></div></div>`;
        });
        content += '</div>'
        content += `<h3 class="text-2xl font-semibold text-gray-800 mb-4 mt-12 border-t pt-8">Monte seu combo de esfiha</h3><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">`;
        data.esfihas.saboresComPreco.forEach(item => {
            content += `<div class="bg-white rounded-lg shadow-lg p-5 flex flex-col"><div class="flex-grow"><h4 class="text-xl font-bold text-gray-800">${item.nome}</h4></div><div class="mt-4 flex justify-between items-center"><span class="text-xl font-bold text-red-600">R$ ${formatCurrency(item.preco)}</span><button class="add-to-cart-btn bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors" data-item='${JSON.stringify(item)}'>Adicionar</button></div></div>`;
        });
        section.innerHTML = content + '</div>';
    }

    function createContatoSection(){
        document.getElementById('contato').innerHTML = `<h2 class="text-3xl font-bold text-red-700 mb-6 border-l-4 border-red-500 pl-3">Contato e Hor√°rios</h2><div class="bg-white rounded-lg shadow-lg p-8 text-center"><i class="fab fa-whatsapp text-6xl text-green-500 mb-4"></i><h3 class="text-4xl font-bold text-gray-800 mb-2">98141-7594</h3><p class="text-lg text-gray-600 mb-6">Pe√ßa pelo WhatsApp ou ligue para n√≥s!</p><div class="border-t border-b border-gray-200 py-6 my-6"><i class="fas fa-clock text-4xl text-red-500 mb-3"></i><h4 class="text-2xl font-semibold text-gray-800">Hor√°rio de Funcionamento</h4><p class="text-lg text-gray-700 mt-2">Todos os dias, das 18:00h √†s 00:00h</p></div><p class="text-gray-500">Super Pizza - Sempre perto de voc√™ com o melhor sabor!</p></div>`;
    }
    
    populatePizzaOptions();
    createMenuSection('Promo√ß√µes da Semana üî•', data.promocoes, 'promocoes');
    createMenuSection('Nossas Massas', data.massas, 'massas');
    createMenuSection('Nossos Hamb√∫rgueres', data.hamburgueres, 'hamburgueres');
    createEsfihasSection();
    createMenuSection('Combos & Petiscos', data.combos, 'combos');
    createMenuSection('Bebidas', data.bebidas, 'bebidas');
    createContatoSection();

    document.body.addEventListener('click', (e) => {
        const target = e.target.closest('button');
        if (!target) return;

        if (target.classList.contains('add-promo-btn')) {
            const item = JSON.parse(target.dataset.item);
            openPromoFlavorModal(item);
        } else if (target.classList.contains('add-to-cart-btn')) {
            const item = JSON.parse(target.dataset.item);
            addToCart(item);
        }
    });
    
    function openPromoFlavorModal(promoItem) {
        const selectionContainer = document.getElementById('promoFlavorSelection');
        selectionContainer.innerHTML = '';
        document.getElementById('promoFlavorTitle').textContent = `Escolha os sabores para: ${promoItem.nome}`;
        
        promoItem.pizzas.forEach((pizza, index) => {
            let pizzaHtml = `<div class="border p-4 rounded-lg"><h4 class="font-bold text-lg mb-2">Pizza ${pizza.size} (at√© ${pizza.maxSabores} sabores)</h4><div class="grid grid-cols-2 md:grid-cols-3 gap-2 promo-flavor-group" data-pizza-type="${pizza.type}" data-max-flavors="${pizza.maxSabores}" data-pizza-index="${index}">`;
            data.pizzas.saboresSalogados.sort().forEach(flavor => {
                pizzaHtml += `<label class="flex items-center p-2 rounded-md hover:bg-yellow-100 cursor-pointer"><input type="checkbox" class="promo-flavor-checkbox h-4 w-4 rounded border-gray-300 text-red-600 focus:ring-red-500"><span class="ml-2 text-sm text-gray-700">${flavor}</span></label>`;
            });
            pizzaHtml += `</div><p class="text-red-600 text-sm mt-2 hidden" id="promo-warning-${index}"></p></div>`;
            selectionContainer.innerHTML += pizzaHtml;
        });

        if (promoItem.includesSweet) {
            let sweetPizzaHtml = `<div class="border p-4 rounded-lg mt-6"><h4 class="font-bold text-lg mb-2">Pizza Doce Individual (Gr√°tis)</h4><div class="grid grid-cols-2 md:grid-cols-3 gap-2 promo-flavor-group-sweet">`;
            data.pizzas.saboresDoces.sort().forEach(flavor => {
                sweetPizzaHtml += `<label class="flex items-center p-2 rounded-md hover:bg-yellow-100 cursor-pointer"><input type="radio" name="sweet-flavor" value="${flavor}" class="h-4 w-4 border-gray-300 text-red-600 focus:ring-red-500"><span class="ml-2 text-sm text-gray-700">${flavor}</span></label>`;
            });
            sweetPizzaHtml += `</div></div>`;
            selectionContainer.innerHTML += sweetPizzaHtml;
        }
        
        promoFlavorModal.classList.remove('hidden');
        promoFlavorForm.dataset.promoItem = JSON.stringify(promoItem);
    }
    
    document.body.addEventListener('change', e => {
        if (e.target.classList.contains('promo-flavor-checkbox')) {
            const group = e.target.closest('.promo-flavor-group');
            const maxFlavors = parseInt(group.dataset.maxFlavors);
            const pizzaIndex = group.dataset.pizzaIndex;
            const warningEl = document.getElementById(`promo-warning-${pizzaIndex}`);
            const checkedBoxes = group.querySelectorAll('.promo-flavor-checkbox:checked');

            if (checkedBoxes.length > maxFlavors) {
                e.target.checked = false;
                warningEl.textContent = `M√°ximo de ${maxFlavors} sabores para esta pizza.`;
                warningEl.classList.remove('hidden');
            } else {
                warningEl.classList.add('hidden');
            }
        }
    });

    promoFlavorForm.addEventListener('submit', e => {
        e.preventDefault();
        const promoItem = JSON.parse(e.currentTarget.dataset.promoItem);
        let description = [];
        let allFlavorsSelected = true;

        promoItem.pizzas.forEach((pizza, index) => {
            const group = document.querySelector(`.promo-flavor-group[data-pizza-index="${index}"]`);
            const selectedFlavors = Array.from(group.querySelectorAll('.promo-flavor-checkbox:checked')).map(cb => cb.nextElementSibling.textContent);
            
            if (selectedFlavors.length === 0) {
                allFlavorsSelected = false;
            }
            description.push(`Pizza ${pizza.size}: ${selectedFlavors.join(', ')}`);
        });

        if (promoItem.includesSweet) {
            const selectedSweet = document.querySelector('input[name="sweet-flavor"]:checked');
            if (selectedSweet) {
                description.push(`Pizza Doce: ${selectedSweet.value}`);
            } else {
                allFlavorsSelected = false; 
            }
        }

        if (!allFlavorsSelected) {
            return alert('Por favor, escolha os sabores para todas as pizzas da promo√ß√£o.');
        }

        const cartItem = {
            nome: promoItem.nome,
            desc: description.join(' | '),
            preco: promoItem.preco
        };
        addToCart(cartItem);
        promoFlavorModal.classList.add('hidden');
    });

    checkoutButton.addEventListener('click', () => {
        if (cart.length > 0) checkoutModal.classList.remove('hidden');
    });
    cancelButton.addEventListener('click', () => checkoutModal.classList.add('hidden'));
    cancelPromoFlavor.addEventListener('click', () => promoFlavorModal.classList.add('hidden'));

    customerInfoForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const orderNumber = Math.floor(1000 + Math.random() * 9000);
        const customerName = document.getElementById('customerName').value;
        const customerAddress = document.getElementById('customerAddress').value;
        const paymentMethod = document.getElementById('paymentMethod').value;
        
        let message = `*NOVO PEDIDO SUPER PIZZA* üçï\n\n*PEDIDO N¬∫: ${orderNumber}*\n\n*CLIENTE:* ${customerName}\n*ENDERE√áO:* ${customerAddress}\n*PAGAMENTO:* ${paymentMethod}\n----------------------------------\n\n*ITENS DO PEDIDO:*\n\n`;
        cart.forEach(item => {
            message += `*${item.nome}*\n${item.desc ? `  - ${item.desc}\n` : ''}  - Pre√ßo: R$ ${formatCurrency(item.preco)}\n\n`;
        });
        message += `*TOTAL DO PEDIDO: R$ ${formatCurrency(cart.reduce((sum, item) => sum + item.preco, 0))}*`;
        
        const whatsappNumber = "5521981417594";
        const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
        window.open(whatsappUrl, '_blank');

        checkoutModal.classList.add('hidden');
        customerInfoForm.reset();
        cart = [];
        updateCart();
    });

    if (buildPizzaForm) {
        populatePizzaOptions();
        updatePizzaSummary();
    }
    createMenuSection('Promo√ß√µes da Semana üî•', data.promocoes, 'promocoes');
    createMenuSection('Nossas Massas', data.massas, 'massas');
    createMenuSection('Nossos Hamb√∫rgueres', data.hamburgueres, 'hamburgueres');
    createEsfihasSection();
    createMenuSection('Combos & Petiscos', data.combos, 'combos');
    createMenuSection('Bebidas', data.bebidas, 'bebidas');
    createContatoSection();
    updateCart();
});
</script>
</body>
</html>
