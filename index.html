<!DOCTYPE html>

<html lang="pt-BR" class="scroll-smooth">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Super Pizza - Super Esfihas - Super Massas - Super Tudo</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
<style>
.tab-active {
border-bottom: 4px solid #ef4444;
color: #ef4444;
font-weight: bold;
}
.custom-scroll::-webkit-scrollbar {
width: 8px;
}
.custom-scroll::-webkit-scrollbar-track {
background: #fef3c7;
}
.custom-scroll::-webkit-scrollbar-thumb {
background-color: #f87171;
border-radius: 10px;
border: 2px solid #fef3c7;
}
.cart-item-enter {
animation: slide-in 0.3s ease-out forwards;
}
@keyframes slide-in {
from { opacity: 0; transform: translateX(20px); }
to { opacity: 1; transform: translateX(0); }
}
.modal-enter {
animation: fade-in 0.3s ease-out forwards;
}
@keyframes fade-in {
from { opacity: 0; }
to { opacity: 1; }
}
button {
transition: transform 0.1s ease-in-out;
}
button:active {
transform: scale(0.95);
}
</style>
</head>
<body class="bg-gradient-to-br from-yellow-50 via-red-50 to-yellow-100 min-h-screen flex flex-col font-sans">
<header id="header" class="bg-red-700 text-white p-4 shadow-xl sticky top-0 z-50">
<div class="max-w-7xl mx-auto flex flex-col md:flex-row items-center justify-between">
<div class="flex items-center gap-3">
<i class="fas fa-pizza-slice text-4xl text-yellow-300"></i>
<h1 class="text-4xl font-extrabold tracking-wide drop-shadow-lg" style="font-family: 'Titan One', cursive;">
Super Pizza
</h1>
</div>
<div class="mt-3 md:mt-0 text-center md:text-right text-sm md:text-base">
<p class="font-semibold"><i class="fas fa-motorcycle mr-2 text-yellow-300"></i>Entrega gr√°tis em pedidos acima de R$ 35,00!</p>
<p><i class="fas fa-credit-card mr-2 text-yellow-300"></i>Aceitamos cart√µes de refei√ß√£o e alimenta√ß√£o</p>
</div>
</div>
</header>

<main class="flex-grow max-w-7xl mx-auto p-4 md:p-6 flex flex-col w-full">
<nav class="mb-8 flex flex-wrap justify-center border-b-2 border-red-200">
<button class="tab-button tab-active px-3 py-2 md:px-4 md:text-lg font-semibold" data-tab="promocoes">Promo√ß√µes üî•</button>
<button class="tab-button px-3 py-2 md:px-4 md:text-lg font-semibold" data-tab="pizzas">Pizzas üçï</button>
<button class="tab-button px-3 py-2 md:px-4 md:text-lg font-semibold" data-tab="massas">Massas üçù</button>
<button class="tab-button px-3 py-2 md:px-4 md:text-lg font-semibold" data-tab="hamburgueres">Hamb√∫rgueres üçî</button>
<button class="tab-button px-3 py-2 md:px-4 md:text-lg font-semibold" data-tab="esfihas">Esfihas ü•ü</button>
<button class="tab-button px-3 py-2 md:px-4 md:text-lg font-semibold" data-tab="combos">Combos & Petiscos üçü</button>
<button class="tab-button px-3 py-2 md:px-4 md:text-lg font-semibold" data-tab="bebidas">Bebidas ü•§</button>
<button class="tab-button px-3 py-2 md:px-4 md:text-lg font-semibold" data-tab="contato">Contato üìû</button>
</nav>

<div class="flex flex-col lg:flex-row gap-8">
  <div class="flex-grow">
    <section id="promocoes" class="tab-content block"></section>
    <section id="pizzas" class="tab-content hidden">
      <h2 class="text-3xl font-bold text-red-700 mb-6 border-l-4 border-red-500 pl-3">Nossas Pizzas Irresist√≠veis üçï</h2>
      <div class="bg-white p-6 rounded-lg shadow-lg">
        <h3 class="text-2xl font-semibold mb-4 text-gray-800">Monte sua Pizza do Seu Jeito! ‚ú®</h3>
        <form id="buildPizzaForm" class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <div>
            <div class="mb-4 bg-white p-4 rounded-lg shadow">
              <label class="block font-semibold mb-2 text-gray-700" for="pizzaSizes">1. Escolha o Tamanho:</label>
              <select id="pizzaSizes" name="pizzaSize" required class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-red-500"></select>
            </div>
            <div class="mb-4 bg-white p-4 rounded-lg shadow">
              <label class="block font-semibold mb-2 text-gray-700" for="bordaRecheada">2. Borda Recheada (Opcional):</label>
              <select id="bordaRecheada" name="bordaRecheada" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-red-500"></select>
            </div>
            <div id="sodaSelectionContainer" class="space-y-4 mb-4 bg-white p-4 rounded-lg shadow">
            </div>
            <div class="bg-white p-4 rounded-lg shadow">
              <label class="block font-semibold mb-2 text-gray-700">3. Escolha os Sabores:</label>
              <div id="flavorsAccordion" class="space-y-2"></div>
              <p id="flavorWarning" class="text-red-600 text-sm mt-2 hidden"></p>
            </div>
          </div>
          <div class="bg-yellow-50 p-5 rounded-lg shadow-inner border border-yellow-200 flex flex-col">
            <h4 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2">Resumo da sua Pizza</h4>
            <div class="flex-grow">
              <p><strong>Tamanho:</strong> <span id="summarySize">--</span></p>
              <p><strong>Borda:</strong> <span id="summaryBorda">Nenhuma</span></p>
              <p id="summarySodaContainer" class="hidden"><strong>Refrigerante(s):</strong> <span id="summarySoda">--</span></p>
              <div class="mt-2">
                <p><strong>Sabores:</strong></p>
                <ul id="summaryFlavors" class="list-disc list-inside text-gray-700">
                  <li>Selecione um sabor...</li>
                </ul>
              </div>
            </div>
            <div class="mt-6 text-center">
              <p class="text-2xl font-bold text-red-700 mb-4">Total: R$ <span id="pizzaTotal">0,00</span></p>
              <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg text-lg transition-transform duration-100 active:scale-95">
                <i class="fas fa-cart-plus mr-2"></i> Adicionar ao Pedido
              </button>
            </div>
          </div>
        </form>
      </div>
    </section>

    <section id="massas" class="tab-content hidden"></section>
    <section id="hamburgueres" class="tab-content hidden"></section>
    <section id="esfihas" class="tab-content hidden"></section>
    <section id="combos" class="tab-content hidden"></section>
    <section id="bebidas" class="tab-content hidden"></section>
    <section id="contato" class="tab-content hidden"></section>
  </div>
  
  <div id="cartSection" class="w-full lg:w-1/3 xl:w-1/4">
    <div class="bg-white p-4 rounded-lg shadow-lg sticky top-28">
      <h3 class="text-2xl font-bold text-red-700 mb-4 border-b-2 border-red-200 pb-2 flex items-center gap-3">
        <i class="fas fa-shopping-cart text-red-600"></i> Meu Pedido
      </h3>
      <div id="cartItems" class="mb-4 max-h-80 overflow-y-auto custom-scroll">
        <p id="emptyCart" class="text-gray-500 text-center py-8">Seu carrinho est√° vazio.</p>
      </div>
      <div class="border-t-2 border-red-200 pt-4">

        <div class="mb-4">
          <div class="flex gap-2">
            <input type="text" id="couponInput" placeholder="Tem um cupom?" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 text-sm">
            <button id="applyCouponBtn" class="bg-gray-800 text-white px-4 rounded-md hover:bg-gray-700 text-sm font-bold">Aplicar</button>
          </div>
          <p id="couponMessage" class="text-xs mt-1"></p>
        </div>
        <div class="space-y-2">
          <div class="flex justify-between items-center">
            <span class="text-md text-gray-600">Subtotal:</span>
            <span id="cartSubtotal" class="text-md text-gray-800">R$ 0,00</span>
          </div>

          <div id="discountContainer" class="hidden flex justify-between items-center text-green-600">
            <span class="text-md font-semibold">Desconto:</span>
            <span id="discountAmount" class="text-md font-semibold">- R$ 0,00</span>
          </div>
          <div id="deliveryFeeContainer" class="hidden flex justify-between items-center">
            <span class="text-md text-gray-600">Taxa de Entrega:</span>
            <span id="cartDeliveryFee" class="text-md text-gray-800">R$ 8,00</span>
          </div>
          <div class="flex justify-between items-center border-t pt-2 mt-2">
            <span class="text-lg font-bold text-gray-800">Total:</span>
            <span id="cartTotal" class="text-2xl font-bold text-red-700">R$ 0,00</span>
          </div>
        </div>
      <button id="checkoutButton" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg text-lg transition-transform duration-100 active:scale-95 flex items-center justify-center gap-2 mt-4" disabled>
          <i class="fab fa-whatsapp"></i> Concluir Pedido
        </button>
      </div>
    </div>
  </div>
</div>
</main>

<div id="checkoutModal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 modal-enter">
<div class="bg-white rounded-lg shadow-2xl p-6 md:p-8 w-full max-w-md">
<h2 class="text-2xl font-bold text-gray-800 mb-4 text-center">Quase l√°! Faltam seus dados...</h2>
<p class="text-center text-gray-600 mb-6">Preencha abaixo para a gente saber onde entregar essa del√≠cia.</p>
<form id="customerInfoForm">
<div class="mb-4">
<label for="customerName" class="block text-gray-700 text-sm font-bold mb-2">Nome Completo:</label>
<input type="text" id="customerName" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-red-500" required>
</div>
<div class="mb-4">
<label for="customerPhone" class="block text-gray-700 text-sm font-bold mb-2">Telefone (WhatsApp):</label>
<input type="tel" id="customerPhone" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-red-500" placeholder="(XX) XXXXX-XXXX" required>
</div>
<div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
<div>
<label for="customerAddress" class="block text-gray-700 text-sm font-bold mb-2">Endere√ßo (Rua e N¬∫):</label>
<input type="text" id="customerAddress" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-red-500" required>
</div>
<div>
<label for="customerNeighborhood" class="block text-gray-700 text-sm font-bold mb-2">Bairro:</label>
<input type="text" id="customerNeighborhood" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-red-500" required>
</div>
</div>
<div class="mb-4">
<label for="customerObs" class="block text-gray-700 text-sm font-bold mb-2">Observa√ß√µes (opcional):</label>
<textarea id="customerObs" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-red-500" rows="2" placeholder="Ex: sem cebola, ponto da carne, etc."></textarea>
</div>
<div class="border p-3 rounded-lg mb-6">
<p class="block text-gray-700 text-sm font-bold mb-2">Sach√™s (Cortesia)</p>
<div class="flex items-center justify-around">
<div>
<label for="ketchupQty" class="text-sm">Ketchup:</label>
<input type="number" id="ketchupQty" min="0" max="10" value="0" class="w-16 text-center border rounded">
</div>
<div>
<label for="mustardQty" class="text-sm">Mostarda:</label>
<input type="number" id="mustardQty" min="0" max="10" value="0" class="w-16 text-center border rounded">
</div>
</div>
</div>
<div class="mb-6">
<label for="paymentMethod" class="block text-gray-700 text-sm font-bold mb-2">Forma de Pagamento:</label>
<select id="paymentMethod" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-red-500" required>
<option value="" disabled selected>Selecione uma op√ß√£o</option>
<option value="Vale Refei√ß√£o/Alimenta√ß√£o">Vale Refei√ß√£o/Alimenta√ß√£o</option>
<option value="PIX">PIX</option>
<option value="Cart√£o de Cr√©dito">Cart√£o de Cr√©dito</option>
<option value="Cart√£o de D√©bito">Cart√£o de D√©bito</option>
<option value="Dinheiro">Dinheiro</option>
</select>
</div>
<div class="text-center mb-4 text-sm text-gray-500">
<p>Ap√≥s enviar, seu pedido ser√° confirmado pelo WhatsApp.</p>
</div>
<div class="flex items-center justify-between gap-4">
<button type="button" id="cancelButton" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-transform duration-100 active:scale-95 w-1/2">
Cancelar
</button>
<button type="submit" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-transform duration-100 active:scale-95 w-1/2">
Confirmar e Enviar
</button>
</div>
</form>
</div>
</div>

<div id="promoModal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 modal-enter">
<div class="bg-white rounded-lg shadow-2xl p-6 md:p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto custom-scroll">
<h2 id="promoModalTitle" class="text-2xl font-bold text-gray-800 mb-4 text-center">Personalize sua Promo√ß√£o</h2>
<form id="promoForm">
<div id="promoSelectionContainer" class="space-y-6">
</div>
<div class="flex items-center justify-between gap-4 mt-8">
<button type="button" id="cancelPromo" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-transform duration-100 active:scale-95 w-1/2">
Cancelar
</button>
<button type="submit" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-transform duration-100 active:scale-95 w-1/2">
Adicionar ao Pedido
</button>
</div>
</form>
</div>
</div>

<div id="massaModal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 modal-enter">
<div class="bg-white rounded-lg shadow-2xl p-6 md:p-8 w-full max-w-xl max-h-[90vh] overflow-y-auto custom-scroll">
<h2 id="massaModalTitle" class="text-2xl font-bold text-gray-800 mb-4 text-center">Monte sua Massa</h2>
<form id="massaForm">
<div id="massaSelectionContainer" class="space-y-6">
</div>
<p class="text-xl font-bold text-red-700 text-center mt-6">Total do Prato: R$ <span id="massaTotal">0,00</span></p>
<div class="flex items-center justify-between gap-4 mt-8">
<button type="button" id="cancelMassa" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-transform duration-100 active:scale-95 w-1/2">
Cancelar
</button>
<button type="submit" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-transform duration-100 active:scale-95 w-1/2">
Adicionar ao Pedido
</button>
</div>
</form>
</div>
</div>

<div id="esfihaComboModal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 modal-enter">
<div class="bg-white rounded-lg shadow-2xl p-6 md:p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto custom-scroll">
<h2 id="esfihaComboModalTitle" class="text-2xl font-bold text-gray-800 mb-4 text-center">Monte seu Combo de Esfihas</h2>
<form id="esfihaComboForm">
<div id="esfihaComboSelectionContainer" class="space-y-4">
</div>
<div id="esfihaComboSodaContainer" class="mt-6 space-y-4">
</div>
<div class="mt-4 p-3 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 rounded-lg">
<p>Selecionadas: <span id="esfihaCounter">0</span> de <span id="esfihaTotalQty">0</span></p>
</div>
<p id="esfihaWarning" class="text-red-600 text-sm mt-2 hidden"></p>
<p class="text-xl font-bold text-red-700 text-center mt-6">Total do Combo: R$ <span id="esfihaComboTotal">0,00</span></p>
<div class="flex items-center justify-between gap-4 mt-8">
<button type="button" id="cancelEsfihaCombo" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-transform duration-100 active:scale-95 w-1/2">
Cancelar
</button>
<button type="submit" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-transform duration-100 active:scale-95 w-1/2">
Adicionar ao Pedido
</button>
</div>
</form>
</div>
</div>

<button id="floatingCartButton" class="hidden fixed bottom-4 right-4 bg-green-600 text-white py-3 px-5 rounded-full shadow-lg z-40 transition-transform duration-300 hover:bg-green-700 active:scale-95">
<i class="fas fa-shopping-cart mr-2"></i>
<span>Ver Pedido</span>
<span id="floatingCartTotal" class="ml-2 font-bold">R$ 0,00</span>
</button>

<footer class="bg-red-800 text-yellow-100 p-6 mt-12">
<div class="max-w-7xl mx-auto text-center">
<div class="flex justify-center items-center gap-4 mb-4">
<img src="https://i.imgur.com/83S4Y7g.png" alt="Sodexo" class="h-8">
<img src="https://i.imgur.com/kM3T1fS.png" alt="VR Benef√≠cios" class="h-10">
</div>
<p class="font-semibold">Super Pizza &copy; 2025</p>
<p class="text-sm italic mt-2">"O Senhor √© o meu pastor e nada me faltar√°"</p>
</div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {

// BANCO DE DADOS E CUPONS
const data = {
    refrigerantesPromo: [
        { nome: &#39;Guaran√° Antarctica 1.5L (Gr√°tis)&#39;, precoAdicional: 0 }, { nome: &#39;Kuat 2L (Gr√°tis)&#39;, precoAdicional: 0 }, { nome: &#39;Pepsi 1.5L (Gr√°tis)&#39;, precoAdicional: 0 }, { nome: &#39;Coca-Cola 2L&#39;, precoAdicional: 12.00 }, { nome: &#39;Pepsi 2L&#39;, precoAdicional: 5.00 }, { nome: &#39;Guaran√° Antarctica 2L&#39;, precoAdicional: 5.00 }
    ],
    massaSizes: [
        { nome: &#39;400gr (serve 1 pessoa)&#39;, preco: 34.90 },
        { nome: &#39;1kg (serve at√© 3 pessoas)&#39;, preco: 59.90 }
    ],
    proteinasMassas: [
        { nome: &#39;Presunto&#39;, precoAdicional: 0 }, { nome: &#39;Carne Mo√≠da&#39;, precoAdicional: 0 }, { nome: &#39;Frango&#39;, precoAdicional: 0 }, { nome: &#39;Carne Seca&#39;, precoAdicional: 10.00 }, { nome: &#39;Camar√£o&#39;, precoAdicional: 10.00 }, { nome: &#39;Bacalhau&#39;, precoAdicional: 10.00 }
    ],
    promocoes: [
        { id: &#39;promo-combo-caixa&#39;, nome: &#39;Caixa Combo da Galera&#39;, desc: &#39;A festa completa! Uma caixa recheada com 4 X-Tudo, 5 past√©is sequinhos e uma por√ß√£o generosa de batata com cheddar e bacon.&#39;, preco: 90.00, preco_antigo: 120.00, needsFlavor: false, includesSoda: true },
        { id: &#39;promo-media&#39;, nome: &#39;Pizza M√©dia (32cm) Premiada&#39;, desc: &#39;Sua pizza m√©dia preferida com aquele precinho especial que s√≥ a gente faz. Escolha seus sabores e aproveite!&#39;, preco: 52.00, preco_antigo: 60.00, needsFlavor: true, pizzas: [{ type: &#39;salgada&#39;, size: &#39;M√©dia&#39;, maxSabores: 2 }] },
        { id: &#39;promo-familia&#39;, nome: &#39;Combo Fam√≠lia Feliz&#39;, desc: &#39;A combina√ß√£o perfeita para a fam√≠lia: 1 Pizza Fam√≠lia (at√© 2 sabores), 1 pizza doce individual de brinde e 1 refrigerante para completar a festa.&#39;, preco: 90.00, needsFlavor: true, pizzas: [{ type: &#39;salgada&#39;, size: &#39;Fam√≠lia&#39;, maxSabores: 2 }], includesSweet: true, includesSoda: true },
        { id: &#39;promo-gigante&#39;, nome: &#39;Combo Gigante Imbat√≠vel&#39;, desc: &#39;Para matar a fome de verdade! 1 Pizza Gigante (at√© 3 sabores), 1 pizza doce individual de brinde e 1 refrigerante geladinho.&#39;, preco: 110.00, preco_antigo: 120.00, needsFlavor: true, pizzas: [{ type: &#39;salgada&#39;, size: &#39;Gigante&#39;, maxSabores: 3 }], includesSweet: true, includesSoda: true },
        { id: &#39;promo-slim&#39;, nome: &#39;Promo Slim Gigante (47 cm)&#39;, desc: &#39;Sabor em tamanho gigante com um desconto incr√≠vel. Leve nossa pizza de 47cm e fa√ßa a festa em casa!&#39;, preco: 85.00, preco_antigo: 100.00, needsFlavor: true, pizzas: [{ type: &#39;salgada&#39;, size: &#39;Gigante&#39;, maxSabores: 3 }] },
        { id: &#39;promo-2medias&#39;, nome: &#39;Dose Dupla: 2 M√©dias + 1 Doce&#39;, desc: &#39;Duas vezes mais sabor! Pe√ßa 2 Pizzas M√©dias (at√© 2 sabores cada) e ganhe uma deliciosa pizza brot√£o doce para a sobremesa.&#39;, preco: 100.00, needsFlavor: true, pizzas: [{ type: &#39;salgada&#39;, size: &#39;M√©dia 1&#39;, maxSabores: 2 }, { type: &#39;salgada&#39;, size: &#39;M√©dia 2&#39;, maxSabores: 2 }], includesSweet: true }
    ],
    pizzas: {
        tamanhos: [ 
            { nome: &#39;Individual (26cm)&#39;, preco: 30.00, maxSabores: 2, sodasInclusas: 0 }, 
            { nome: &#39;M√©dia (32cm)&#39;, preco: 50.00, maxSabores: 2, sodasInclusas: 0 }, 
            { nome: &#39;Fam√≠lia (36cm)&#39;, preco: 75.00, maxSabores: 2, sodasInclusas: 1 }, 
            { nome: &#39;Gigante (47cm)&#39;, preco: 90.00, maxSabores: 3, sodasInclusas: 1 }, 
            { nome: &#39;Mega (70cm)&#39;, preco: 199.00, maxSabores: 5, sodasInclusas: 2 } 
        ],
        bordas: [ 
            { nome: &#39;Sem Borda Recheada&#39;, precoPadrao: 0.00, precoMega: 0.00, precoMedia: 0.00, precoIndividual: 0.00 }, 
            { nome: &#39;Catupiry&#39;, precoPadrao: 10.00, precoMega: 15.00, precoMedia: 7.00, precoIndividual: 5.00 }, 
            { nome: &#39;Cheddar&#39;, precoPadrao: 10.00, precoMega: 15.00, precoMedia: 7.00, precoIndividual: 5.00 }, 
            { nome: &#39;Cream Cheese&#39;, precoPadrao: 12.00, precoMega: 17.00, precoMedia: 9.00, precoIndividual: 7.00 }, 
            { nome: &#39;Goiabada&#39;, precoPadrao: 12.00, precoMega: 17.00, precoMedia: 9.00, precoIndividual: 7.00 }, 
            { nome: &#39;Doce de Leite&#39;, precoPadrao: 12.00, precoMega: 17.00, precoMedia: 9.00, precoIndividual: 7.00 } 
        ],
        saboresSalgados: [ &quot;Americana&quot;, &quot;Atum&quot;, &quot;Alho e √ìleo&quot;, &quot;Bacalhau&quot;, &quot;Benevento&quot;, &quot;Calabresa&quot;, &quot;Carioca&quot;, &quot;Capricciosa&quot;, &quot;Frango com Catupiry&quot;, &quot;Frango com Cheddar&quot;, &quot;La Pizza&quot;, &quot;Marguerita&quot;, &quot;Moda da Casa&quot;, &quot;Mussarela&quot;, &quot;Moda da Casa 2&quot;, &quot;Napolitana&quot;, &quot;Palmito&quot;, &quot;Pizza de Batata&quot;, &quot;Portuguesa&quot;, &quot;4 Queijos&quot;, &quot;Super Pizza&quot;, &quot;Siciliana&quot;, &quot;Tomate Seco&quot;, &quot;Tropicaliente&quot;, &quot;Lombo Canadense&quot;, &quot;Presunto&quot;, &quot;Salaminho&quot; ],
        saboresDoces: [ &quot;Banana com Canela&quot;, &quot;Cocada Cremosa&quot;, &quot;Prest√≠gio&quot;, &quot;Romeu &amp; Julieta&quot; ]
    },
    massas: [ { nome: &#39;Lasanha&#39; }, { nome: &#39;Capeletti&#39; }, { nome: &#39;Raviolli&#39; }, { nome: &#39;Espaguete&#39; }, { nome: &#39;Talharim&#39; }, { nome: &#39;Nhoque&#39; } ],
    hamburgueres: [
        { nome: &#39;X-Duplo&#39;, desc: &#39;Pra quem tem fome de le√£o! Duas carnes suculentas, dois ovos no ponto, queijo derretido, presunto, bacon crocante, calabresa, salada fresca e nosso irresist√≠vel molho Billy Jack.&#39;, preco: 17.00 },
        { nome: &#39;X-Tudo&#39;, desc: &#39;O campe√£o de vendas! Uma carne de hamb√∫rguer suculenta, ovo, queijo, presunto, bacon, calabresa e uma explos√£o de sabor com nosso molho Billy Jack e salada.&#39;, preco: 14.00 },
        { nome: &#39;X-Burguer Tropicaliente&#39;, desc: &#39;Um toque tropical no seu burguer! Carne, queijo, presunto, bacon, calabresa, e a combina√ß√£o perfeita de molho Billy Jack e batata palha.&#39;, preco: 12.00 },
        { nome: &#39;X-Egg&#39;, desc: &#39;Aquele cl√°ssico que n√£o tem erro: carne de primeira, queijo derretido e um ovo frito no capricho, com salada e molho Billy Jack.&#39;, preco: 10.00 },
        { nome: &#39;X-Burguer Kids&#39;, desc: &#39;O tamanho ideal para a fome dos pequenos! P√£o macio, carne saborosa, queijo, molho Billy Jack e batata palha pra completar a festa.&#39;, preco: 5.00 },
        { nome: &#39;X-Burguer Double Cheese&#39;, desc: &#39;Queijo em dobro, sabor em dobro! Uma carne suculenta, presunto, e uma avalanche de queijo catupiry e cheddar. Um sonho!&#39;, preco: 11.00 },
        { nome: &#39;X-Bacon Lover&#39;, desc: &#39;Aten√ß√£o, viciados em bacon! P√£o, carne, queijo e o dobro de bacon crocante e delicioso. Simplesmente imperd√≠vel.&#39;, preco: 11.00 }
    ],
    esfihas: {
        saboresComPreco: [ { nome: &#39;Carne ü•©&#39;, preco: 3.50, precoAdicional: 0 }, { nome: &#39;Queijo üßÄ&#39;, preco: 3.50, precoAdicional: 0 }, { nome: &#39;Calabresa&#39;, preco: 3.50, precoAdicional: 0 }, { nome: &#39;Presunto&#39;, preco: 3.50, precoAdicional: 0.50 }, { nome: &#39;Milho Verde üåΩ&#39;, preco: 3.50, precoAdicional: 0.50 }, { nome: &#39;Atum&#39;, preco: 4.00, precoAdicional: 1.00 }, { nome: &#39;Mista&#39;, preco: 4.00, precoAdicional: 1.00 }, { nome: &#39;Frango com Catupiry&#39;, preco: 4.50, precoAdicional: 1.50 }, { nome: &#39;Calabresa com Catupiry&#39;, preco: 4.50, precoAdicional: 1.50 }, { nome: &#39;Quatro Queijos üßÄüßÄüßÄüßÄ&#39;, preco: 4.50, precoAdicional: 1.50 }, { nome: &#39;Tomate Seco üçÖ&#39;, preco: 4.50, precoAdicional: 1.50 }, { nome: &#39;Portuguesa&#39;, preco: 4.50, precoAdicional: 1.50 }, { nome: &#39;Carne Seca&#39;, preco: 5.00, precoAdicional: 2.00 }, { nome: &#39;Bacalhau com Catupiry&#39;, preco: 5.00, precoAdicional: 2.00 }, { nome: &#39;Romeu &amp; Julieta ‚ù§Ô∏èüßÄ&#39;, preco: 3.50, precoAdicional: 0.50 }, { nome: &#39;Banana c/ Canela üçå&#39;, preco: 3.50, precoAdicional: 0.50 }, { nome: &#39;Choco Duo üç´&#39;, preco: 4.00, precoAdicional: 1.00 }, { nome: &#39;Prest√≠gio ü••üç´&#39;, preco: 4.00, precoAdicional: 1.00 }, { nome: &#39;Morango com Chocolate Branco üçì&#39;, preco: 4.50, precoAdicional: 1.50 }, { nome: &#39;Nutella üòç&#39;, preco: 5.00, precoAdicional: 2.00 } ],
        combos: [
            { id: &#39;esfiha-combo-20&#39;, nome: &#39;Combo 20 Esfihas + Refri 2L ü•§&#39;, desc: &#39;Monte seu combo com 20 esfihas e escolha os sabores que mais gosta!&#39;, preco: 50.00, quantidade: 20, includesSoda: true, isCustomizable: true },
            { id: &#39;esfiha-combo-15&#39;, nome: &#39;Combo 15 Esfihas&#39;, desc: &#39;Escolha 15 esfihas do seu jeito e aproveite nosso pre√ßo promocional!&#39;, preco: 40.00, quantidade: 15, isCustomizable: true },
            { id: &#39;esfiha-combo-30&#39;, nome: &#39;Combo 30 Esfihas&#39;, desc: &#39;Perfeito para a galera! Monte seu combo com 30 esfihas com seus sabores preferidos.&#39;, preco: 70.00, quantidade: 30, isCustomizable: true }
        ]
    },
    combos: [
        { nome: &#39;Combo 1&#39;, desc: &#39;4 X-Tudo + 25 salgadinhos + Batata com Cheddar e Bacon&#39;, preco: 85.00, includesSoda: true },
        { nome: &#39;Combo 2&#39;, desc: &#39;100 Salgadinhos fritos grandes e sortidos&#39;, preco: 70.00 },
        { nome: &#39;Combo 3&#39;, desc: &#39;25 Salgadinhos + Por√ß√£o de Calabresa + Batata com Cheddar&#39;, preco: 85.00, includesSoda: true },
        { nome: &#39;Combo 4&#39;, desc: &#39;4 X-Tudo + 25 Salgadinhos + Calabresa + An√©is de Cebola&#39;, preco: 85.00, includesSoda: true },
        { nome: &#39;Combo 5&#39;, desc: &#39;4 X-Tudo + 25 Salgadinhos + Batata com Cheddar e Bacon&#39;, preco: 85.00, includesSoda: true },
        { nome: &#39;Combo 6&#39;, desc: &#39;4 X-Tudo + Calabresa Acebolada + Batata Frita + An√©is de Cebola&#39;, preco: 85.00, includesSoda: true },
        { nome: &#39;Petisco Frango a Passarinho + Fritas&#39;, desc: &#39;Peda√ßos de frango crocantes com batata frita sequinha. Inclui um refrigerante!&#39;, preco: 60.00, includesSoda: true }
    ],
    bebidas: [ { nome: &#39;Refrigerante Lata 350ml ü•§&#39;, desc: &#39;Geladinho para acompanhar seu pedido. Escolha seu sabor preferido!&#39;, preco: 5.00 }, { nome: &#39;Refrigerante 2 Litros ü•§&#39;, desc: &#39;Para dividir com a galera! O acompanhamento perfeito para qualquer pizza ou combo.&#39;, preco: 12.00 } ]
};

const validCoupons = {
    &quot;APPSUPERPIZZA&quot;: { type: &quot;percentage&quot;, value: 10 } // 10% de desconto
};

// VARI√ÅVEIS GLOBAIS
let cart = [];
let appliedCoupon = null;

// ELEMENTOS DO DOM
const cartItemsContainer = document.getElementById(&#39;cartItems&#39;);
const cartSubtotalEl = document.getElementById(&#39;cartSubtotal&#39;);
const deliveryFeeContainer = document.getElementById(&#39;deliveryFeeContainer&#39;);
const cartDeliveryFeeEl = document.getElementById(&#39;cartDeliveryFee&#39;);
const cartTotalEl = document.getElementById(&#39;cartTotal&#39;);
const floatingCartButton = document.getElementById(&#39;floatingCartButton&#39;);
const floatingCartTotal = document.getElementById(&#39;floatingCartTotal&#39;);
const checkoutButton = document.getElementById(&#39;checkoutButton&#39;);
const checkoutModal = document.getElementById(&#39;checkoutModal&#39;);
const customerInfoForm = document.getElementById(&#39;customerInfoForm&#39;);
const cancelButton = document.getElementById(&#39;cancelButton&#39;);
const promoModal = document.getElementById(&#39;promoModal&#39;);
const promoForm = document.getElementById(&#39;promoForm&#39;);
const cancelPromo = document.getElementById(&#39;cancelPromo&#39;);
const massaModal = document.getElementById(&#39;massaModal&#39;);
const massaForm = document.getElementById(&#39;massaForm&#39;);
const cancelMassa = document.getElementById(&#39;cancelMassa&#39;);
const esfihaComboModal = document.getElementById(&#39;esfihaComboModal&#39;);
const esfihaComboForm = document.getElementById(&#39;esfihaComboForm&#39;);
const cancelEsfihaCombo = document.getElementById(&#39;cancelEsfihaCombo&#39;);
const couponInput = document.getElementById(&#39;couponInput&#39;);
const applyCouponBtn = document.getElementById(&#39;applyCouponBtn&#39;);
const couponMessage = document.getElementById(&#39;couponMessage&#39;);
const discountContainer = document.getElementById(&#39;discountContainer&#39;);
const discountAmountEl = document.getElementById(&#39;discountAmount&#39;);

// FUN√á√ïES
function formatCurrency(value) { return value.toFixed(2).replace(&#39;.&#39;, &#39;,&#39;); }

function updateCart() {
    cartItemsContainer.innerHTML = &#39;&#39;;
    const subtotal = cart.reduce((sum, cartItem) =&gt; sum + (cartItem.product.preco * cartItem.quantity), 0);
    let deliveryFee = 0;
    let discount = 0;

    // Calcula desconto
    if (appliedCoupon &amp;&amp; subtotal &gt; 0) {
        if (appliedCoupon.type === &#39;percentage&#39;) {
            discount = subtotal * (appliedCoupon.value / 100);
        }
        discountContainer.classList.remove(&#39;hidden&#39;);
        discountAmountEl.textContent = `- R$ ${formatCurrency(discount)}`;
    } else {
        discountContainer.classList.add(&#39;hidden&#39;);
    }

    // Calcula taxa de entrega
    const totalAfterDiscount = subtotal - discount;
    if (totalAfterDiscount &gt; 0 &amp;&amp; totalAfterDiscount &lt; 35.00) {
        deliveryFee = 8.00;
        deliveryFeeContainer.classList.remove(&#39;hidden&#39;);
        cartDeliveryFeeEl.textContent = `R$ ${formatCurrency(deliveryFee)}`;
    } else {
        deliveryFeeContainer.classList.add(&#39;hidden&#39;);
    }

    const finalTotal = totalAfterDiscount + deliveryFee;

    if (cart.length === 0) {
        cartItemsContainer.innerHTML = &#39;&lt;p id=&quot;emptyCart&quot; class=&quot;text-gray-500 text-center py-8&quot;&gt;Seu carrinho est√° vazio.&lt;/p&gt;&#39;;
        checkoutButton.disabled = true;
        checkoutButton.classList.add(&#39;opacity-50&#39;, &#39;cursor-not-allowed&#39;);
        floatingCartButton.classList.add(&#39;hidden&#39;);
        // Reseta cupom se o carrinho estiver vazio
        appliedCoupon = null;
        couponInput.value = &#39;&#39;;
        couponMessage.textContent = &#39;&#39;;
        couponInput.classList.remove(&#39;border-green-500&#39;, &#39;border-red-500&#39;);
        discountContainer.classList.add(&#39;hidden&#39;);
    } else {
        cart.forEach((cartItem, index) =&gt; {
            const itemEl = document.createElement(&#39;div&#39;);
            itemEl.className = &#39;flex justify-between items-center mb-3 p-2 bg-gray-50 rounded cart-item-enter&#39;;
            itemEl.innerHTML = `
                    &lt;div class=&quot;flex-grow pr-2&quot;&gt;
                        &lt;p class=&quot;font-bold text-gray-800&quot;&gt;${cartItem.product.nome}&lt;/p&gt;
                        ${cartItem.product.desc ? `&lt;p class=&quot;text-xs text-gray-600&quot;&gt;${cartItem.product.desc}&lt;/p&gt;` : &#39;&#39;}
                    &lt;/div&gt;
                    &lt;div class=&quot;flex items-center gap-3&quot;&gt;
                        &lt;div class=&quot;flex items-center gap-2 border rounded-md p-1&quot;&gt;
                            &lt;button class=&quot;qty-change-btn text-red-500&quot; data-index=&quot;${index}&quot; data-action=&quot;decrease&quot;&gt;&lt;i class=&quot;fas fa-minus-circle&quot;&gt;&lt;/i&gt;&lt;/button&gt;
                            &lt;span class=&quot;font-bold w-5 text-center&quot;&gt;${cartItem.quantity}&lt;/span&gt;
                            &lt;button class=&quot;qty-change-btn text-green-500&quot; data-index=&quot;${index}&quot; data-action=&quot;increase&quot;&gt;&lt;i class=&quot;fas fa-plus-circle&quot;&gt;&lt;/i&gt;&lt;/button&gt;
                        &lt;/div&gt;
                        &lt;span class=&quot;font-semibold text-gray-700 w-20 text-right&quot;&gt;R$ ${formatCurrency(cartItem.product.preco * cartItem.quantity)}&lt;/span&gt;
                    &lt;/div&gt;`;
            cartItemsContainer.appendChild(itemEl);
        });
        checkoutButton.disabled = false;
        checkoutButton.classList.remove(&#39;opacity-50&#39;, &#39;cursor-not-allowed&#39;);
        floatingCartButton.classList.remove(&#39;hidden&#39;);
    }

    cartSubtotalEl.textContent = `R$ ${formatCurrency(subtotal)}`;
    cartTotalEl.textContent = `R$ ${formatCurrency(finalTotal)}`;
    floatingCartTotal.textContent = `R$ ${formatCurrency(finalTotal)}`;
    
    document.querySelectorAll(&#39;.qty-change-btn&#39;).forEach(button =&gt; {
        button.addEventListener(&#39;click&#39;, (e) =&gt; {
            const index = parseInt(e.currentTarget.dataset.index);
            const action = e.currentTarget.dataset.action;
            if (action === &#39;increase&#39;) {
                cart[index].quantity++;
            } else if (action === &#39;decrease&#39;) {
                cart[index].quantity--;
                if (cart[index].quantity === 0) {
                    cart.splice(index, 1);
                }
            }
            updateCart();
        });
    });
}

function applyCoupon() {
    const code = couponInput.value.toUpperCase();
    if (validCoupons[code]) {
        appliedCoupon = { ...validCoupons[code], code: code };
        couponMessage.textContent = &#39;Cupom de 10% aplicado com sucesso!&#39;;
        couponMessage.classList.remove(&#39;text-red-500&#39;);
        couponMessage.classList.add(&#39;text-green-600&#39;);
        couponInput.classList.add(&#39;border-green-500&#39;);
        couponInput.classList.remove(&#39;border-red-500&#39;);
    } else {
        appliedCoupon = null;
        couponMessage.textContent = &#39;Cupom inv√°lido.&#39;;
        couponMessage.classList.add(&#39;text-red-500&#39;);
        couponMessage.classList.remove(&#39;text-green-600&#39;);
        couponInput.classList.add(&#39;border-red-500&#39;);
        couponInput.classList.remove(&#39;border-green-500&#39;);
    }
    updateCart();
}

function addToCart(item) {
    const itemIdentifier = item.nome + (item.desc || &#39;&#39;);
    const existingItem = cart.find(cartItem =&gt; cartItem.id === itemIdentifier);

    if (existingItem) {
        existingItem.quantity++;
    } else {
        cart.push({ product: item, quantity: 1, id: itemIdentifier });
    }
    updateCart();
}

const tabs = document.querySelectorAll(&#39;.tab-button&#39;);
const tabContents = document.querySelectorAll(&#39;.tab-content&#39;);
tabs.forEach(tab =&gt; {
    tab.addEventListener(&#39;click&#39;, (e) =&gt; {
        e.preventDefault();
        tabs.forEach(t =&gt; t.classList.remove(&#39;tab-active&#39;));
        tab.classList.add(&#39;tab-active&#39;);
        const target = document.getElementById(tab.dataset.tab);
        tabContents.forEach(content =&gt; content.classList.add(&#39;hidden&#39;));
        target.classList.remove(&#39;hidden&#39;);
    });
});

const pizzaSizesEl = document.getElementById(&#39;pizzaSizes&#39;);
const bordaRecheadaEl = document.getElementById(&#39;bordaRecheada&#39;);
const flavorsAccordion = document.getElementById(&#39;flavorsAccordion&#39;);
const flavorWarningEl = document.getElementById(&#39;flavorWarning&#39;);
const summarySizeEl = document.getElementById(&#39;summarySize&#39;);
const summaryBordaEl = document.getElementById(&#39;summaryBorda&#39;);
const summarySodaContainer = document.getElementById(&#39;summarySodaContainer&#39;);
const summarySoda = document.getElementById(&#39;summarySoda&#39;);
const summaryFlavorsEl = document.getElementById(&#39;summaryFlavors&#39;);
const pizzaTotalEl = document.getElementById(&#39;pizzaTotal&#39;);
const buildPizzaForm = document.getElementById(&#39;buildPizzaForm&#39;);
const sodaSelectionContainer = document.getElementById(&#39;sodaSelectionContainer&#39;);

function updateBordaOptions() {
    if (!pizzaSizesEl.value) return;
    const selectedSize = data.pizzas.tamanhos[pizzaSizesEl.value];
    bordaRecheadaEl.innerHTML = &#39;&#39;;
    data.pizzas.bordas.forEach((borda, index) =&gt; {
        let currentPrice = borda.precoPadrao;
        if (selectedSize.nome.includes(&#39;Mega&#39;)) {
            currentPrice = borda.precoMega;
        } else if (selectedSize.nome.includes(&#39;M√©dia&#39;)) {
            currentPrice = borda.precoMedia;
        } else if (selectedSize.nome.includes(&#39;Individual&#39;)) {
            currentPrice = borda.precoIndividual;
        }
        const priceText = currentPrice &gt; 0 ? `+ R$ ${formatCurrency(currentPrice)}` : &#39;&#39;;
        bordaRecheadaEl.innerHTML += `&lt;option value=&quot;${index}&quot;&gt;${borda.nome} ${priceText}&lt;/option&gt;`;
    });
}

function renderSodaSelection() {
    if (!pizzaSizesEl.value) return;
    const selectedSize = data.pizzas.tamanhos[pizzaSizesEl.value];
    sodaSelectionContainer.innerHTML = &#39;&#39;; 
    if (!selectedSize.sodasInclusas || selectedSize.sodasInclusas === 0) {
        updatePizzaSummary();
        return;
    }

    for (let i = 1; i &lt;= selectedSize.sodasInclusas; i++) {
        let sodaHtml = `&lt;div class=&quot;mb-4&quot;&gt;&lt;label class=&quot;block font-semibold mb-2 text-gray-700&quot;&gt;Escolha seu ${i}¬∫ Refrigerante:&lt;/label&gt;&lt;select name=&quot;pizza-soda&quot; class=&quot;pizza-soda-select w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500&quot;&gt;`;
        data.refrigerantesPromo.forEach(soda =&gt; {
            const priceText = soda.precoAdicional &gt; 0 ? ` (+ R$ ${formatCurrency(soda.precoAdicional)})` : &#39;&#39;;
            sodaHtml += `&lt;option value=&quot;${soda.nome}&quot; data-price=&quot;${soda.precoAdicional}&quot;&gt;${soda.nome}${priceText}&lt;/option&gt;`;
        });
        sodaHtml += `&lt;/select&gt;&lt;/div&gt;`;
        sodaSelectionContainer.innerHTML += sodaHtml;
    }

    document.querySelectorAll(&#39;.pizza-soda-select&#39;).forEach(select =&gt; {
        select.addEventListener(&#39;change&#39;, updatePizzaSummary);
    });
    updatePizzaSummary();
}

function populatePizzaOptions() {
    if (!pizzaSizesEl) return;
    pizzaSizesEl.innerHTML = &#39;&#39;; 
    flavorsAccordion.innerHTML = &#39;&#39;;

    data.pizzas.tamanhos.forEach((t, i) =&gt; {
        pizzaSizesEl.innerHTML += `&lt;option value=&quot;${i}&quot;&gt;${t.nome} (at√© ${t.maxSabores} ${t.maxSabores &gt; 1 ? &#39;sabores&#39; : &#39;sabor&#39;})&lt;/option&gt;`;
    });
    
    updateBordaOptions();

    const allFlavors = {
        &quot;Sabores Salgados üçï&quot;: data.pizzas.saboresSalgados,
        &quot;Sabores Doces üç∞&quot;: data.pizzas.saboresDoces
    };

    for (const category in allFlavors) {
        let accordionHtml = `
            &lt;div&gt;
                &lt;button type=&quot;button&quot; class=&quot;w-full flex justify-between items-center p-3 font-semibold text-left bg-gray-100 rounded-lg hover:bg-gray-200 focus:outline-none&quot; onclick=&quot;this.nextElementSibling.classList.toggle(&#39;hidden&#39;)&quot;&gt;
                    &lt;span&gt;${category}&lt;/span&gt;
                    &lt;i class=&quot;fas fa-chevron-down transform transition-transform&quot;&gt;&lt;/i&gt;
                &lt;/button&gt;
                &lt;div class=&quot;hidden pt-2 pb-4 px-2 space-y-2 grid grid-cols-1 sm:grid-cols-2 gap-3 custom-scroll rounded border-gray-300 bg-gray-50 shadow-inner&quot;&gt;`;
        
        allFlavors[category].sort().forEach(flavor =&gt; {
            accordionHtml += `&lt;label class=&quot;flex items-center p-2 rounded-md hover:bg-yellow-100 cursor-pointer&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;flavor-checkbox h-4 w-4 rounded border-gray-300 text-red-600 focus:ring-red-500&quot;&gt;&lt;span class=&quot;ml-2 text-gray-700&quot;&gt;${flavor}&lt;/span&gt;&lt;/label&gt;`;
        });

        accordionHtml += `&lt;/div&gt;&lt;/div&gt;`;
        flavorsAccordion.innerHTML += accordionHtml;
    }
}

function updatePizzaSummary() {
    if (!buildPizzaForm) return;
    const selectedSize = data.pizzas.tamanhos[pizzaSizesEl.value];
    const selectedBorda = data.pizzas.bordas[bordaRecheadaEl.value];
    
    summarySizeEl.textContent = selectedSize.nome;
    summaryBordaEl.textContent = selectedBorda.nome;
    
    let selectedFlavors = Array.from(document.querySelectorAll(&#39;#flavorsAccordion .flavor-checkbox:checked&#39;)).map(cb =&gt; cb.nextElementSibling.textContent);
    if (selectedFlavors.length &gt; selectedSize.maxSabores) {
        flavorWarningEl.textContent = `Para este tamanho, voc√™ pode escolher no m√°ximo ${selectedSize.maxSabores} ${selectedSize.maxSabores &gt; 1 ? &#39;sabores&#39; : &#39;sabor&#39;}!`;
        flavorWarningEl.classList.remove(&#39;hidden&#39;);
        const lastChecked = Array.from(document.querySelectorAll(&#39;#flavorsAccordion .flavor-checkbox:checked&#39;)).pop();
        if (lastChecked) lastChecked.checked = false;
        selectedFlavors = Array.from(document.querySelectorAll(&#39;#flavorsAccordion .flavor-checkbox:checked&#39;)).map(cb =&gt; cb.nextElementSibling.textContent);
    } else {
        flavorWarningEl.classList.add(&#39;hidden&#39;);
    }
    summaryFlavorsEl.innerHTML = selectedFlavors.length &gt; 0 ? selectedFlavors.map(f =&gt; `&lt;li&gt;${f}&lt;/li&gt;`).join(&#39;&#39;) : `&lt;li&gt;Selecione um sabor...&lt;/li&gt;`;
    
    let total = selectedSize.preco;
    let currentBordaPrice = selectedBorda.precoPadrao;
    if (selectedSize.nome.includes(&#39;Mega&#39;)) {
        currentBordaPrice = selectedBorda.precoMega;
    } else if (selectedSize.nome.includes(&#39;M√©dia&#39;)) {
        currentBordaPrice = selectedBorda.precoMedia;
    } else if (selectedSize.nome.includes(&#39;Individual&#39;)) {
        currentBordaPrice = selectedBorda.precoIndividual;
    }
    total += currentBordaPrice;

    let sodaPrice = 0;
    const selectedSodas = [];
    document.querySelectorAll(&#39;.pizza-soda-select&#39;).forEach(select =&gt; {
        const selectedOption = select.options[select.selectedIndex];
        sodaPrice += parseFloat(selectedOption.dataset.price);
        selectedSodas.push(selectedOption.value);
    });

    if (selectedSodas.length &gt; 0) {
        summarySodaContainer.classList.remove(&#39;hidden&#39;);
        summarySoda.textContent = selectedSodas.join(&#39;, &#39;);
    } else {
        summarySodaContainer.classList.add(&#39;hidden&#39;);
    }

    total += sodaPrice;
    pizzaTotalEl.textContent = formatCurrency(total);
}

if (buildPizzaForm) {
    buildPizzaForm.addEventListener(&#39;submit&#39;, (e) =&gt; {
        e.preventDefault();
        const selectedSize = data.pizzas.tamanhos[pizzaSizesEl.value];
        const selectedBorda = data.pizzas.bordas[bordaRecheadaEl.value];
        const selectedFlavors = Array.from(document.querySelectorAll(&#39;#flavorsAccordion .flavor-checkbox:checked&#39;)).map(cb =&gt; cb.nextElementSibling.textContent);
        
        if (selectedFlavors.length === 0) return alert(&#39;Por favor, escolha pelo menos um sabor!&#39;);

        let description = [];
        let finalPrice = selectedSize.preco;
        
        let currentBordaPrice = selectedBorda.precoPadrao;
        if (selectedSize.nome.includes(&#39;Mega&#39;)) {
            currentBordaPrice = selectedBorda.precoMega;
        } else if (selectedSize.nome.includes(&#39;M√©dia&#39;)) {
            currentBordaPrice = selectedBorda.precoMedia;
        } else if (selectedSize.nome.includes(&#39;Individual&#39;)) {
            currentBordaPrice = selectedBorda.precoIndividual;
        }
        finalPrice += currentBordaPrice;
        
        if (currentBordaPrice &gt; 0) {
            description.push(`Borda: ${selectedBorda.nome}`);
        }

        const selectedSodas = [];
        document.querySelectorAll(&#39;.pizza-soda-select&#39;).forEach(select =&gt; {
            const selectedOption = select.options[select.selectedIndex];
            finalPrice += parseFloat(selectedOption.dataset.price);
            selectedSodas.push(selectedOption.value);
        });
        if(selectedSodas.length &gt; 0) {
             description.push(`Bebida(s): ${selectedSodas.join(&#39;, &#39;)}`);
        }

        addToCart({ 
            nome: `Pizza ${selectedSize.nome.split(&#39; &#39;)[0]} (${selectedFlavors.join(&#39;, &#39;)})`, 
            desc: description.join(&#39; | &#39;), 
            preco: finalPrice 
        });

        buildPizzaForm.reset();
        document.querySelectorAll(&#39;.flavor-checkbox&#39;).forEach(cb =&gt; cb.checked = false);
        renderSodaSelection();
        updatePizzaSummary();
    });
    pizzaSizesEl.addEventListener(&#39;change&#39;, () =&gt; {
        updateBordaOptions();
        renderSodaSelection();
    });
    bordaRecheadaEl.addEventListener(&#39;change&#39;, updatePizzaSummary);
    flavorsAccordion.addEventListener(&#39;change&#39;, updatePizzaSummary);
}

function createMenuSection(title, items, targetId) {
    const section = document.getElementById(targetId);
    if (!section) return;
    let content = `&lt;h2 class=&quot;text-3xl font-bold text-red-700 mb-6 border-l-4 border-red-500 pl-3&quot;&gt;${title}&lt;/h2&gt;&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6&quot;&gt;`;
    items.forEach(item =&gt; {
        const priceHtml = item.preco_antigo ? `&lt;div class=&quot;text-right&quot;&gt;&lt;span class=&quot;text-xl font-bold text-red-600&quot;&gt;R$ ${formatCurrency(item.preco)}&lt;/span&gt;&lt;s class=&quot;text-gray-500 text-md ml-2&quot;&gt;R$ ${formatCurrency(item.preco_antigo)}&lt;/s&gt;&lt;/div&gt;` : (item.preco !== undefined ? `&lt;span class=&quot;text-xl font-bold text-red-600&quot;&gt;R$ ${formatCurrency(item.preco)}&lt;/span&gt;` : &#39;&#39;);
        
        let buttonClass = &#39;add-to-cart-btn&#39;;
        if (item.needsFlavor || (item.includesSoda &amp;&amp; targetId !== &#39;combos&#39;)) {
            buttonClass = &#39;open-promo-modal-btn&#39;;
        } else if (targetId === &#39;massas&#39;) {
            buttonClass = &#39;open-massa-modal-btn&#39;;
        } else if (item.isCustomizable) { // For esfiha combos
            buttonClass = &#39;open-esfiha-combo-modal-btn&#39;;
        } else if (item.includesSoda &amp;&amp; targetId === &#39;combos&#39;) {
            buttonClass = &#39;open-promo-modal-btn&#39;
        }
        
        content += `&lt;div class=&quot;bg-white rounded-lg shadow-lg flex flex-col overflow-hidden&quot;&gt;
                      &lt;div class=&quot;p-5 flex flex-col flex-grow&quot;&gt;
                        &lt;div class=&quot;flex-grow&quot;&gt;
                          &lt;h4 class=&quot;text-xl font-bold text-gray-800&quot;&gt;${item.nome}&lt;/h4&gt;
                          ${item.desc ? `&lt;p class=&quot;text-gray-600 my-2 text-sm&quot;&gt;${item.desc}&lt;/p&gt;` : &#39;&#39;}
                        &lt;/div&gt;
                        &lt;div class=&quot;mt-4 flex justify-between items-center&quot;&gt;
                          ${priceHtml}
                          &lt;button class=&quot;${buttonClass} bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-transform duration-100 active:scale-95&quot; data-item=&#39;${JSON.stringify(item)}&#39;&gt;
                              Quero esse!
                          &lt;/button&gt;
                        &lt;/div&gt;
                      &lt;/div&gt;
                     &lt;/div&gt;`;
    });
    section.innerHTML = content + &#39;&lt;/div&gt;&#39;;
}

function createEsfihasSection() {
    const section = document.getElementById(&#39;esfihas&#39;);
    if (!section) return;
    let content = `&lt;h2 class=&quot;text-3xl font-bold text-red-700 mb-6 border-l-4 border-red-500 pl-3&quot;&gt;Nossas Esfihas Deliciosas ü•ü&lt;/h2&gt;&lt;h3 class=&quot;text-2xl font-semibold text-gray-800 mb-4&quot;&gt;Combos Prontos&lt;/h3&gt;&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-10&quot;&gt;`;
    data.esfihas.combos.forEach(item =&gt; {
          const buttonClass = item.isCustomizable ? &#39;open-esfiha-combo-modal-btn&#39; : &#39;add-to-cart-btn&#39;;
          content += `&lt;div class=&quot;bg-white rounded-lg shadow-lg flex flex-col overflow-hidden&quot;&gt;
                          &lt;div class=&quot;p-5 flex flex-col flex-grow&quot;&gt;
                            &lt;div class=&quot;flex-grow&quot;&gt;
                              &lt;h4 class=&quot;text-xl font-bold text-gray-800&quot;&gt;${item.nome}&lt;/h4&gt;
                              &lt;p class=&quot;text-gray-600 my-2 text-sm&quot;&gt;${item.desc}&lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&quot;mt-4 flex justify-between items-center&quot;&gt;
                              &lt;span class=&quot;text-xl font-bold text-red-600&quot;&gt;R$ ${formatCurrency(item.preco)}&lt;/span&gt;
                              &lt;button class=&quot;${buttonClass} bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-transform duration-100 active:scale-95&quot; data-item=&#39;${JSON.stringify(item)}&#39;&gt;
                                  Quero esse!
                              &lt;/button&gt;
                            &lt;/div&gt;
                          &lt;/div&gt;
                        &lt;/div&gt;`;
    });
    content += &#39;&lt;/div&gt;&#39;
    content += `&lt;h3 class=&quot;text-2xl font-semibold text-gray-800 mb-4 mt-12 border-t pt-8&quot;&gt;Ou pe√ßa por unidade&lt;/h3&gt;&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6&quot;&gt;`;
    data.esfihas.saboresComPreco.forEach(item =&gt; {
        content += `&lt;div class=&quot;bg-white rounded-lg shadow-lg p-5 flex flex-col&quot;&gt;
                      &lt;div class=&quot;flex-grow&quot;&gt;
                        &lt;h4 class=&quot;text-xl font-bold text-gray-800&quot;&gt;${item.nome}&lt;/h4&gt;
                      &lt;/div&gt;
                      &lt;div class=&quot;mt-4 flex justify-between items-center&quot;&gt;
                        &lt;span class=&quot;text-xl font-bold text-red-600&quot;&gt;R$ ${formatCurrency(item.preco)}&lt;/span&gt;
                        &lt;button class=&quot;add-to-cart-btn bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-transform duration-100 active:scale-95&quot; data-item=&#39;${JSON.stringify(item)}&#39;&gt;
                            Quero essa!
                        &lt;/button&gt;
                      &lt;/div&gt;
                    &lt;/div&gt;`;
    });
    section.innerHTML = content + &#39;&lt;/div&gt;&#39;;
}

function createContatoSection(){
    const section = document.getElementById(&#39;contato&#39;);
    if (!section) return;
    section.innerHTML = `&lt;h2 class=&quot;text-3xl font-bold text-red-700 mb-6 border-l-4 border-red-500 pl-3&quot;&gt;Fale Conosco e Hor√°rios üìû&lt;/h2&gt;&lt;div class=&quot;bg-white rounded-lg shadow-lg p-8 text-center&quot;&gt;&lt;i class=&quot;fab fa-whatsapp text-6xl text-green-500 mb-4&quot;&gt;&lt;/i&gt;&lt;h3 class=&quot;text-4xl font-bold text-gray-800 mb-2&quot;&gt;98141-7594&lt;/h3&gt;&lt;p class=&quot;text-lg text-gray-600 mb-6&quot;&gt;Pe√ßa pelo WhatsApp ou ligue para n√≥s!&lt;/p&gt;&lt;div class=&quot;border-t border-b border-gray-200 py-6 my-6&quot;&gt;&lt;i class=&quot;fas fa-clock text-4xl text-red-500 mb-3&quot;&gt;&lt;/i&gt;&lt;h4 class=&quot;text-2xl font-semibold text-gray-800&quot;&gt;Hor√°rio de Funcionamento&lt;/h4&gt;&lt;p class=&quot;text-lg text-gray-700 mt-2&quot;&gt;Todos os dias, das 18:00h √† 00:00h&lt;/p&gt;&lt;/div&gt;&lt;p class=&quot;text-gray-500&quot;&gt;Super Pizza - Sempre perto de voc√™ com o melhor sabor!&lt;/p&gt;&lt;/div&gt;`;
}

function openPromoModal(promoItem) {
    const selectionContainer = document.getElementById(&#39;promoSelectionContainer&#39;);
    selectionContainer.innerHTML = &#39;&#39;;
    document.getElementById(&#39;promoModalTitle&#39;).textContent = `Personalize: ${promoItem.nome}`;
    
    if (promoItem.needsFlavor) {
        promoItem.pizzas.forEach((pizza, index) =&gt; {
            let pizzaHtml = `&lt;div class=&quot;border p-4 rounded-lg&quot;&gt;&lt;h4 class=&quot;font-bold text-lg mb-2&quot;&gt;üçï Pizza ${pizza.size} (at√© ${pizza.maxSabores} sabores)&lt;/h4&gt;&lt;div class=&quot;grid grid-cols-2 md:grid-cols-3 gap-2 promo-flavor-group&quot; data-max-flavors=&quot;${pizza.maxSabores}&quot; data-pizza-index=&quot;${index}&quot;&gt;`;
            data.pizzas.saboresSalgados.sort().forEach(flavor =&gt; {
                pizzaHtml += `&lt;label class=&quot;flex items-center p-2 rounded-md hover:bg-yellow-100 cursor-pointer&quot;&gt;&lt;input type=&quot;checkbox&quot; class=&quot;promo-flavor-checkbox h-4 w-4 rounded border-gray-300 text-red-600 focus:ring-red-500&quot;&gt;&lt;span class=&quot;ml-2 text-sm text-gray-700&quot;&gt;${flavor}&lt;/span&gt;&lt;/label&gt;`;
            });
            pizzaHtml += `&lt;/div&gt;&lt;p class=&quot;text-red-600 text-sm mt-2 hidden&quot; id=&quot;promo-warning-${index}&quot;&gt;&lt;/p&gt;&lt;/div&gt;`;
            selectionContainer.innerHTML += pizzaHtml;
        });
    }

    if (promoItem.includesSweet) {
        let sweetPizzaHtml = `&lt;div class=&quot;border p-4 rounded-lg&quot;&gt;&lt;h4 class=&quot;font-bold text-lg mb-2&quot;&gt;üç∞ Pizza Doce Individual (Gr√°tis)&lt;/h4&gt;&lt;div class=&quot;grid grid-cols-2 md:grid-cols-3 gap-2&quot;&gt;`;
        data.pizzas.saboresDoces.sort().forEach(flavor =&gt; {
            sweetPizzaHtml += `&lt;label class=&quot;flex items-center p-2 rounded-md hover:bg-yellow-100 cursor-pointer&quot;&gt;&lt;input type=&quot;radio&quot; name=&quot;sweet-flavor&quot; value=&quot;${flavor}&quot; class=&quot;h-4 w-4 border-gray-300 text-red-600 focus:ring-red-500&quot;&gt;&lt;span class=&quot;ml-2 text-sm text-gray-700&quot;&gt;${flavor}&lt;/span&gt;&lt;/label&gt;`;
        });
        sweetPizzaHtml += `&lt;/div&gt;&lt;/div&gt;`;
        selectionContainer.innerHTML += sweetPizzaHtml;
    }

    if (promoItem.includesSoda) {
        let sodaHtml = `&lt;div class=&quot;border p-4 rounded-lg&quot;&gt;&lt;h4 class=&quot;font-bold text-lg mb-2&quot;&gt;ü•§ Escolha seu Refrigerante&lt;/h4&gt;&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-2&quot;&gt;`;
        data.refrigerantesPromo.forEach((soda, index) =&gt; {
            const priceText = soda.precoAdicional &gt; 0 ? ` (+ R$ ${formatCurrency(soda.precoAdicional)})` : &#39;&#39;;
            sodaHtml += `&lt;label class=&quot;flex items-center p-2 rounded-md hover:bg-yellow-100 cursor-pointer&quot;&gt;&lt;input type=&quot;radio&quot; name=&quot;promo-soda&quot; value=&quot;${soda.nome}&quot; data-price=&quot;${soda.precoAdicional}&quot; class=&quot;h-4 w-4 border-gray-300 text-red-600 focus:ring-red-500&quot; ${index === 0 ? &#39;checked&#39; : &#39;&#39;}&gt;&lt;span class=&quot;ml-2 text-sm text-gray-700&quot;&gt;${soda.nome}${priceText}&lt;/span&gt;&lt;/label&gt;`;
        });
        sodaHtml += `&lt;/div&gt;&lt;/div&gt;`;
        selectionContainer.innerHTML += sodaHtml;
    }
    
    promoModal.classList.remove(&#39;hidden&#39;);
    promoForm.dataset.promoItem = JSON.stringify(promoItem);
}

function openMassaModal(massaItem) {
    const selectionContainer = document.getElementById(&#39;massaSelectionContainer&#39;);
    const massaTotalEl = document.getElementById(&#39;massaTotal&#39;);
    document.getElementById(&#39;massaModalTitle&#39;).textContent = `Personalize: ${massaItem.nome}`;
    
    let content = `&lt;div class=&quot;border p-4 rounded-lg&quot;&gt;&lt;h4 class=&quot;font-bold text-lg mb-2&quot;&gt;1. Escolha o Tamanho&lt;/h4&gt;&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-2&quot; id=&quot;massa-size-group&quot;&gt;`;
    data.massaSizes.forEach((size, index) =&gt; {
          content += `&lt;label class=&quot;flex items-center p-2 rounded-md hover:bg-yellow-100 cursor-pointer&quot;&gt;&lt;input type=&quot;radio&quot; name=&quot;massa-size&quot; value=&quot;${index}&quot; class=&quot;h-4 w-4 border-gray-300 text-red-600 focus:ring-red-500&quot; ${index === 0 ? &#39;checked&#39; : &#39;&#39;}&gt;&lt;span class=&quot;ml-2 text-sm text-gray-700&quot;&gt;${size.nome}&lt;/span&gt;&lt;/label&gt;`;
    });
    content += `&lt;/div&gt;&lt;/div&gt;`;

    content += `&lt;div class=&quot;border p-4 rounded-lg&quot;&gt;&lt;h4 class=&quot;font-bold text-lg mb-2&quot;&gt;2. Escolha o Molho&lt;/h4&gt;&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-2&quot;&gt;`;
    content += `&lt;label class=&quot;flex items-center p-2 rounded-md hover:bg-yellow-100 cursor-pointer&quot;&gt;&lt;input type=&quot;radio&quot; name=&quot;massa-molho&quot; value=&quot;Molho de Tomate&quot; class=&quot;h-4 w-4 border-gray-300 text-red-600 focus:ring-red-500&quot; checked&gt;&lt;span class=&quot;ml-2 text-sm text-gray-700&quot;&gt;Molho de Tomate&lt;/span&gt;&lt;/label&gt;`;
    content += `&lt;label class=&quot;flex items-center p-2 rounded-md hover:bg-yellow-100 cursor-pointer&quot;&gt;&lt;input type=&quot;radio&quot; name=&quot;massa-molho&quot; value=&quot;Molho Branco&quot; class=&quot;h-4 w-4 border-gray-300 text-red-600 focus:ring-red-500&quot;&gt;&lt;span class=&quot;ml-2 text-sm text-gray-700&quot;&gt;Molho Branco&lt;/span&gt;&lt;/label&gt;`;
    content += `&lt;/div&gt;&lt;/div&gt;`;
    
    content += `&lt;div class=&quot;border p-4 rounded-lg&quot;&gt;&lt;h4 class=&quot;font-bold text-lg mb-2&quot;&gt;3. Escolha a Prote√≠na&lt;/h4&gt;&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-2&quot; id=&quot;massa-proteina-group&quot;&gt;`;
    data.proteinasMassas.forEach((proteina, index) =&gt; {
        const priceText = proteina.precoAdicional &gt; 0 ? ` (+ R$ ${formatCurrency(proteina.precoAdicional)})` : &#39;&#39;;
        content += `&lt;label class=&quot;flex items-center p-2 rounded-md hover:bg-yellow-100 cursor-pointer&quot;&gt;&lt;input type=&quot;radio&quot; name=&quot;massa-proteina&quot; value=&quot;${index}&quot; class=&quot;h-4 w-4 border-gray-300 text-red-600 focus:ring-red-500&quot; ${index === 0 ? &#39;checked&#39; : &#39;&#39;}&gt;&lt;span class=&quot;ml-2 text-sm text-gray-700&quot;&gt;${proteina.nome}${priceText}&lt;/span&gt;&lt;/label&gt;`;
    });
    content += `&lt;/div&gt;&lt;/div&gt;`;
    
    selectionContainer.innerHTML = content;
    
    const updateMassaTotal = () =&gt; {
        const selectedSizeIndex = document.querySelector(&#39;#massaSelectionContainer input[name=&quot;massa-size&quot;]:checked&#39;).value;
        const selectedProteinaIndex = document.querySelector(&#39;#massaSelectionContainer input[name=&quot;massa-proteina&quot;]:checked&#39;).value;
        const basePrice = data.massaSizes[selectedSizeIndex].preco;
        const proteinaPrice = data.proteinasMassas[selectedProteinaIndex].precoAdicional;
        massaTotalEl.textContent = formatCurrency(basePrice + proteinaPrice);
    };
    
    selectionContainer.addEventListener(&#39;change&#39;, updateMassaTotal);
    updateMassaTotal();

    massaModal.classList.remove(&#39;hidden&#39;);
    massaForm.dataset.massaItem = JSON.stringify(massaItem);
}

function openEsfihaComboModal(comboItem) {
    const selectionContainer = document.getElementById(&#39;esfihaComboSelectionContainer&#39;);
    const sodaContainer = document.getElementById(&#39;esfihaComboSodaContainer&#39;);
    const modalTitle = document.getElementById(&#39;esfihaComboModalTitle&#39;);
    const totalQtyEl = document.getElementById(&#39;esfihaTotalQty&#39;);
    const counterEl = document.getElementById(&#39;esfihaCounter&#39;);
    
    modalTitle.textContent = `Personalize: ${comboItem.nome}`;
    totalQtyEl.textContent = comboItem.quantidade;
    counterEl.textContent = &#39;0&#39;;
    selectionContainer.innerHTML = &#39;&#39;;
    sodaContainer.innerHTML = &#39;&#39;;

    let content = `&lt;div class=&quot;border p-4 rounded-lg&quot;&gt;&lt;h4 class=&quot;font-bold text-lg mb-2&quot;&gt;Escolha os sabores (Total: ${comboItem.quantidade})&lt;/h4&gt;&lt;div class=&quot;space-y-3&quot;&gt;`;
    data.esfihas.saboresComPreco.forEach((esfiha, index) =&gt; {
        const priceText = esfiha.precoAdicional &gt; 0 ? ` (+ R$ ${formatCurrency(esfiha.precoAdicional)})` : &#39;&#39;;
        content += `
            &lt;div class=&quot;flex justify-between items-center p-2 rounded-md bg-gray-50&quot;&gt;
                &lt;span class=&quot;text-sm text-gray-700&quot;&gt;${esfiha.nome}${priceText}&lt;/span&gt;
                &lt;div class=&quot;flex items-center gap-2 border rounded-md p-1&quot;&gt;
                    &lt;button type=&quot;button&quot; class=&quot;esfiha-qty-change text-red-500&quot; data-index=&quot;${index}&quot; data-action=&quot;decrease&quot;&gt;&lt;i class=&quot;fas fa-minus-circle&quot;&gt;&lt;/i&gt;&lt;/button&gt;
                    &lt;input type=&quot;number&quot; readonly value=&quot;0&quot; min=&quot;0&quot; class=&quot;esfiha-qty-input w-8 text-center bg-transparent font-bold&quot; data-index=&quot;${index}&quot;&gt;
                    &lt;button type=&quot;button&quot; class=&quot;esfiha-qty-change text-green-500&quot; data-index=&quot;${index}&quot; data-action=&quot;increase&quot;&gt;&lt;i class=&quot;fas fa-plus-circle&quot;&gt;&lt;/i&gt;&lt;/button&gt;
                &lt;/div&gt;
            &lt;/div&gt;`;
    });
    content += `&lt;/div&gt;&lt;/div&gt;`;
    selectionContainer.innerHTML = content;
    
    if (comboItem.includesSoda) {
        let sodaHtml = `&lt;div class=&quot;border p-4 rounded-lg&quot;&gt;&lt;h4 class=&quot;font-bold text-lg mb-2&quot;&gt;ü•§ Escolha seu Refrigerante&lt;/h4&gt;&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-2&quot;&gt;`;
        data.refrigerantesPromo.forEach((soda, index) =&gt; {
            const priceText = soda.precoAdicional &gt; 0 ? ` (+ R$ ${formatCurrency(soda.precoAdicional)})` : &#39;&#39;;
            sodaHtml += `&lt;label class=&quot;flex items-center p-2 rounded-md hover:bg-yellow-100 cursor-pointer&quot;&gt;&lt;input type=&quot;radio&quot; name=&quot;esfiha-combo-soda&quot; value=&quot;${soda.nome}&quot; data-price=&quot;${soda.precoAdicional}&quot; class=&quot;h-4 w-4 border-gray-300 text-red-600 focus:ring-red-500&quot; ${index === 0 ? &#39;checked&#39; : &#39;&#39;}&gt;&lt;span class=&quot;ml-2 text-sm text-gray-700&quot;&gt;${soda.nome}${priceText}&lt;/span&gt;&lt;/label&gt;`;
        });
        sodaHtml += `&lt;/div&gt;&lt;/div&gt;`;
        sodaContainer.innerHTML = sodaHtml;
    }

    const updateEsfihaComboTotal = () =&gt; {
        let total = comboItem.preco;
        let currentCount = 0;
        
        document.querySelectorAll(&#39;.esfiha-qty-input&#39;).forEach(input =&gt; {
            const qty = parseInt(input.value);
            currentCount += qty;
            if(qty &gt; 0) {
                const esfihaIndex = parseInt(input.dataset.index);
                total += data.esfihas.saboresComPreco[esfihaIndex].precoAdicional * qty;
            }
        });

        if (comboItem.includesSoda) {
             const selectedSoda = document.querySelector(&#39;input[name=&quot;esfiha-combo-soda&quot;]:checked&#39;);
             if(selectedSoda) total += parseFloat(selectedSoda.dataset.price);
        }

        counterEl.textContent = currentCount;
        document.getElementById(&#39;esfihaComboTotal&#39;).textContent = formatCurrency(total);
        const warningEl = document.getElementById(&#39;esfihaWarning&#39;);
        if (currentCount &gt; comboItem.quantidade) {
             warningEl.textContent = `Voc√™ selecionou ${currentCount} esfihas, o limite para este combo √© ${comboItem.quantidade}.`;
             warningEl.classList.remove(&#39;hidden&#39;);
        } else {
             warningEl.classList.add(&#39;hidden&#39;);
        }
    };

    selectionContainer.addEventListener(&#39;click&#39;, (e) =&gt; {
          const btn = e.target.closest(&#39;.esfiha-qty-change&#39;);
          if(!btn) return;
          
          const action = btn.dataset.action;
          const index = btn.dataset.index;
          const input = document.querySelector(`.esfiha-qty-input[data-index=&quot;${index}&quot;]`);
          let currentValue = parseInt(input.value);
          
          if(action === &#39;increase&#39;) {
               input.value = currentValue + 1;
          } else if (action === &#39;decrease&#39; &amp;&amp; currentValue &gt; 0) {
               input.value = currentValue - 1;
          }
          updateEsfihaComboTotal();
    });

    if(sodaContainer) {
        sodaContainer.addEventListener(&#39;change&#39;, updateEsfihaComboTotal);
    }

    updateEsfihaComboTotal();
    esfihaComboModal.classList.remove(&#39;hidden&#39;);
    esfihaComboForm.dataset.comboItem = JSON.stringify(comboItem);
}

document.body.addEventListener(&#39;change&#39;, e =&gt; {
    if (e.target.classList.contains(&#39;promo-flavor-checkbox&#39;)) {
        const group = e.target.closest(&#39;.promo-flavor-group&#39;);
        if (!group) return;
        const maxFlavors = parseInt(group.dataset.maxFlavors);
        const pizzaIndex = group.dataset.pizzaIndex;
        const warningEl = document.getElementById(`promo-warning-${pizzaIndex}`);
        const checkedBoxes = group.querySelectorAll(&#39;.promo-flavor-checkbox:checked&#39;);

        if (checkedBoxes.length &gt; maxFlavors) {
            e.target.checked = false;
            warningEl.textContent = `M√°ximo de ${maxFlavors} sabores para esta pizza.`;
            warningEl.classList.remove(&#39;hidden&#39;);
        } else {
            warningEl.classList.add(&#39;hidden&#39;);
        }
    }
});

promoForm.addEventListener(&#39;submit&#39;, e =&gt; {
    e.preventDefault();
    const promoItem = JSON.parse(e.currentTarget.dataset.promoItem);
    let description = [];
    let allSelectionsMade = true;
    let finalPrice = promoItem.preco;

    if (promoItem.needsFlavor) {
        promoItem.pizzas.forEach((pizza, index) =&gt; {
            const group = document.querySelector(`#promoSelectionContainer .promo-flavor-group[data-pizza-index=&quot;${index}&quot;]`);
            const selectedFlavors = Array.from(group.querySelectorAll(&#39;.promo-flavor-checkbox:checked&#39;)).map(cb =&gt; cb.nextElementSibling.textContent);
            if (selectedFlavors.length === 0) allSelectionsMade = false;
            description.push(`Pizza ${pizza.size}: ${selectedFlavors.join(&#39;, &#39;)}`);
        });
    }

    if (promoItem.includesSweet) {
        const selectedSweet = document.querySelector(&#39;input[name=&quot;sweet-flavor&quot;]:checked&#39;);
        if (selectedSweet) {
            description.push(`Pizza Doce: ${selectedSweet.value}`);
        } else {
            allSelectionsMade = false; 
        }
    }

    if (promoItem.includesSoda) {
        const selectedSoda = document.querySelector(&#39;input[name=&quot;promo-soda&quot;]:checked&#39;);
        if (selectedSoda) {
            description.push(`Bebida: ${selectedSoda.value}`);
            finalPrice += parseFloat(selectedSoda.dataset.price);
        } else {
            allSelectionsMade = false;
        }
    }

    if (!allSelectionsMade) {
        return alert(&#39;Por favor, fa√ßa todas as sele√ß√µes necess√°rias para a promo√ß√£o.&#39;);
    }

    addToCart({
        nome: promoItem.nome,
        desc: description.join(&#39; | &#39;),
        preco: finalPrice
    });
    promoModal.classList.add(&#39;hidden&#39;);
});

massaForm.addEventListener(&#39;submit&#39;, e =&gt; {
    e.preventDefault();
    const massaItem = JSON.parse(e.currentTarget.dataset.massaItem);
    
    const selectedSizeIndex = document.querySelector(&#39;input[name=&quot;massa-size&quot;]:checked&#39;).value;
    const selectedSize = data.massaSizes[selectedSizeIndex];
    const selectedMolho = document.querySelector(&#39;input[name=&quot;massa-molho&quot;]:checked&#39;);
    const selectedProteinaIndex = document.querySelector(&#39;input[name=&quot;massa-proteina&quot;]:checked&#39;).value;
    const selectedProteina = data.proteinasMassas[selectedProteinaIndex];

    if (!selectedMolho || !selectedProteina) {
        return alert(&#39;Por favor, escolha o molho e a prote√≠na.&#39;);
    }

    const finalPrice = selectedSize.preco + selectedProteina.precoAdicional;
    const description = `Tamanho: ${selectedSize.nome} | Molho: ${selectedMolho.value} | Prote√≠na: ${selectedProteina.nome}`;

    addToCart({
        nome: massaItem.nome,
        desc: description,
        preco: finalPrice
    });

    massaModal.classList.add(&#39;hidden&#39;);
});

esfihaComboForm.addEventListener(&#39;submit&#39;, e =&gt; {
    e.preventDefault();
    const comboItem = JSON.parse(e.currentTarget.dataset.comboItem);
    let description = [];
    let finalPrice = comboItem.preco;
    let totalQty = 0;
    
    document.querySelectorAll(&#39;.esfiha-qty-input&#39;).forEach(input =&gt; {
        const qty = parseInt(input.value);
        if(qty &gt; 0) {
            const esfihaIndex = parseInt(input.dataset.index);
            const esfiha = data.esfihas.saboresComPreco[esfihaIndex];
            description.push(`${qty}x ${esfiha.nome}`);
            finalPrice += esfiha.precoAdicional * qty;
            totalQty += qty;
        }
    });

    if (totalQty !== comboItem.quantidade) {
        return alert(`Voc√™ deve selecionar exatamente ${comboItem.quantidade} esfihas. Voc√™ selecionou ${totalQty}.`);
    }

    if (comboItem.includesSoda) {
        const selectedSoda = document.querySelector(&#39;input[name=&quot;esfiha-combo-soda&quot;]:checked&#39;);
        if (selectedSoda) {
            description.push(`Bebida: ${selectedSoda.value}`);
            finalPrice += parseFloat(selectedSoda.dataset.price);
        } else {
            return alert(&#39;Por favor, escolha uma bebida para o combo.&#39;);
        }
    }
    
    addToCart({
        nome: comboItem.nome,
        desc: description.join(&#39;, &#39;),
        preco: finalPrice
    });
    
    esfihaComboModal.classList.add(&#39;hidden&#39;);
});

// EVENT LISTENERS GERAIS
document.body.addEventListener(&#39;click&#39;, (e) =&gt; {
    const target = e.target.closest(&#39;button&#39;);
    if (!target) return;

    if (target.classList.contains(&#39;open-promo-modal-btn&#39;)) {
        openPromoModal(JSON.parse(target.dataset.item));
    } else if (target.classList.contains(&#39;add-to-cart-btn&#39;)) {
        addToCart(JSON.parse(target.dataset.item));
    } else if (target.classList.contains(&#39;open-massa-modal-btn&#39;)) {
        openMassaModal(JSON.parse(target.dataset.item));
    } else if (target.classList.contains(&#39;open-esfiha-combo-modal-btn&#39;)) {
        openEsfihaComboModal(JSON.parse(target.dataset.item));
    }
});

applyCouponBtn.addEventListener(&#39;click&#39;, applyCoupon);
checkoutButton.addEventListener(&#39;click&#39;, () =&gt; {
    if (cart.length &gt; 0) checkoutModal.classList.remove(&#39;hidden&#39;);
});
cancelButton.addEventListener(&#39;click&#39;, () =&gt; checkoutModal.classList.add(&#39;hidden&#39;));
cancelPromo.addEventListener(&#39;click&#39;, () =&gt; promoModal.classList.add(&#39;hidden&#39;));
cancelMassa.addEventListener(&#39;click&#39;, () =&gt; massaModal.classList.add(&#39;hidden&#39;));
cancelEsfihaCombo.addEventListener(&#39;click&#39;, () =&gt; esfihaComboModal.classList.add(&#39;hidden&#39;));
floatingCartButton.addEventListener(&#39;click&#39;, () =&gt; {
    document.getElementById(&#39;cartSection&#39;).scrollIntoView({ behavior: &#39;smooth&#39; });
});

customerInfoForm.addEventListener(&#39;submit&#39;, (e) =&gt; {
    e.preventDefault();
    const orderNumber = Math.floor(1000 + Math.random() * 9000);
    const customerName = document.getElementById(&#39;customerName&#39;).value;
    const customerPhone = document.getElementById(&#39;customerPhone&#39;).value;
    const customerAddress = document.getElementById(&#39;customerAddress&#39;).value;
    const customerNeighborhood = document.getElementById(&#39;customerNeighborhood&#39;).value;
    const paymentMethod = document.getElementById(&#39;paymentMethod&#39;).value;
    const customerObs = document.getElementById(&#39;customerObs&#39;).value;
    const ketchupQty = document.getElementById(&#39;ketchupQty&#39;).value;
    const mustardQty = document.getElementById(&#39;mustardQty&#39;).value;
    
    const subtotal = cart.reduce((sum, cartItem) =&gt; sum + (cartItem.product.preco * cartItem.quantity), 0);
    let discount = 0;
    if (appliedCoupon) {
        if (appliedCoupon.type === &#39;percentage&#39;) {
            discount = subtotal * (appliedCoupon.value / 100);
        }
    }

    const totalAfterDiscount = subtotal - discount;
    let deliveryFee = 0;
    if (totalAfterDiscount &gt; 0 &amp;&amp; totalAfterDiscount &lt; 35.00) {
        deliveryFee = 8.00;
    }
    const finalTotal = totalAfterDiscount + deliveryFee;

    let message = `*NOVO PEDIDO SUPER PIZZA* üçï\n\n`;
    message += `*PEDIDO N¬∫:* ${orderNumber}\n`;
    message += `----------------------------------\n`;
    message += `*DADOS DO CLIENTE:*\n`;
    message += `*Nome:* ${customerName}\n`;
    message += `*Telefone:* ${customerPhone}\n`;
    message += `*Endere√ßo:* ${customerAddress}\n`;
    message += `*Bairro:* ${customerNeighborhood}\n`;
    
    if (ketchupQty &gt; 0 || mustardQty &gt; 0) {
        message += `*Cortesia:* ${ketchupQty}x Ketchup, ${mustardQty}x Mostarda\n`;
    }
    if (customerObs) {
        message += `*Observa√ß√µes:* ${customerObs}\n`;
    }
    message += `----------------------------------\n\n`;
    message += `*RESUMO DO PEDIDO:*\n\n`;

    cart.forEach(cartItem =&gt; {
        message += `*${cartItem.quantity}x - ${cartItem.product.nome}*\n`;
        if (cartItem.product.desc) { message += `  - _${cartItem.product.desc}_\n`; }
        message += `  - Pre√ßo Unit.: R$ ${formatCurrency(cartItem.product.preco)}\n`;
        message += `_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\n`;
    });
    
    message += `*Subtotal:* R$ ${formatCurrency(subtotal)}\n`;
    if (discount &gt; 0) {
        message += `*Desconto (${appliedCoupon.code}):* - R$ ${formatCurrency(discount)}\n`;
    }
    if (deliveryFee &gt; 0) {
        message += `*Taxa de Entrega:* R$ ${formatCurrency(deliveryFee)}\n`;
    }
    message += `----------------------------------\n`;
    message += `*Forma de Pagamento:* ${paymentMethod}\n`;
    message += `*TOTAL A PAGAR: R$ ${formatCurrency(finalTotal)}*`;
    
    const whatsappNumber = &quot;5521981417594&quot;;
    const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
    window.open(whatsappUrl, &#39;_blank&#39;);

    checkoutModal.classList.add(&#39;hidden&#39;);
    customerInfoForm.reset();
    cart = [];
    updateCart();
});

// INICIALIZA√á√ÉO
if (buildPizzaForm) {
    populatePizzaOptions();
    renderSodaSelection(); 
    updatePizzaSummary();
}

createMenuSection(&#39;Nossas Ofertas Imperd√≠veis! üî•&#39;, data.promocoes, &#39;promocoes&#39;);
createMenuSection(&#39;Nossas Massas Artesanais üçù&#39;, data.massas, &#39;massas&#39;);
createMenuSection(&#39;Nossos Hamb√∫rgueres Suculentos üçî&#39;, data.hamburgueres, &#39;hamburgueres&#39;);
createEsfihasSection();
createMenuSection(&#39;Combos &amp; Petiscos para Compartilhar üçü&#39;, data.combos, &#39;combos&#39;);
createMenuSection(&#39;Bebidas Geladinhas ü•§&#39;, data.bebidas, &#39;bebidas&#39;);
createContatoSection();
updateCart();
});
</script>

</body>
</html>
