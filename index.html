<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Super Pizza - Super Esfihas - Super Massas - Super Tudo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <style>
    .tab-active { border-bottom: 4px solid #ef4444; color: #ef4444; font-weight: bold; }
    .custom-scroll::-webkit-scrollbar { width: 8px; }
    .custom-scroll::-webkit-scrollbar-track { background: #fef3c7; }
    .custom-scroll::-webkit-scrollbar-thumb { background-color: #f87171; border-radius: 10px; border: 2px solid #fef3c7; }
    .cart-item-enter { animation: slide-in 0.3s ease-out forwards; }
    @keyframes slide-in { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }
    .modal-enter { animation: fade-in 0.3s ease-out forwards; }
    @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
    button { transition: transform 0.1s ease-in-out, background-color 0.2s; }
    button:active { transform: scale(0.95); }
    button:disabled { background-color: #9ca3af !important; cursor: not-allowed !important; opacity: 0.7; }
    .accordion-toggle .fa-chevron-down { transition: transform 0.2s ease-in-out; }
    .accordion-toggle.open .fa-chevron-down { transform: rotate(180deg); }
  </style>
</head>
<body class="bg-gradient-to-br from-yellow-50 via-red-50 to-yellow-100 min-h-screen flex flex-col font-sans">

<header id="header" class="bg-red-700 text-white p-4 shadow-xl">
  <div class="max-w-7xl mx-auto flex flex-col items-center">
    <div class="flex items-center gap-3">
      <i class="fas fa-pizza-slice text-3xl text-yellow-300"></i>
      <h1 class="text-3xl font-extrabold" style="font-family: 'Titan One', cursive;">Super Pizza</h1>
    </div>
    <div class="mt-3 text-center text-xs">
      <p class="font-semibold"><i class="fas fa-motorcycle mr-2 text-yellow-300"></i>Entrega grátis acima de R$ 35,00!</p>
      <p><i class="fas fa-credit-card mr-2 text-yellow-300"></i>Aceitamos cartões de refeição e alimentação</p>
    </div>
  </div>
</header>

<main class="flex-grow max-w-7xl mx-auto p-2 w-full">
  <nav class="mb-6 flex flex-wrap justify-center border-b-2 border-red-200">
    <button class="tab-button tab-active px-3 py-2 font-semibold text-sm" data-tab="promocoes">Promoções 🔥</button>
    <button class="tab-button px-3 py-2 font-semibold text-sm" data-tab="pizzas">Pizzas 🍕</button>
    <button class="tab-button px-3 py-2 font-semibold text-sm" data-tab="massas">Massas 🍝</button>
    <button class="tab-button px-3 py-2 font-semibold text-sm" data-tab="hamburgueres">Hambúrgueres 🍔</button>
    <button class="tab-button px-3 py-2 font-semibold text-sm" data-tab="esfihas">Esfihas 🥟</button>
    <button class="tab-button px-3 py-2 font-semibold text-sm" data-tab="combos">Combos 🍟</button>
    <button class="tab-button px-3 py-2 font-semibold text-sm" data-tab="bebidas">Bebidas 🥤</button>
    <button class="tab-button px-3 py-2 font-semibold text-sm" data-tab="contato">Contato 📞</button>
  </nav>
  
  <div>
    <section id="promocoes" class="tab-content block"></section>
    <section id="pizzas" class="tab-content hidden"></section>
    <section id="massas" class="tab-content hidden"></section>
    <section id="hamburgueres" class="tab-content hidden"></section>
    <section id="esfihas" class="tab-content hidden"></section>
    <section id="combos" class="tab-content hidden"></section>
    <section id="bebidas" class="tab-content hidden"></section>
    <section id="contato" class="tab-content hidden"></section>
  </div>
</main>

<button id="floatingCartButton" class="hidden fixed bottom-4 right-4 bg-red-600 text-white p-3 rounded-full shadow-lg z-40 flex items-center">
  <i class="fas fa-shopping-cart text-xl"></i>
  <span id="floatingCartTotal" class="ml-2 bg-yellow-300 text-red-700 text-xs font-bold rounded-full px-2 py-1">R$ 0,00</span>
</button>

<div id="cartModal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 modal-enter">
  <div class="bg-white rounded-lg shadow-2xl p-4 w-full max-w-md max-h-[90vh] flex flex-col">
    <div class="flex justify-between items-center border-b-2 border-red-200 pb-2 mb-4"><h3 class="text-xl font-bold text-red-700 flex items-center gap-3"><i class="fas fa-shopping-cart text-red-600"></i> Meu Pedido</h3><button id="closeCartModal" class="text-gray-500 hover:text-red-600 text-2xl">&times;</button></div>
    <div id="cartItems" class="flex-grow overflow-y-auto custom-scroll mb-4"></div>
    <div class="border-t-2 border-red-200 pt-4"><div class="mb-4"><div class="flex gap-2"><input type="text" id="couponInput" placeholder="Tem um cupom?" class="w-full p-2 border border-gray-300 rounded-md text-sm"><button id="applyCouponBtn" class="bg-gray-800 text-white px-4 rounded-md hover:bg-gray-700 text-sm font-bold">Aplicar</button></div><p id="couponMessage" class="text-xs mt-1"></p></div><div class="space-y-1 text-sm"><div class="flex justify-between items-center"><span class="text-gray-600">Subtotal:</span><span id="cartSubtotal" class="text-gray-800 font-semibold">R$ 0,00</span></div><div id="discountContainer" class="hidden flex justify-between items-center text-green-600"><span class="font-semibold">Desconto:</span><span id="discountAmount" class="font-semibold">- R$ 0,00</span></div><div id="deliveryFeeContainer" class="hidden flex justify-between items-center"><span class="text-gray-600">Taxa de Entrega:</span><span id="cartDeliveryFee" class="font-semibold text-gray-800">R$ 8,00</span></div><div class="flex justify-between items-center border-t pt-2 mt-2"><span class="text-lg font-bold text-gray-800">Total:</span><span id="cartTotal" class="text-xl font-bold text-red-700">R$ 0,00</span></div></div><button id="checkoutButton" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg text-lg mt-4" disabled><i class="fab fa-whatsapp"></i> Concluir Pedido</button></div>
  </div>
</div>
<div id="checkoutModal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 modal-enter">
  <div class="bg-white rounded-lg shadow-2xl p-4 w-full max-w-md max-h-[90vh] overflow-y-auto custom-scroll">
    <h2 class="text-xl font-bold text-gray-800 mb-4 text-center">Quase lá! Faltam seus dados...</h2>
    <form id="customerInfoForm"><div class="mb-3"><label for="customerName" class="block text-gray-700 text-sm font-bold mb-1">Nome Completo:</label><input type="text" id="customerName" class="shadow-sm appearance-none border rounded w-full py-2 px-3 text-gray-700" required></div><div class="grid grid-cols-1 gap-3 mb-3"><div><label for="customerAddress" class="block text-gray-700 text-sm font-bold mb-1">Endereço (Rua e Nº):</label><input type="text" id="customerAddress" class="shadow-sm appearance-none border rounded w-full py-2 px-3 text-gray-700" required></div><div><label for="customerNeighborhood" class="block text-gray-700 text-sm font-bold mb-1">Bairro:</label><input type="text" id="customerNeighborhood" class="shadow-sm appearance-none border rounded w-full py-2 px-3 text-gray-700" required></div></div><div class="mb-3"><label for="customerObs" class="block text-gray-700 text-sm font-bold mb-1">Observações (opcional):</label><textarea id="customerObs" class="shadow-sm appearance-none border rounded w-full py-2 px-3 text-gray-700" rows="2" placeholder="Ex: sem cebola, etc."></textarea></div><div class="border p-3 rounded-lg mb-4"><p class="block text-gray-700 text-sm font-bold mb-2">Sachês (Cortesia)</p><div class="flex items-center justify-around"><div><label for="ketchupQty" class="text-sm">Ketchup:</label><input type="number" id="ketchupQty" min="0" max="10" value="0" class="w-16 text-center border rounded"></div><div><label for="mustardQty" class="text-sm">Mostarda:</label><input type="number" id="mustardQty" min="0" max="10" value="0" class="w-16 text-center border rounded"></div></div></div><div class="mb-4"><label for="paymentMethod" class="block text-gray-700 text-sm font-bold mb-1">Forma de Pagamento:</label><select id="paymentMethod" class="shadow-sm appearance-none border rounded w-full py-2 px-3 text-gray-700" required><option value="" disabled selected>Selecione</option><option value="Vale Refeição/Alimentação">Vale Refeição/Alimentação</option><option value="PIX">PIX</option><option value="Cartão de Crédito">Cartão de Crédito</option><option value="Cartão de Débito">Cartão de Débito</option><option value="Dinheiro">Dinheiro</option></select></div><div class="flex items-center justify-between gap-4 mt-6"><button type="button" id="cancelButton" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg w-1/2">Cancelar</button><button type="submit" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg w-1/2">Confirmar</button></div></form>
  </div>
</div>
<div id="promoModal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 modal-enter">
  <div class="bg-white rounded-lg shadow-2xl p-6 w-full max-w-2xl max-h-[90vh] flex flex-col">
    <h2 id="promoModalTitle" class="text-xl font-bold text-gray-800 mb-4 text-center"></h2><form id="promoForm" class="flex-grow overflow-y-auto custom-scroll pr-2"><div id="promoSelectionContainer" class="space-y-6"></div></form><div class="mt-4 pt-4 border-t"><p class="text-xl font-bold text-red-700 text-center">Total: R$ <span id="promoTotal">0,00</span></p><div class="flex items-center justify-between gap-4 mt-4"><button type="button" id="cancelPromo" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg w-1/2">Cancelar</button><button type="submit" form="promoForm" id="addPromoBtn" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg w-1/2">Adicionar</button></div></div>
  </div>
</div>
<div id="massaModal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 modal-enter">
  <div class="bg-white rounded-lg shadow-2xl p-6 w-full max-w-xl max-h-[90vh] flex flex-col">
    <h2 id="massaModalTitle" class="text-xl font-bold text-gray-800 mb-4 text-center"></h2><form id="massaForm" class="flex-grow overflow-y-auto custom-scroll pr-2"><div id="massaSelectionContainer" class="space-y-6"></div></form><div class="mt-4 pt-4 border-t"><p class="text-xl font-bold text-red-700 text-center">Total: R$ <span id="massaTotal">0,00</span></p><div class="flex items-center justify-between gap-4 mt-4"><button type="button" id="cancelMassa" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg w-1/2">Cancelar</button><button type="submit" form="massaForm" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg w-1/2">Adicionar</button></div></div>
  </div>
</div>
<div id="esfihaComboModal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4 modal-enter">
  <div class="bg-white rounded-lg shadow-2xl p-6 w-full max-w-2xl max-h-[90vh] flex flex-col">
    <h2 id="esfihaComboModalTitle" class="text-xl font-bold text-gray-800 mb-4 text-center"></h2><form id="esfihaComboForm" class="flex-grow overflow-y-auto custom-scroll pr-2"><div id="esfihaComboSelectionContainer" class="space-y-4"></div><div id="esfihaComboSodaContainer" class="mt-6 space-y-4"></div></form><div class="mt-4 pt-4 border-t"><div class="p-3 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 rounded-lg"><p>Selecionadas: <span id="esfihaCounter">0</span> de <span id="esfihaTotalQty">0</span></p></div><p id="esfihaWarning" class="text-red-600 text-sm mt-2 hidden text-center font-bold"></p><p class="text-xl font-bold text-red-700 text-center mt-4">Total: R$ <span id="esfihaComboTotal">0,00</span></p><div class="flex items-center justify-between gap-4 mt-4"><button type="button" id="cancelEsfihaCombo" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg w-1/2">Cancelar</button><button type="submit" form="esfihaComboForm" id="addEsfihaComboBtn" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg w-1/2">Adicionar</button></div></div>
  </div>
</div>

<footer class="bg-red-800 text-yellow-100 p-6 mt-12">
  <div class="max-w-7xl mx-auto text-center"><div class="flex justify-center items-center gap-4 mb-4"><img src="https://i.imgur.com/83S4Y7g.png" alt="Sodexo" class="h-6"><img src="https://i.imgur.com/kM3T1fS.png" alt="VR Benefícios" class="h-8"></div><p class="font-semibold">Super Pizza &copy; 2025</p><p class="text-sm italic mt-2">"O Senhor é o meu pastor e nada me faltará"</p></div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
    try {
        const WHATSAPP_NUMBER = '5521000000000'; // SUBSTITUA PELO SEU NÚMERO
        
        // Objeto de dados atualizado com os combos personalizáveis
        const data = {
            refrigerantesPromo: [ { nome: 'Guaraná Antarctica 1.5L (Grátis)', precoAdicional: 0 }, { nome: 'Kuat 2L (Grátis)', precoAdicional: 0 }, { nome: 'Pepsi 1.5L (Grátis)', precoAdicional: 0 }, { nome: 'Coca-Cola 2L', precoAdicional: 12.00 }, { nome: 'Pepsi 2L', precoAdicional: 5.00 }, { nome: 'Guaraná Antarctica 2L', precoAdicional: 5.00 } ],
            massaSizes: [ { nome: '400gr (serve 1 pessoa)', preco: 34.90 }, { nome: '1kg (serve até 3 pessoas)', preco: 59.90 } ],
            proteinasMassas: [ { nome: 'Presunto', precoAdicional: 0 }, { nome: 'Carne Moída', precoAdicional: 0 }, { nome: 'Frango', precoAdicional: 0 }, { nome: 'Carne Seca', precoAdicional: 10.00 }, { nome: 'Camarão', precoAdicional: 10.00 }, { nome: 'Bacalhau', precoAdicional: 10.00 } ],
            ingredientesMassas: [ { nome: 'Alho', precoAdicional: 1.50 }, { nome: 'Atum', precoAdicional: 3.50 }, { nome: 'Bacon', precoAdicional: 3.50 }, { nome: 'Calabresa', precoAdicional: 2.50 }, { nome: 'Cebola', precoAdicional: 1.50 }, { nome: 'Lombo Canadense', precoAdicional: 3.50 }, { nome: 'Ovo', precoAdicional: 1.50 }, { nome: 'Palmito', precoAdicional: 3.50 }, { nome: 'Presunto', precoAdicional: 2.50 }, { nome: 'Salaminho', precoAdicional: 3.50 }, { nome: 'Tomate Seco', precoAdicional: 3.50 } ],
            molhosMassas: [ { nome: 'Molho ao Sugo' }, { nome: 'Molho Branco' }, { nome: 'Molho Quatro Queijos' } ],
            promocoes: [ { id: 'promo-combo-caixa', nome: 'Caixa Combo da Galera', desc: '4 X-Tudo, 5 pastéis e batata com cheddar e bacon.', preco: 90.00, preco_antigo: 120.00, isCustomizable: false }, { id: 'promo-media', nome: 'Pizza Média (32cm) Premiada', desc: 'Sua pizza média preferida com um preço especial.', preco: 52.00, preco_antigo: 60.00, isCustomizable: true, pizzas: [{ type: 'salgada', size: 'Média', maxSabores: 2 }] }, { id: 'promo-familia', nome: 'Combo Família Feliz', desc: '1 Pizza Família (2 sabores), 1 pizza doce individual e 1 refri.', preco: 90.00, isCustomizable: true, pizzas: [{ type: 'salgada', size: 'Família', maxSabores: 2 }], includesSweet: true, includesSoda: true }, { id: 'promo-gigante', nome: 'Combo Gigante Imbatível', desc: '1 Pizza Gigante (3 sabores), 1 pizza doce individual e 1 refri.', preco: 110.00, preco_antigo: 120.00, isCustomizable: true, pizzas: [{ type: 'salgada', size: 'Gigante', maxSabores: 3 }], includesSweet: true, includesSoda: true }, { id: 'promo-slim', nome: 'Promo Slim Gigante (47 cm)', desc: 'Sabor em tamanho gigante com um desconto incrível.', preco: 85.00, preco_antigo: 100.00, isCustomizable: true, pizzas: [{ type: 'salgada', size: 'Gigante', maxSabores: 3 }] }, { id: 'promo-2medias', nome: 'Dose Dupla: 2 Médias + 1 Doce', desc: '2 Pizzas Médias (2 sabores cada) e ganhe 1 brotão doce.', preco: 100.00, isCustomizable: true, pizzas: [{ type: 'salgada', size: 'Média 1', maxSabores: 2 }, { type: 'salgada', size: 'Média 2', maxSabores: 2 }], includesSweet: true } ],
            pizzas: { /* ... (seção de pizzas inalterada) ... */ },
            massas: [ { id: 'massa-1', nome: 'Lasanha', desc: 'Personalize com tamanho, proteína, molho e ingredientes.', isCustomizable: true }, { id: 'massa-2', nome: 'Capeletti', desc: 'Personalize com tamanho, proteína, molho e ingredientes.', isCustomizable: true }, { id: 'massa-3', nome: 'Raviolli', desc: 'Personalize com tamanho, proteína, molho e ingredientes.', isCustomizable: true }, { id: 'massa-4', nome: 'Espaguete', desc: 'Personalize com tamanho, proteína, molho e ingredientes.', isCustomizable: true }, { id: 'massa-5', nome: 'Talharim', desc: 'Personalize com tamanho, proteína, molho e ingredientes.', isCustomizable: true }, { id: 'massa-6', nome: 'Nhoque', desc: 'Personalize com tamanho, proteína, molho e ingredientes.', isCustomizable: true }, { id: 'massa-7', nome: 'Penne', desc: 'Personalize com tamanho, proteína, molho e ingredientes.', isCustomizable: true } ],
            hamburgueres: [ { id: 'hamb-1', nome: 'X-Duplo', desc: '2 Carnes, 2 ovos, queijo, presunto, bacon, calabresa, salada e molho.', preco: 17.00, isCustomizable: false }, { id: 'hamb-2', nome: 'X-Tudo', desc: 'Carne, ovo, queijo, presunto, bacon, calabresa, molho e salada.', preco: 14.00, isCustomizable: false }, { id: 'hamb-3', nome: 'X-Burguer Tropicaliente', desc: 'Carne, queijo, presunto, bacon, calabresa, molho e batata palha.', preco: 12.00, isCustomizable: false }, { id: 'hamb-4', nome: 'X-Egg', desc: 'Carne, queijo, ovo, salada e molho.', preco: 10.00, isCustomizable: false }, { id: 'hamb-5', nome: 'X-Burguer Kids', desc: 'Pão, carne, queijo, molho e batata palha.', preco: 5.00, isCustomizable: false }, { id: 'hamb-6', nome: 'X-Burguer Double Cheese', desc: 'Carne, presunto, dobro de catupiry e cheddar.', preco: 11.00, isCustomizable: false }, { id: 'hamb-7', nome: 'X-Bacon Lover', desc: 'Pão, carne, queijo e o dobro de bacon crocante.', preco: 11.00, isCustomizable: false } ],
            esfihas: { /* ... (seção de esfihas inalterada) ... */ },
            
            // --- SEÇÃO DE COMBOS ATUALIZADA ---
            combos: [ 
                { id: 'combo-1', nome: 'Combo 1', desc: '4 X-Tudo + 25 salgados + Batata c/ Cheddar e Bacon', preco: 85.00, isCustomizable: true, includesSoda: true}, 
                { id: 'combo-2', nome: 'Combo 2', desc: '100 Salgadinhos fritos grandes e sortidos.', preco: 70.00, isCustomizable: false }, 
                { id: 'combo-3', nome: 'Combo 3', desc: '25 Salgados + Porção de Calabresa + Batata c/ Cheddar', preco: 85.00, isCustomizable: true, includesSoda: true}, 
                { id: 'combo-4', nome: 'Combo 4', desc: '4 X-Tudo + 25 Salgados + Calabresa + Anéis de Cebola', preco: 85.00, isCustomizable: true, includesSoda: true}, 
                { id: 'combo-5', nome: 'Combo 5', desc: '4 X-Tudo + 25 Salgados + Batata c/ Cheddar e Bacon', preco: 85.00, isCustomizable: true, includesSoda: true}, 
                { id: 'combo-6', nome: 'Combo 6', desc: '4 X-Tudo + Calabresa Acebolada + Batata Frita + Anéis de Cebola', preco: 85.00, isCustomizable: true, includesSoda: true}, 
                { id: 'combo-7', nome: 'Petisco Frango a Passarinho + Fritas', desc: 'Frango crocante com fritas. Inclui um refri!', preco: 60.00, isCustomizable: true, includesSoda: true} 
            ],
            
            bebidas: [ { id: 'bebida-1', nome: 'Refrigerante Lata 350ml', desc: 'Escolha seu sabor.', preco: 5.00, isCustomizable: false }, { id: 'bebida-2', nome: 'Refrigerante 2 Litros', desc: 'Para dividir com a galera!', preco: 12.00, isCustomizable: false } ]
        };
        
        // Copie o restante do seu script a partir daqui...
        let cart = [];
        let appliedCoupon = null;
        // ...todas as suas funções (formatCurrency, findItem, updateCart, createMenuSection, etc.)...
        // Nenhuma outra função precisa ser alterada, exceto a 'initModals'.

        // Adicione a nova função para o modal de refrigerantes
        function openComboSodaModal(item) {
            const modal = document.getElementById('promoModal'); // Reaproveitando o modal de promoções
            const title = document.getElementById('promoModalTitle');
            const container = document.getElementById('promoSelectionContainer');
            const totalEl = document.getElementById('promoTotal');
            const form = document.getElementById('promoForm');
            const cancelBtn = document.getElementById('cancelPromo');

            title.textContent = `Escolha a bebida para: ${item.nome}`;
            
            // Cria o seletor de refrigerantes
            container.innerHTML = `
                <div class="p-2">
                    <label for="combo-soda-select" class="block font-bold text-gray-700 mb-2">Refrigerante Incluso:</label>
                    <select id="combo-soda-select" class="w-full p-2 border border-gray-300 rounded-md">
                        ${data.refrigerantesPromo.map(refri => `
                            <option value="${refri.nome}" data-price="${refri.precoAdicional}">
                                ${refri.nome} ${refri.precoAdicional > 0 ? `(+ R$ ${formatCurrency(refri.precoAdicional)})` : '(Grátis)'}
                            </option>
                        `).join('')}
                    </select>
                </div>
            `;

            const updateTotal = () => {
                let total = item.preco;
                const sodaSelect = document.getElementById('combo-soda-select');
                if (sodaSelect) {
                    const selectedOption = sodaSelect.options[sodaSelect.selectedIndex];
                    total += parseFloat(selectedOption.dataset.price);
                }
                totalEl.textContent = formatCurrency(total);
            };

            const submitHandler = (e) => {
                e.preventDefault();
                const sodaSelect = document.getElementById('combo-soda-select');
                const selectedSoda = sodaSelect.value;
                const finalPrice = parseFloat(totalEl.textContent.replace(',', '.'));

                addToCart({
                    nome: item.nome,
                    desc: `${item.desc} | Bebida: ${selectedSoda}`,
                    preco: finalPrice
                });
                closeModal();
            };
            
            const closeModal = () => {
                modal.classList.add('hidden');
                form.removeEventListener('submit', submitHandler);
                container.innerHTML = ''; // Limpa o conteúdo para a próxima vez
            };

            form.addEventListener('submit', submitHandler);
            container.querySelector('select').addEventListener('change', updateTotal);
            cancelBtn.onclick = closeModal;
            
            updateTotal();
            modal.classList.remove('hidden');
        }

        // Função 'initModals' atualizada
        function initModals() {
            document.body.addEventListener('click', e => {
                const button = e.target.closest('.add-item-btn');
                if (button) {
                    const isCustomizable = button.dataset.customizable === 'true';
                    const category = button.dataset.category;
                    const itemId = button.dataset.id;
                    const item = findItem(category, itemId);

                    if (!item) {
                        console.error('Item não encontrado:', category, itemId);
                        return;
                    }

                    if (isCustomizable) {
                        switch (category) {
                            case 'massas':
                                openMassaModal(item);
                                break;
                            case 'esfihas-combos':
                                openEsfihaComboModal(item);
                                break;
                            // --- LÓGICA ATUALIZADA PARA COMBOS ---
                            case 'combos':
                                if (item.includesSoda) {
                                    openComboSodaModal(item); // Chama o novo modal
                                } else {
                                    alert(`A personalização para "${item.nome}" ainda não foi implementada.`);
                                }
                                break;
                            case 'promocoes':
                                alert(`A personalização para "${item.nome}" ainda não foi implementada.`);
                                break;
                            default:
                                alert(`Item customizável sem ação definida: ${category}`);
                        }
                    } else {
                        addToCart({ nome: item.nome, preco: item.preco, desc: item.desc });
                        const originalText = button.innerHTML;
                        button.textContent = 'Adicionado!';
                        button.classList.add('bg-green-500', 'hover:bg-green-600');
                        button.classList.remove('bg-red-600', 'hover:bg-red-700');
                        setTimeout(() => {
                            button.innerHTML = originalText;
                            button.classList.remove('bg-green-500', 'hover:bg-green-600');
                            button.classList.add('bg-red-600', 'hover:bg-red-700');
                        }, 1500);
                    }
                }
            });
            
             const cartModal = document.getElementById('cartModal');
             const floatingCartButton = document.getElementById('floatingCartButton');
             const closeCartModal = document.getElementById('closeCartModal');

             floatingCartButton.addEventListener('click', () => cartModal.classList.remove('hidden'));
             closeCartModal.addEventListener('click', () => cartModal.classList.add('hidden'));
        }

        // Cole também as outras funções do seu script aqui (initializeApp, initPizzaBuilder, etc.)
        // A única função que muda, além da adição da 'openComboSodaModal', é a 'initModals'
        
    } catch (error) {
        // ... (seu bloco catch)
    }
});
</script>
</body>
</html>




